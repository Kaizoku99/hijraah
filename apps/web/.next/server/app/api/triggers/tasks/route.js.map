{"version":3,"file":"../app/api/triggers/tasks/route.js","mappings":"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","sources":["webpack://@hijraah/web/../../node_modules/.pnpm/next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa/node_modules/next/dist/server/web/spec-extension/adapters/reflect.js","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/after-task-async-storage.external.js\"","webpack://@hijraah/web/external commonjs2 \"module\"","webpack://@hijraah/web/../../node_modules/.pnpm/@opentelemetry+instrumentat_04f370d515cee0be955272f826166073/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/ sync","webpack://@hijraah/web/external commonjs \"next/dist/compiled/next-server/app-page.runtime.prod.js\"","webpack://@hijraah/web/external commonjs2 \"process\"","webpack://@hijraah/web/external commonjs2 \"os\"","webpack://@hijraah/web/external commonjs2 \"util\"","webpack://@hijraah/web/external commonjs2 \"fs\"","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/work-async-storage.external.js\"","webpack://@hijraah/web/external node-commonjs \"node:child_process\"","webpack://@hijraah/web/external commonjs2 \"path\"","webpack://@hijraah/web/external commonjs2 \"diagnostics_channel\"","webpack://@hijraah/web/external node-commonjs \"node:http\"","webpack://@hijraah/web/external node-commonjs \"node:zlib\"","webpack://@hijraah/web/external node-commonjs \"node:tls\"","webpack://@hijraah/web/external node-commonjs \"node:https\"","webpack://@hijraah/web/external commonjs \"next/dist/compiled/next-server/app-route.runtime.prod.js\"","webpack://@hijraah/web/external node-commonjs \"node:os\"","webpack://@hijraah/web/external node-commonjs \"node:diagnostics_channel\"","webpack://@hijraah/web/external commonjs2 \"crypto\"","webpack://@hijraah/web/external node-commonjs \"node:stream\"","webpack://@hijraah/web/external node-commonjs \"node:util\"","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/work-unit-async-storage.external.js\"","webpack://@hijraah/web/external node-commonjs \"node:fs\"","webpack://@hijraah/web/external commonjs2 \"worker_threads\"","webpack://@hijraah/web/external commonjs2 \"perf_hooks\"","webpack://@hijraah/web/external node-commonjs \"node:worker_threads\"","webpack://@hijraah/web/external node-commonjs \"node:path\"","webpack://@hijraah/web/external node-commonjs \"node:net\"","webpack://@hijraah/web/external commonjs2 \"url\"","webpack://@hijraah/web/external commonjs2 \"child_process\"","webpack://@hijraah/web/external node-commonjs \"node:readline\"","webpack://@hijraah/web/external commonjs2 \"tty\"","webpack://@hijraah/web/external commonjs2 \"async_hooks\"","webpack://@hijraah/web/external node-commonjs \"node:inspector\"","webpack://@hijraah/web/../../node_modules/.pnpm/next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa/node_modules/next/dist/server/request/utils.js","webpack://@hijraah/web/external commonjs2 \"events\"","webpack://@hijraah/web/../../node_modules/.pnpm/require-in-the-middle@7.5.2/node_modules/require-in-the-middle/ sync","webpack://@hijraah/web/src/app/api/triggers/tasks/route.ts","webpack://@hijraah/web/sentry-wrapper-module","webpack://@hijraah/web/?385e"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nObject.defineProperty(exports, \"ReflectAdapter\", {\n    enumerable: true,\n    get: function() {\n        return ReflectAdapter;\n    }\n});\nclass ReflectAdapter {\n    static get(target, prop, receiver) {\n        const value = Reflect.get(target, prop, receiver);\n        if (typeof value === 'function') {\n            return value.bind(target);\n        }\n        return value;\n    }\n    static set(target, prop, value, receiver) {\n        return Reflect.set(target, prop, value, receiver);\n    }\n    static has(target, prop) {\n        return Reflect.has(target, prop);\n    }\n    static deleteProperty(target, prop) {\n        return Reflect.deleteProperty(target, prop);\n    }\n}\n\n//# sourceMappingURL=reflect.js.map","module.exports = require(\"next/dist/server/app-render/after-task-async-storage.external.js\");","module.exports = require(\"module\");","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 8963;\nmodule.exports = webpackEmptyContext;","module.exports = require(\"next/dist/compiled/next-server/app-page.runtime.prod.js\");","module.exports = require(\"process\");","module.exports = require(\"os\");","module.exports = require(\"util\");","module.exports = require(\"fs\");","module.exports = require(\"next/dist/server/app-render/work-async-storage.external.js\");","module.exports = require(\"node:child_process\");","module.exports = require(\"path\");","module.exports = require(\"diagnostics_channel\");","module.exports = require(\"node:http\");","module.exports = require(\"node:zlib\");","module.exports = require(\"node:tls\");","module.exports = require(\"node:https\");","module.exports = require(\"next/dist/compiled/next-server/app-route.runtime.prod.js\");","module.exports = require(\"node:os\");","module.exports = require(\"node:diagnostics_channel\");","module.exports = require(\"crypto\");","module.exports = require(\"node:stream\");","module.exports = require(\"node:util\");","module.exports = require(\"next/dist/server/app-render/work-unit-async-storage.external.js\");","module.exports = require(\"node:fs\");","module.exports = require(\"worker_threads\");","module.exports = require(\"perf_hooks\");","module.exports = require(\"node:worker_threads\");","module.exports = require(\"node:path\");","module.exports = require(\"node:net\");","module.exports = require(\"url\");","module.exports = require(\"child_process\");","module.exports = require(\"node:readline\");","module.exports = require(\"tty\");","module.exports = require(\"async_hooks\");","module.exports = require(\"node:inspector\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n0 && (module.exports = {\n    isRequestAPICallableInsideAfter: null,\n    throwForSearchParamsAccessInUseCache: null,\n    throwWithStaticGenerationBailoutError: null,\n    throwWithStaticGenerationBailoutErrorWithDynamicError: null\n});\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    isRequestAPICallableInsideAfter: function() {\n        return isRequestAPICallableInsideAfter;\n    },\n    throwForSearchParamsAccessInUseCache: function() {\n        return throwForSearchParamsAccessInUseCache;\n    },\n    throwWithStaticGenerationBailoutError: function() {\n        return throwWithStaticGenerationBailoutError;\n    },\n    throwWithStaticGenerationBailoutErrorWithDynamicError: function() {\n        return throwWithStaticGenerationBailoutErrorWithDynamicError;\n    }\n});\nconst _staticgenerationbailout = require(\"../../client/components/static-generation-bailout\");\nconst _aftertaskasyncstorageexternal = require(\"../app-render/after-task-async-storage.external\");\nfunction throwWithStaticGenerationBailoutError(route, expression) {\n    throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${route} couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`), \"__NEXT_ERROR_CODE\", {\n        value: \"E576\",\n        enumerable: false,\n        configurable: true\n    });\n}\nfunction throwWithStaticGenerationBailoutErrorWithDynamicError(route, expression) {\n    throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${route} with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`), \"__NEXT_ERROR_CODE\", {\n        value: \"E543\",\n        enumerable: false,\n        configurable: true\n    });\n}\nfunction throwForSearchParamsAccessInUseCache(route) {\n    throw Object.defineProperty(new Error(`Route ${route} used \"searchParams\" inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \"searchParams\" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`), \"__NEXT_ERROR_CODE\", {\n        value: \"E634\",\n        enumerable: false,\n        configurable: true\n    });\n}\nfunction isRequestAPICallableInsideAfter() {\n    const afterTaskStore = _aftertaskasyncstorageexternal.afterTaskAsyncStorage.getStore();\n    return (afterTaskStore == null ? void 0 : afterTaskStore.rootTaskSpawnPhase) === 'action';\n}\n\n//# sourceMappingURL=utils.js.map","module.exports = require(\"events\");","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 96708;\nmodule.exports = webpackEmptyContext;","import { NextRequest, NextResponse } from \"next/server\";\r\nimport { z } from \"zod\";\r\n\r\n// Context7 Pattern: Type-safe API schema\r\nconst TaskQuerySchema = z.object({\r\n  category: z\r\n    .enum([\"ai\", \"processing\", \"maintenance\", \"communication\"])\r\n    .optional(),\r\n  status: z\r\n    .enum([\r\n      \"pending\",\r\n      \"running\",\r\n      \"completed\",\r\n      \"failed\",\r\n      \"cancelled\",\r\n      \"retrying\",\r\n    ])\r\n    .optional(),\r\n  limit: z.coerce.number().min(1).max(100).default(50),\r\n  offset: z.coerce.number().min(0).default(0),\r\n});\r\n\r\n// Context7 Pattern: API response types\r\ninterface TaskRunResponse {\r\n  id: string;\r\n  taskId: string;\r\n  status: string;\r\n  createdAt: string;\r\n  startedAt?: string;\r\n  completedAt?: string;\r\n  duration?: number;\r\n  attempts: number;\r\n  maxAttempts: number;\r\n  output?: any;\r\n  error?: string;\r\n  progress?: number;\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\ninterface TaskResponse {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  enabled: boolean;\r\n  lastRun?: TaskRunResponse;\r\n  totalRuns: number;\r\n  successRate: number;\r\n  avgDuration: number;\r\n  isScheduled?: boolean;\r\n  schedule?: string;\r\n  category: string;\r\n}\r\n\r\ninterface TasksApiResponse {\r\n  tasks: TaskResponse[];\r\n  total: number;\r\n  limit: number;\r\n  offset: number;\r\n  hasMore: boolean;\r\n}\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const { searchParams } = new URL(request.url);\r\n    const query = TaskQuerySchema.parse({\r\n      category: searchParams.get(\"category\"),\r\n      status: searchParams.get(\"status\"),\r\n      limit: searchParams.get(\"limit\"),\r\n      offset: searchParams.get(\"offset\"),\r\n    });\r\n\r\n    // TODO: Replace with actual Trigger.dev API integration\r\n    // For now, return mock data that matches the real API structure\r\n\r\n    const mockTasks: TaskResponse[] = [\r\n      {\r\n        id: \"document-processing\",\r\n        name: \"Document Processing\",\r\n        description:\r\n          \"Process uploaded documents with AI analysis using @hijraah/documents\",\r\n        enabled: true,\r\n        category: \"processing\",\r\n        totalRuns: 145,\r\n        successRate: 94.5,\r\n        avgDuration: 12000,\r\n        lastRun: {\r\n          id: \"run-doc-1\",\r\n          taskId: \"document-processing\",\r\n          status: \"completed\",\r\n          createdAt: new Date(Date.now() - 300000).toISOString(),\r\n          startedAt: new Date(Date.now() - 280000).toISOString(),\r\n          completedAt: new Date(Date.now() - 260000).toISOString(),\r\n          duration: 20000,\r\n          attempts: 1,\r\n          maxAttempts: 3,\r\n          progress: 100,\r\n          output: {\r\n            documentsProcessed: 5,\r\n            entitiesExtracted: 23,\r\n            aiProvider: \"openai\",\r\n            hijraahPackages: [\"@hijraah/documents\", \"@hijraah/ai\"],\r\n          },\r\n        },\r\n      },\r\n      {\r\n        id: \"ai-analysis\",\r\n        name: \"AI Analysis\",\r\n        description: \"Multi-provider AI analysis using @hijraah/ai multiplexer\",\r\n        enabled: true,\r\n        category: \"ai\",\r\n        totalRuns: 89,\r\n        successRate: 98.9,\r\n        avgDuration: 8500,\r\n        lastRun: {\r\n          id: \"run-ai-1\",\r\n          taskId: \"ai-analysis\",\r\n          status: \"running\",\r\n          createdAt: new Date(Date.now() - 120000).toISOString(),\r\n          startedAt: new Date(Date.now() - 100000).toISOString(),\r\n          attempts: 1,\r\n          maxAttempts: 2,\r\n          progress: 65,\r\n          metadata: {\r\n            currentProvider: \"anthropic\",\r\n            fallbackReady: true,\r\n            hijraahMultiplexer: \"@hijraah/ai\",\r\n          },\r\n        },\r\n      },\r\n      {\r\n        id: \"web-scraping\",\r\n        name: \"Web Scraping\",\r\n        description: \"Extract immigration content using Firecrawl integration\",\r\n        enabled: true,\r\n        category: \"processing\",\r\n        totalRuns: 67,\r\n        successRate: 91.0,\r\n        avgDuration: 15000,\r\n        lastRun: {\r\n          id: \"run-scrape-1\",\r\n          taskId: \"web-scraping\",\r\n          status: \"failed\",\r\n          createdAt: new Date(Date.now() - 600000).toISOString(),\r\n          startedAt: new Date(Date.now() - 580000).toISOString(),\r\n          completedAt: new Date(Date.now() - 560000).toISOString(),\r\n          duration: 20000,\r\n          attempts: 3,\r\n          maxAttempts: 3,\r\n          error: \"Circuit breaker open: Immigration.gov rate limit exceeded\",\r\n        },\r\n      },\r\n      {\r\n        id: \"email-notification\",\r\n        name: \"Email Notifications\",\r\n        description: \"Send user notifications using @hijraah/workflows\",\r\n        enabled: true,\r\n        category: \"communication\",\r\n        totalRuns: 234,\r\n        successRate: 99.1,\r\n        avgDuration: 2500,\r\n        lastRun: {\r\n          id: \"run-email-1\",\r\n          taskId: \"email-notification\",\r\n          status: \"completed\",\r\n          createdAt: new Date(Date.now() - 900000).toISOString(),\r\n          startedAt: new Date(Date.now() - 895000).toISOString(),\r\n          completedAt: new Date(Date.now() - 892500).toISOString(),\r\n          duration: 2500,\r\n          attempts: 1,\r\n          maxAttempts: 3,\r\n          progress: 100,\r\n          output: {\r\n            emailsSent: 12,\r\n            workflowPackage: \"@hijraah/workflows\",\r\n          },\r\n        },\r\n      },\r\n      {\r\n        id: \"daily-reports\",\r\n        name: \"Daily Reports\",\r\n        description:\r\n          \"Generate analytics using @hijraah/workflows scheduled tasks\",\r\n        enabled: true,\r\n        category: \"communication\",\r\n        totalRuns: 30,\r\n        successRate: 100,\r\n        avgDuration: 5000,\r\n        isScheduled: true,\r\n        schedule: \"0 8 * * *\",\r\n        lastRun: {\r\n          id: \"run-report-1\",\r\n          taskId: \"daily-reports\",\r\n          status: \"completed\",\r\n          createdAt: new Date(Date.now() - 14400000).toISOString(),\r\n          startedAt: new Date(Date.now() - 14390000).toISOString(),\r\n          completedAt: new Date(Date.now() - 14385000).toISOString(),\r\n          duration: 5000,\r\n          attempts: 1,\r\n          maxAttempts: 5,\r\n          progress: 100,\r\n          output: {\r\n            reportsSent: 3,\r\n            metricsGenerated: 15,\r\n            hijraahWorkflows: \"@hijraah/workflows\",\r\n          },\r\n        },\r\n      },\r\n      {\r\n        id: \"index-maintenance\",\r\n        name: \"Search Index Maintenance\",\r\n        description: \"Maintain search indexes using @hijraah/rag\",\r\n        enabled: true,\r\n        category: \"maintenance\",\r\n        totalRuns: 56,\r\n        successRate: 96.4,\r\n        avgDuration: 18000,\r\n        isScheduled: true,\r\n        schedule: \"0 2 * * *\",\r\n        lastRun: {\r\n          id: \"run-index-1\",\r\n          taskId: \"index-maintenance\",\r\n          status: \"pending\",\r\n          createdAt: new Date(Date.now() - 60000).toISOString(),\r\n          attempts: 1,\r\n          maxAttempts: 3,\r\n          progress: 0,\r\n          metadata: {\r\n            ragPackage: \"@hijraah/rag\",\r\n            scheduledFor: \"02:00 UTC\",\r\n          },\r\n        },\r\n      },\r\n    ];\r\n\r\n    // Apply filters\r\n    let filteredTasks = mockTasks;\r\n\r\n    if (query.category) {\r\n      filteredTasks = filteredTasks.filter(\r\n        (task) => task.category === query.category\r\n      );\r\n    }\r\n\r\n    if (query.status) {\r\n      filteredTasks = filteredTasks.filter(\r\n        (task) => task.lastRun?.status === query.status\r\n      );\r\n    }\r\n\r\n    // Apply pagination\r\n    const total = filteredTasks.length;\r\n    const paginatedTasks = filteredTasks.slice(\r\n      query.offset,\r\n      query.offset + query.limit\r\n    );\r\n\r\n    const response: TasksApiResponse = {\r\n      tasks: paginatedTasks,\r\n      total,\r\n      limit: query.limit,\r\n      offset: query.offset,\r\n      hasMore: query.offset + query.limit < total,\r\n    };\r\n\r\n    return NextResponse.json(response);\r\n  } catch (error) {\r\n    console.error(\"Failed to fetch tasks:\", error);\r\n\r\n    if (error instanceof z.ZodError) {\r\n      return NextResponse.json(\r\n        { error: \"Invalid query parameters\", details: error.errors },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    return NextResponse.json(\r\n      { error: \"Internal server error\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// Context7 Pattern: Health check endpoint\r\nexport async function HEAD() {\r\n  return new Response(null, { status: 200 });\r\n}\r\n","import * as origModule from 'next/dist/server/app-render/work-unit-async-storage.external.js';\nimport * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport {} from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nimport * as Sentry from '@sentry/nextjs';\n\n// @ts-expect-error Because we cannot be sure if the RequestAsyncStorage module exists (it is not part of the Next.js public\n// API) we use a shim if it doesn't exist. The logic for this is in the wrapping loader.\n\nconst asyncStorageModule = { ...origModule } ;\n\nconst requestAsyncStorage =\n  'workUnitAsyncStorage' in asyncStorageModule\n    ? asyncStorageModule.workUnitAsyncStorage\n    : 'requestAsyncStorage' in asyncStorageModule\n      ? asyncStorageModule.requestAsyncStorage\n      : undefined;\n\nfunction wrapHandler(handler, method) {\n  // Running the instrumentation code during the build phase will mark any function as \"dynamic\" because we're accessing\n  // the Request object. We do not want to turn handlers dynamic so we skip instrumentation in the build phase.\n  if (process.env.NEXT_PHASE === 'phase-production-build') {\n    return handler;\n  }\n\n  if (typeof handler !== 'function') {\n    return handler;\n  }\n\n  return new Proxy(handler, {\n    apply: (originalFunction, thisArg, args) => {\n      let headers = undefined;\n\n      // We try-catch here just in case the API around `requestAsyncStorage` changes unexpectedly since it is not public API\n      try {\n        const requestAsyncStore = requestAsyncStorage?.getStore() ;\n        headers = requestAsyncStore?.headers;\n      } catch (e) {\n        /** empty */\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return Sentry.wrapRouteHandlerWithSentry(originalFunction , {\n        method,\n        parameterizedRoute: '/api/triggers/tasks',\n        headers,\n      }).apply(thisArg, args);\n    },\n  });\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst GET = wrapHandler(serverComponentModule.GET , 'GET');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst POST = wrapHandler(serverComponentModule.POST , 'POST');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PUT = wrapHandler(serverComponentModule.PUT , 'PUT');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PATCH = wrapHandler(serverComponentModule.PATCH , 'PATCH');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst DELETE = wrapHandler(serverComponentModule.DELETE , 'DELETE');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst HEAD = wrapHandler(serverComponentModule.HEAD , 'HEAD');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst OPTIONS = wrapHandler(serverComponentModule.OPTIONS , 'OPTIONS');\n\nexport { DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT };\n","import { AppRouteRouteModule } from \"next/dist/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\api\\\\triggers\\\\tasks\\\\route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/triggers/tasks/route\",\n        pathname: \"/api/triggers/tasks\",\n        filename: \"route\",\n        bundlePath: \"app/api/triggers/tasks/route\"\n    },\n    resolvedPagePath: \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\api\\\\triggers\\\\tasks\\\\route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map"],"names":["TaskQuerySchema","z","category","optional","status","limit","number","min","max","default","offset","GET","request","searchParams","URL","url","query","parse","get","filteredTasks","id","mockTasks","name","description","enabled","totalRuns","successRate","avgDuration","lastRun","taskId","createdAt","Date","now","toISOString","startedAt","completedAt","duration","attempts","maxAttempts","progress","output","documentsProcessed","entitiesExtracted","aiProvider","hijraahPackages","metadata","currentProvider","fallbackReady","hijraahMultiplexer","error","emailsSent","workflowPackage","isScheduled","schedule","reportsSent","metricsGenerated","hijraahWorkflows","ragPackage","scheduledFor","filter","task","total","length","response","tasks","paginatedTasks","slice","hasMore","NextResponse","json","console","details","errors","HEAD","Response","serverComponentModule.GET","serverComponentModule.POST","serverComponentModule.PUT","serverComponentModule.PATCH","serverComponentModule.DELETE","serverComponentModule.OPTIONS"],"sourceRoot":""}