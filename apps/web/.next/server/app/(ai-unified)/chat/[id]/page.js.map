{"version":3,"file":"../app/(ai-unified)/chat/[id]/page.js","mappings":"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","sources":["webpack://@hijraah/web/../../src/client/request-idle-callback.ts","webpack://@hijraah/web/external node-commonjs \"node:process\"","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/after-task-async-storage.external.js\"","webpack://@hijraah/web/external commonjs2 \"module\"","webpack://@hijraah/web/../../node_modules/.pnpm/@opentelemetry+instrumentat_04f370d515cee0be955272f826166073/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/ sync","webpack://@hijraah/web/external commonjs \"next/dist/compiled/next-server/app-page.runtime.prod.js\"","webpack://@hijraah/web/external commonjs2 \"punycode\"","webpack://@hijraah/web/./src/components/ui/scroll-area.tsx","webpack://@hijraah/web/./src/lib/auth.ts","webpack://@hijraah/web/./src/lib/utils.ts","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/action-async-storage.external.js\"","webpack://@hijraah/web/external commonjs2 \"process\"","webpack://@hijraah/web/./src/_infrastructure/repositories/chat-repository.ts","webpack://@hijraah/web/?e8a0","webpack://@hijraah/web/external commonjs2 \"os\"","webpack://@hijraah/web/src/app/layout.tsx","webpack://@hijraah/web/sentry-wrapper-module","webpack://@hijraah/web/../../node_modules/.pnpm/require-in-the-middle@7.5.2/node_modules/require-in-the-middle/ sync?4daa","webpack://@hijraah/web/external commonjs2 \"stream\"","webpack://@hijraah/web/?d11f","webpack://@hijraah/web/?0505","webpack://@hijraah/web/external commonjs2 \"util\"","webpack://@hijraah/web/./src/components/ui/button.tsx","webpack://@hijraah/web/external commonjs2 \"fs\"","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/work-async-storage.external.js\"","webpack://@hijraah/web/external node-commonjs \"node:child_process\"","webpack://@hijraah/web/external commonjs2 \"path\"","webpack://@hijraah/web/external commonjs2 \"tls\"","webpack://@hijraah/web/external commonjs2 \"diagnostics_channel\"","webpack://@hijraah/web/external node-commonjs \"node:http\"","webpack://@hijraah/web/external node-commonjs \"node:zlib\"","webpack://@hijraah/web/external node-commonjs \"node:tls\"","webpack://@hijraah/web/../../node_modules/.pnpm/next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa/node_modules/next/dist/api/script.js","webpack://@hijraah/web/./src/components/ui/alert.tsx","webpack://@hijraah/web/external node-commonjs \"node:https\"","webpack://@hijraah/web/../../node_modules/lodash/lodash.js","webpack://@hijraah/web/./src/lib/utils/case-converter.ts","webpack://@hijraah/web/./src/components/ui/badge.tsx","webpack://@hijraah/web/external node-commonjs \"node:os\"","webpack://@hijraah/web/../src/progress.tsx","webpack://@hijraah/web/../../../src/icons/users.ts","webpack://@hijraah/web/external node-commonjs \"node:diagnostics_channel\"","webpack://@hijraah/web/external commonjs2 \"crypto\"","webpack://@hijraah/web/external commonjs2 \"https\"","webpack://@hijraah/web/./src/app/not-found.tsx","webpack://@hijraah/web/external node-commonjs \"node:stream\"","webpack://@hijraah/web/external node-commonjs \"node:util\"","webpack://@hijraah/web/./src/i18n/i18n.ts","webpack://@hijraah/web/../../../src/icons/upload.ts","webpack://@hijraah/web/?95a4","webpack://@hijraah/web/../../../src/icons/alert-circle.ts","webpack://@hijraah/web/?967f","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/work-unit-async-storage.external.js\"","webpack://@hijraah/web/?5ef1","webpack://@hijraah/web/../../../src/icons/loader-2.ts","webpack://@hijraah/web/?75ca","webpack://@hijraah/web/./src/i18n/hooks.ts","webpack://@hijraah/web/external node-commonjs \"node:fs\"","webpack://@hijraah/web/external node-commonjs \"node:url\"","webpack://@hijraah/web/external commonjs2 \"worker_threads\"","webpack://@hijraah/web/?475b","webpack://@hijraah/web/external commonjs2 \"zlib\"","webpack://@hijraah/web/src/app/(ai-unified)/chat/layout.tsx","webpack://@hijraah/web/../../node_modules/.pnpm/@opentelemetry+instrumentat_04f370d515cee0be955272f826166073/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/ sync?21c1","webpack://@hijraah/web/external commonjs2 \"perf_hooks\"","webpack://@hijraah/web/?b807","webpack://@hijraah/web/external node-commonjs \"node:worker_threads\"","webpack://@hijraah/web/external node-commonjs \"node:path\"","webpack://@hijraah/web/external node-commonjs \"node:net\"","webpack://@hijraah/web/?5a41","webpack://@hijraah/web/external node-commonjs \"node:crypto\"","webpack://@hijraah/web/external commonjs2 \"buffer\"","webpack://@hijraah/web/external commonjs2 \"url\"","webpack://@hijraah/web/external commonjs2 \"child_process\"","webpack://@hijraah/web/external node-commonjs \"node:readline\"","webpack://@hijraah/web/external commonjs2 \"http\"","webpack://@hijraah/web/external commonjs2 \"tty\"","webpack://@hijraah/web/external commonjs2 \"async_hooks\"","webpack://@hijraah/web/?472f","webpack://@hijraah/web/external module \"ai\"","webpack://@hijraah/web/../../src/client/set-attributes-from-props.ts","webpack://@hijraah/web/?1e0d","webpack://@hijraah/web/external node-commonjs \"node:inspector\"","webpack://@hijraah/web/./src/_core/chat/entities/chat.ts","webpack://@hijraah/web/./src/app/global-error.tsx","webpack://@hijraah/web/./src/types/domain-mappings.ts","webpack://@hijraah/web/./src/app/error.tsx","webpack://@hijraah/web/./src/_infrastructure/repositories/base-repository.ts","webpack://@hijraah/web/../../../src/icons/info.ts","webpack://@hijraah/web/src/app/(ai-unified)/layout.tsx","webpack://@hijraah/web/?7236","webpack://@hijraah/web/?a593","webpack://@hijraah/web/external commonjs2 \"net\"","webpack://@hijraah/web/./src/components/ui/progress.tsx","webpack://@hijraah/web/../../../src/icons/book-open.ts","webpack://@hijraah/web/?e7fd","webpack://@hijraah/web/external commonjs2 \"events\"","webpack://@hijraah/web/../../node_modules/.pnpm/require-in-the-middle@7.5.2/node_modules/require-in-the-middle/ sync","webpack://@hijraah/web/?c91d","webpack://@hijraah/web/src/app/(ai-unified)/chat/[id]/page.tsx","webpack://@hijraah/web/../../src/client/script.tsx"],"sourcesContent":["export const requestIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.requestIdleCallback &&\n    self.requestIdleCallback.bind(window)) ||\n  function (cb: IdleRequestCallback): number {\n    let start = Date.now()\n    return self.setTimeout(function () {\n      cb({\n        didTimeout: false,\n        timeRemaining: function () {\n          return Math.max(0, 50 - (Date.now() - start))\n        },\n      })\n    }, 1)\n  }\n\nexport const cancelIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.cancelIdleCallback &&\n    self.cancelIdleCallback.bind(window)) ||\n  function (id: number) {\n    return clearTimeout(id)\n  }\n","module.exports = require(\"node:process\");","module.exports = require(\"next/dist/server/app-render/after-task-async-storage.external.js\");","module.exports = require(\"module\");","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 8963;\nmodule.exports = webpackEmptyContext;","module.exports = require(\"next/dist/compiled/next-server/app-page.runtime.prod.js\");","module.exports = require(\"punycode\");","'use client'\r\n\r\nimport React, { ComponentPropsWithRef } from 'react'\r\n\r\ninterface ScrollAreaProps extends ComponentPropsWithRef<'div'> {\r\n  className?: string\r\n}\r\n\r\nexport const ScrollArea = ({ children, className, ...props }: ScrollAreaProps) => {\r\n  return (\r\n    <div className={`overflow-auto ${className || ''}`} {...props}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ScrollArea ","/**\r\n * Auth module facade - redirects to the proper Supabase auth implementation\r\n * This file exists to maintain backward compatibility with any code still using the old path.\r\n */\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nimport {\r\n  getAuthUser,\r\n  getAuthUserOrRedirect,\r\n  createServerClient,\r\n  getUser as getAuthUserFromServer,\r\n} from \"./auth/index\";\r\n\r\nimport {\r\n  getSession,\r\n  getCurrentUser,\r\n  isAuthenticated,\r\n  signOut,\r\n  protect,\r\n  protectRole,\r\n  protectAdmin,\r\n} from \"./auth/actions\";\r\n\r\nimport { AuthError } from \"./auth/errors\";\r\nimport { useAuth, useUser, useIsAuthenticated, useHasRole } from \"./auth/hooks\";\r\nimport { createExtendedUser } from \"@/types/auth\";\r\n\r\n/**\r\n * Get the current authenticated user on the server\r\n * @returns The current user's session or null if not authenticated\r\n */\r\nexport async function auth() {\r\n  const result = await getAuthUser();\r\n  return result.session;\r\n}\r\n\r\n/**\r\n * Get the current user on the server\r\n * @returns The current user or null if not authenticated\r\n */\r\nexport const getUser = async () => {\r\n  return getAuthUserFromServer();\r\n};\r\n\r\n/**\r\n * Check if the current user is authenticated\r\n * @returns True if the user is authenticated, false otherwise\r\n */\r\nexport { isAuthenticated };\r\n\r\n/**\r\n * Securely get the authenticated session by first verifying the user\r\n * This is the recommended approach to avoid security issues with direct session access\r\n * @returns The authenticated session or null if not authenticated\r\n */\r\nexport async function getAuthenticatedSession() {\r\n  const result = await getAuthUser();\r\n  return result.session;\r\n}\r\n\r\n/**\r\n * Get the server user\r\n */\r\nexport async function getServerUser() {\r\n  try {\r\n    const { user } = await getAuthUser();\r\n    return { user, error: null };\r\n  } catch (error) {\r\n    return { user: null, error };\r\n  }\r\n}\r\n\r\n/**\r\n * Get the server session\r\n */\r\nexport async function getServerSession() {\r\n  try {\r\n    const { user } = await getAuthUser();\r\n    return { session: user ? { user } : null, error: null };\r\n  } catch (error) {\r\n    return { session: null, error };\r\n  }\r\n}\r\n\r\n// Export main auth functionality from the designated modules\r\nexport {\r\n  getAuthUser,\r\n  getAuthUserOrRedirect,\r\n  createServerClient,\r\n  protect,\r\n  protectRole,\r\n  protectAdmin,\r\n  signOut,\r\n  useAuth,\r\n  useUser,\r\n  useIsAuthenticated,\r\n  useHasRole,\r\n  AuthError,\r\n  createExtendedUser,\r\n};\r\n","/**\r\n * Utility functions for the application\r\n */\r\n\r\nimport { generateId as generateIdFromAI } from \"ai\"; // Renaming import to avoid conflict\r\nimport { genSaltSync, hashSync } from \"bcrypt-ts\";\r\nimport { type ClassValue, clsx } from \"clsx\";\r\nimport { customAlphabet } from \"nanoid\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\n/**\r\n * Utility function to merge Tailwind CSS classes with clsx conditionals\r\n * @param inputs - Class values to merge\r\n * @returns Merged class string\r\n */\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\n/**\r\n * Generates a unique ID of a specified length\r\n * @param length - Length of the ID to generate (default is 16)\r\n * @returns Generated ID\r\n */\r\nexport function generateId(length: number = 16) {\r\n  return customAlphabet(\r\n    \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",\r\n    length\r\n  )();\r\n}\r\n\r\n/**\r\n * Generates a UUID\r\n * @returns Generated UUID\r\n */\r\nexport function generateUUID(): string {\r\n  if (typeof crypto !== \"undefined\" && crypto.randomUUID) {\r\n    return crypto.randomUUID();\r\n  }\r\n  // Fallback for environments where crypto.randomUUID is not available (e.g., older Node.js versions in certain contexts)\r\n  // This is a simple v4 UUID implementation, not cryptographically secure for all uses but sufficient for unique IDs.\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\r\n    const r = (Math.random() * 16) | 0;\r\n    const v = c === \"x\" ? r : (r & 0x3) | 0x8;\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\n/**\r\n * Formats a date into a readable string\r\n * @param date - The date to format\r\n * @returns Formatted date string\r\n */\r\nexport function formatDate(date: Date): string {\r\n  return new Intl.DateTimeFormat(\"en-US\", {\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n    year: \"numeric\",\r\n  }).format(date);\r\n}\r\n\r\n/**\r\n * Truncates a string to a specified length\r\n * @param str - The string to truncate\r\n * @param length - Max length\r\n * @returns Truncated string with ellipsis if needed\r\n */\r\nexport function truncate(str: string, length: number): string {\r\n  if (!str || str.length <= length) return str;\r\n  return `${str.slice(0, length)}...`;\r\n}\r\n\r\n// Function to convert bytes to a readable format (KB, MB, GB)\r\nexport function bytesToSize(bytes: number): string {\r\n  if (bytes === 0) return \"0 Bytes\";\r\n  const k = 1024;\r\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\r\n}\r\n\r\n/**\r\n * Application specific error structure for fetcher\r\n */\r\ninterface ApplicationError extends Error {\r\n  info: string;\r\n  status: number;\r\n}\r\n\r\n/**\r\n * Fetches data from a URL and handles errors.\r\n * @param url - The URL to fetch.\r\n * @returns The JSON response.\r\n * @throws ApplicationError if the fetch fails.\r\n */\r\nexport const fetcher = async (url: string) => {\r\n  const res = await fetch(url);\r\n\r\n  if (!res.ok) {\r\n    const error = new Error(\r\n      \"An error occurred while fetching the data.\"\r\n    ) as ApplicationError;\r\n    // Attempt to parse error info, but don't fail if it's not JSON\r\n    try {\r\n      error.info = await res.json();\r\n    } catch (e) {\r\n      error.info = res.statusText; // Fallback to status text\r\n    }\r\n    error.status = res.status;\r\n    throw error;\r\n  }\r\n  return res.json();\r\n};\r\n\r\n/**\r\n * Retrieves an item from localStorage.\r\n * @param key - The key of the item to retrieve.\r\n * @returns The parsed JSON object or an empty array if not found or in a non-browser environment.\r\n */\r\nexport function getLocalStorage(key: string): any[] | Record<string, any> {\r\n  if (typeof window !== \"undefined\" && window.localStorage) {\r\n    const item = localStorage.getItem(key);\r\n    try {\r\n      return item ? JSON.parse(item) : []; // Default to empty array if null, or parse\r\n    } catch (error) {\r\n      console.error(\r\n        `Error parsing localStorage item with key \"${key}\":`,\r\n        error\r\n      );\r\n      return []; // Return empty array on parsing error\r\n    }\r\n  }\r\n  return []; // Return empty array if not in browser or localStorage not available\r\n}\r\n\r\n/**\r\n * Sanitizes text by removing specific placeholder strings.\r\n * Currently removes \"<has_function_call>\".\r\n * @param text - The input string to sanitize.\r\n * @returns The sanitized string.\r\n */\r\nexport function sanitizeText(text: string): string {\r\n  if (typeof text !== \"string\") return \"\";\r\n  return text.replace(/<has_function_call>/g, \"\");\r\n}\r\n\r\n/**\r\n * Sanitizes UI messages by cleaning their content.\r\n * Used to process messages before displaying them in the UI.\r\n * @param messages - Array of UI/Chat messages to sanitize\r\n * @returns The sanitized messages array\r\n */\r\nexport function sanitizeUIMessages<T extends { content: string }>(\r\n  messages: T[]\r\n): T[] {\r\n  return messages.map((message) => ({\r\n    ...message,\r\n    content: sanitizeText(message.content),\r\n  }));\r\n}\r\n\r\nexport function generateHashedPassword(password: string): string {\r\n  const salt = genSaltSync(10);\r\n  const hash = hashSync(password, salt);\r\n\r\n  return hash;\r\n}\r\n\r\nexport function generateDummyPassword(): string {\r\n  const password = generateIdFromAI(12); // Using the renamed import\r\n  const hashedPassword = generateHashedPassword(password);\r\n\r\n  return hashedPassword;\r\n}\r\n","module.exports = require(\"next/dist/server/app-render/action-async-storage.external.js\");","module.exports = require(\"process\");","/**\r\n * This file is a stub that re-exports the ChatRepository from its proper location.\r\n * This ensures backward compatibility with components that import it from this location.\r\n */\r\n\r\nimport { Chat } from \"@/_core/chat/entities/chat\";\r\nimport { SupabaseClient } from \"@supabase/supabase-js\";\r\nimport { Database } from \"@/types/database.types\";\r\nimport { BaseRepository, RepositoryOptions } from \"./base-repository\";\r\nimport { toSnakeCase } from \"@/lib/utils/case-converter\";\r\nimport { createSupabaseServiceClient } from \"@/lib/supabase/client\";\r\nimport {\r\n  DomainMapper,\r\n  DBChatSessionRow,\r\n  DBChatMessageRow,\r\n  ChatSessionDomain,\r\n  ChatMessageDomain,\r\n} from \"@/types/domain-mappings\";\r\n\r\n// Use Supabase generated types for DB operations\r\nexport type DBChatSessionInsert =\r\n  Database[\"public\"][\"Tables\"][\"chat_sessions\"][\"Insert\"];\r\nexport type DBChatMessageInsert =\r\n  Database[\"public\"][\"Tables\"][\"chat_messages\"][\"Insert\"];\r\nexport type DBChatAttachmentRow =\r\n  Database[\"public\"][\"Tables\"][\"chat_attachments\"][\"Row\"];\r\n\r\n/**\r\n * ChatRepository provides data access operations for chats\r\n */\r\nexport class ChatRepository extends BaseRepository<\r\n  DBChatSessionRow,\r\n  string,\r\n  \"chat_sessions\"\r\n> {\r\n  constructor(options: RepositoryOptions = {}) {\r\n    super(\"chat_sessions\", options);\r\n  }\r\n\r\n  /**\r\n   * Get a single chat by its ID, and return a domain entity\r\n   * This overrides the base method to return a Chat entity\r\n   */\r\n  async getChatById(id: string): Promise<Chat | null> {\r\n    const record = await super.getById(id);\r\n    if (!record) return null;\r\n    return this.toChatEntity(record);\r\n  }\r\n\r\n  /**\r\n   * Base repository compatibility - returns raw database record\r\n   */\r\n  async getById(id: string): Promise<DBChatSessionRow | null> {\r\n    return await super.getById(id);\r\n  }\r\n\r\n  /**\r\n   * Get all chats for a user\r\n   */\r\n  async getByUserId(\r\n    userId: string,\r\n    options?: {\r\n      limit?: number;\r\n      offset?: number;\r\n      orderBy?: string;\r\n      case_id?: string;\r\n      withMessages?: boolean;\r\n    }\r\n  ): Promise<DBChatSessionRow[]> {\r\n    const client = await this.getClient();\r\n\r\n    let query = client.from(\"chat_sessions\").select(\"*\").eq(\"user_id\", userId);\r\n\r\n    // Filter by case if specified\r\n    if (options?.case_id) {\r\n      query = query.eq(\"case_id\", options.case_id);\r\n    }\r\n\r\n    // Apply ordering with field name mapping\r\n    if (options?.orderBy) {\r\n      const [field, direction] = options.orderBy.split(\":\");\r\n\r\n      // Map camelCase field names to snake_case database column names\r\n      const fieldMapping: Record<string, string> = {\r\n        createdAt: \"created_at\",\r\n        updatedAt: \"updated_at\",\r\n        lastMessageAt: \"last_message_at\",\r\n        userId: \"user_id\",\r\n        caseId: \"case_id\",\r\n        systemPrompt: \"system_prompt\",\r\n        agentConfig: \"agent_config\",\r\n      };\r\n\r\n      const dbField = fieldMapping[field] || field;\r\n      query = query.order(dbField, { ascending: direction !== \"desc\" });\r\n    } else {\r\n      query = query.order(\"last_message_at\", { ascending: false });\r\n    }\r\n\r\n    // Apply pagination\r\n    if (options?.limit) {\r\n      query = query.limit(options.limit);\r\n    }\r\n\r\n    if (options?.offset) {\r\n      query = query.range(\r\n        options.offset,\r\n        options.offset + (options.limit || 10) - 1\r\n      );\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n      console.error(\"Error fetching chats by user ID:\", error);\r\n      throw new Error(`Failed to fetch chats: ${error.message}`);\r\n    }\r\n\r\n    return data || [];\r\n  }\r\n\r\n  /**\r\n   * Get messages for a chat session\r\n   */\r\n  async getMessages(chatId: string): Promise<DBChatMessageRow[]> {\r\n    const client = await this.getClient();\r\n\r\n    const { data: messages, error } = await client\r\n      .from(\"chat_messages\")\r\n      .select(\"*\")\r\n      .eq(\"session_id\", chatId)\r\n      .order(\"created_at\", { ascending: true });\r\n\r\n    if (error) {\r\n      console.error(\"Error fetching chat messages:\", error);\r\n      throw new Error(`Failed to fetch chat messages: ${error.message}`);\r\n    }\r\n\r\n    return messages || [];\r\n  }\r\n\r\n  /**\r\n   * Get chat with messages and attachments\r\n   */\r\n  async getWithDetails(chatId: string): Promise<{\r\n    chat: DBChatSessionRow;\r\n    messages: DBChatMessageRow[];\r\n    attachments: DBChatAttachmentRow[];\r\n  } | null> {\r\n    const client = await this.getClient();\r\n\r\n    // Fetch chat\r\n    const { data: chat, error: chatError } = await client\r\n      .from(\"chat_sessions\")\r\n      .select(\"*\")\r\n      .eq(\"id\", chatId)\r\n      .single();\r\n\r\n    if (chatError || !chat) {\r\n      if (chatError && chatError.code === \"PGRST116\") return null; // Record not found\r\n      console.error(\"Error fetching chat:\", chatError);\r\n      return null;\r\n    }\r\n\r\n    // Fetch messages\r\n    const { data: messages, error: messagesError } = await client\r\n      .from(\"chat_messages\")\r\n      .select(\"*\")\r\n      .eq(\"session_id\", chatId)\r\n      .order(\"created_at\", { ascending: true });\r\n\r\n    if (messagesError) {\r\n      console.error(\"Error fetching chat messages:\", messagesError);\r\n      throw new Error(\r\n        `Failed to fetch chat messages: ${messagesError.message}`\r\n      );\r\n    }\r\n\r\n    // Get message IDs to fetch attachments\r\n    const messageIds = (messages || []).map((m) => m.id);\r\n\r\n    // Fetch attachments if there are messages\r\n    let attachments: DBChatAttachmentRow[] = [];\r\n    if (messageIds.length > 0) {\r\n      const { data: attachmentData, error: attachmentsError } = await client\r\n        .from(\"chat_attachments\")\r\n        .select(\"*\")\r\n        .in(\"message_id\", messageIds);\r\n\r\n      if (attachmentsError) {\r\n        console.error(\"Error fetching chat attachments:\", attachmentsError);\r\n        throw new Error(\r\n          `Failed to fetch chat attachments: ${attachmentsError.message}`\r\n        );\r\n      }\r\n\r\n      attachments = attachmentData || [];\r\n    }\r\n\r\n    return {\r\n      chat,\r\n      messages: messages || [],\r\n      attachments,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Add a new message to a chat\r\n   */\r\n  async addMessage(\r\n    chatId: string,\r\n    messageData: Omit<DBChatMessageInsert, \"session_id\">\r\n  ): Promise<DBChatMessageRow> {\r\n    const client = await this.getClient();\r\n\r\n    // Prepare the message data\r\n    const payload: DBChatMessageInsert = {\r\n      ...messageData,\r\n      session_id: chatId,\r\n      created_at: messageData.created_at || new Date().toISOString(),\r\n      updated_at: new Date().toISOString(),\r\n    };\r\n\r\n    const { data, error } = await client\r\n      .from(\"chat_messages\")\r\n      .insert(payload)\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      console.error(\"Error adding chat message:\", error);\r\n      throw new Error(`Failed to add chat message: ${error.message}`);\r\n    }\r\n\r\n    // Update the chat's last_message_at timestamp\r\n    await client\r\n      .from(\"chat_sessions\")\r\n      .update({ last_message_at: new Date().toISOString() })\r\n      .eq(\"id\", chatId);\r\n\r\n    return data;\r\n  }\r\n\r\n  async deleteChat(id: string): Promise<{ success: boolean }> {\r\n    const client = await this.getClient();\r\n\r\n    const { error: messageError } = await client\r\n      .from(\"chat_messages\")\r\n      .delete()\r\n      .eq(\"session_id\", id);\r\n    if (messageError) {\r\n      console.error(\"Error deleting chat messages:\", messageError);\r\n      throw messageError;\r\n    }\r\n\r\n    const { error: sessionError } = await client\r\n      .from(\"chat_sessions\")\r\n      .delete()\r\n      .eq(\"id\", id);\r\n    if (sessionError) {\r\n      console.error(\"Error deleting chat session:\", sessionError);\r\n      throw sessionError;\r\n    }\r\n\r\n    return { success: true };\r\n  }\r\n\r\n  async getMessageCountForUser(userId: string, hours: number): Promise<number> {\r\n    const client = await this.getClient();\r\n    const since = new Date(Date.now() - hours * 60 * 60 * 1000).toISOString();\r\n    const { count, error } = await client\r\n      .from(\"chat_messages\")\r\n      .select(\"*\", { count: \"exact\", head: true })\r\n      .eq(\"user_id\", userId)\r\n      .gte(\"created_at\", since);\r\n\r\n    if (error) {\r\n      console.error(\"Error getting message count for user:\", error);\r\n      throw error;\r\n    }\r\n    return count || 0;\r\n  }\r\n\r\n  async storeStreamId(chatId: string, streamId: string): Promise<void> {\r\n    const client = await this.getClient();\r\n    const { data, error } = await client\r\n      .from(\"chat_sessions\")\r\n      .select(\"context\")\r\n      .eq(\"id\", chatId)\r\n      .single();\r\n\r\n    if (error || !data) {\r\n      console.error(`Chat not found for storing stream ID: ${chatId}`, error);\r\n      return;\r\n    }\r\n\r\n    const context =\r\n      typeof data.context === \"object\" && data.context !== null\r\n        ? (data.context as Record<string, any>)\r\n        : {};\r\n    const streamIds = Array.isArray(context.streamIds) ? context.streamIds : [];\r\n    if (!streamIds.includes(streamId)) {\r\n      streamIds.push(streamId);\r\n    }\r\n    context.streamIds = streamIds;\r\n\r\n    const { error: updateError } = await client\r\n      .from(\"chat_sessions\")\r\n      .update({ context: context as any })\r\n      .eq(\"id\", chatId);\r\n\r\n    if (updateError) {\r\n      console.error(`Error storing stream ID for chat ${chatId}:`, updateError);\r\n    }\r\n  }\r\n\r\n  async getStreamIdsForChat(chatId: string): Promise<string[]> {\r\n    const client = await this.getClient();\r\n    const { data, error } = await client\r\n      .from(\"chat_sessions\")\r\n      .select(\"context\")\r\n      .eq(\"id\", chatId)\r\n      .single();\r\n\r\n    if (error || !data) {\r\n      console.error(`Chat not found for getting stream IDs: ${chatId}`, error);\r\n      return [];\r\n    }\r\n    const context =\r\n      typeof data.context === \"object\" && data.context !== null\r\n        ? (data.context as Record<string, any>)\r\n        : {};\r\n    return context?.streamIds || [];\r\n  }\r\n\r\n  async deleteStreamIdsForChat(chatId: string): Promise<void> {\r\n    const client = await this.getClient();\r\n    const { data, error } = await client\r\n      .from(\"chat_sessions\")\r\n      .select(\"context\")\r\n      .eq(\"id\", chatId)\r\n      .single();\r\n\r\n    if (error || !data) {\r\n      console.error(`Chat not found for deleting stream IDs: ${chatId}`, error);\r\n      return;\r\n    }\r\n\r\n    const context =\r\n      typeof data.context === \"object\" && data.context !== null\r\n        ? (data.context as Record<string, any>)\r\n        : {};\r\n    if (context.streamIds) {\r\n      delete context.streamIds;\r\n      const { error: updateError } = await client\r\n        .from(\"chat_sessions\")\r\n        .update({ context: context as any })\r\n        .eq(\"id\", chatId);\r\n\r\n      if (updateError) {\r\n        console.error(\r\n          `Error deleting stream IDs for chat ${chatId}:`,\r\n          updateError\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert database record to domain entity\r\n   */\r\n  toDomainEntity(record: DBChatSessionRow): DBChatSessionRow {\r\n    // For compatibility with the BaseRepository's typing\r\n    return record;\r\n  }\r\n\r\n  /**\r\n   * Get domain entity from database record (chat model)\r\n   */\r\n  toChatEntity(record: DBChatSessionRow): Chat {\r\n    return Chat.fromDatabase(record);\r\n  }\r\n\r\n  /**\r\n   * Convert database record to domain mapping format\r\n   */\r\n  toChatSessionDomain(record: DBChatSessionRow): ChatSessionDomain {\r\n    return DomainMapper.toChatSessionDomain(record);\r\n  }\r\n\r\n  /**\r\n   * Prepare domain entity for database storage\r\n   */\r\n  fromDomainEntity(entity: Chat): Partial<DBChatSessionRow> {\r\n    const entityObject = entity.toObject();\r\n    const snakeCaseObject = toSnakeCase(\r\n      entityObject\r\n    ) as Partial<DBChatSessionRow>;\r\n    return snakeCaseObject;\r\n  }\r\n\r\n  /**\r\n   * Prepare chat session domain entity for database storage\r\n   */\r\n  fromChatSessionDomain(domain: ChatSessionDomain): Partial<DBChatSessionRow> {\r\n    return DomainMapper.fromChatSessionDomain(domain);\r\n  }\r\n\r\n  /**\r\n   * Map domain entity to database record (alias for fromDomainEntity)\r\n   */\r\n  fromDomainEntityToDbRecord(entity: Chat): Partial<DBChatSessionRow> {\r\n    return this.fromDomainEntity(entity);\r\n  }\r\n\r\n  /**\r\n   * Map database record to domain entity\r\n   */\r\n  mapRecordToDomain(record: DBChatSessionRow): Chat {\r\n    return this.toChatEntity(record);\r\n  }\r\n}\r\n","import(/* webpackMode: \"eager\", webpackExports: [\"AppSidebar\"] */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\components\\\\ui\\\\app-sidebar.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"SidebarProvider\",\"SidebarInset\"] */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\components\\\\ui\\\\sidebar.tsx\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\lib\\\\auth\\\\hooks.tsx\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\script.js\");\n","module.exports = require(\"os\");","import \"@/globals.css\";\r\n// import \"@fontsource/noto-sans-arabic/400.css\";\r\n// import \"@fontsource/noto-sans-arabic/500.css\";\r\n// import \"@fontsource/noto-sans-arabic/600.css\";\r\n// import \"@fontsource/noto-sans-arabic/700.css\";\r\nimport { StagewiseToolbar } from \"@stagewise/toolbar-next\";\r\nimport { Analytics } from \"@vercel/analytics/react\";\r\nimport { SpeedInsights } from \"@vercel/speed-insights/next\";\r\n\r\n// Removed getMessages and font imports, as these are handled in [locale]/layout.tsx\r\n// Removed cn utility as it's not used here anymore\r\n\r\nimport type { Metadata, Viewport } from \"next\";\r\n\r\n// This is the root layout - middleware handles locale redirects\r\n// All the actual UI is in [locale]/layout.tsx\r\n\r\nexport const metadata: Metadata = {\r\n  title: {\r\n    default: \"Hijraah - Navigate Your Immigration Journey\",\r\n    template: \"%s | Hijraah\",\r\n  },\r\n  metadataBase: new URL(\"https://hijraah.vercel.app\"),\r\n  description:\r\n    \"Navigate your immigration journey with AI guidance - Compare immigration policies across countries with intelligent insights\",\r\n  keywords: [\r\n    \"immigration\",\r\n    \"visa\",\r\n    \"comparison\",\r\n    \"countries\",\r\n    \"policies\",\r\n    \"AI guidance\",\r\n    \"immigration journey\",\r\n  ],\r\n  authors: [{ name: \"Hijraah Team\" }],\r\n  creator: \"Hijraah\",\r\n  icons: {\r\n    icon: \"/Hijraah_logo.png\",\r\n    apple: \"/Hijraah_logo.png\",\r\n  },\r\n  openGraph: {\r\n    type: \"website\",\r\n    locale: \"en_US\",\r\n    url: \"https://hijraah.vercel.app\",\r\n    title: \"Hijraah - Immigration Comparison\",\r\n    description:\r\n      \"Compare immigration policies across countries with AI-powered insights\",\r\n    siteName: \"Hijraah\",\r\n    images: [\r\n      {\r\n        url: \"/Hijraah_logo.png\",\r\n        width: 800,\r\n        height: 800,\r\n        alt: \"Hijraah Logo\",\r\n      },\r\n    ],\r\n  },\r\n  twitter: {\r\n    card: \"summary_large_image\",\r\n    title: \"Hijraah - Immigration Comparison\",\r\n    description:\r\n      \"Compare immigration policies across countries with AI-powered insights\",\r\n    creator: \"@hijraah\",\r\n    images: [\"/Hijraah_logo.png\"],\r\n  },\r\n  robots: {\r\n    index: true,\r\n    follow: true,\r\n  },\r\n};\r\n\r\nexport const viewport: Viewport = {\r\n  themeColor: [\r\n    { media: \"(prefers-color-scheme: light)\", color: \"white\" },\r\n    { media: \"(prefers-color-scheme: dark)\", color: \"#18181b\" },\r\n  ],\r\n  width: \"device-width\",\r\n  initialScale: 1,\r\n};\r\n\r\nexport const dynamic = \"force-dynamic\";\r\nexport const maxDuration = 60;\r\n\r\nexport default function RootLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  // The getMessages() call and font classNames were incorrect here and have been removed.\r\n  // They are correctly handled in [locale]/layout.tsx.\r\n  const stagewiseConfig = { plugins: [] }; // Define config for StagewiseToolbar\r\n\r\n  return (\r\n    <>\r\n      {children}\r\n      <Analytics />\r\n      <SpeedInsights />\r\n      {/* Render StagewiseToolbar conditionally if config exists */}\r\n      {stagewiseConfig && <StagewiseToolbar config={stagewiseConfig} />}\r\n    </>\r\n  );\r\n}\r\n","import * as origModule from 'next/dist/server/app-render/work-unit-async-storage.external.js';\nimport * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nimport * as Sentry from '@sentry/nextjs';\n\n// @ts-expect-error Because we cannot be sure if the RequestAsyncStorage module exists (it is not part of the Next.js public\n// API) we use a shim if it doesn't exist. The logic for this is in the wrapping loader.\n\nconst asyncStorageModule = { ...origModule } ;\n\nconst requestAsyncStorage =\n  'workUnitAsyncStorage' in asyncStorageModule\n    ? asyncStorageModule.workUnitAsyncStorage\n    : 'requestAsyncStorage' in asyncStorageModule\n      ? asyncStorageModule.requestAsyncStorage\n      : undefined;\n\nconst serverComponent = serverComponentModule.default;\n\nlet wrappedServerComponent;\nif (typeof serverComponent === 'function') {\n  // For some odd Next.js magic reason, `headers()` will not work if used inside `wrapServerComponentsWithSentry`.\n  // Current assumption is that Next.js applies some loader magic to userfiles, but not files in node_modules. This file\n  // is technically a userfile so it gets the loader magic applied.\n  wrappedServerComponent = new Proxy(serverComponent, {\n    apply: (originalFunction, thisArg, args) => {\n      let sentryTraceHeader = undefined;\n      let baggageHeader = undefined;\n      let headers = undefined;\n\n      // We try-catch here just in `requestAsyncStorage` is undefined since it may not be defined\n      try {\n        const requestAsyncStore = requestAsyncStorage?.getStore() ;\n        sentryTraceHeader = requestAsyncStore?.headers.get('sentry-trace') ?? undefined;\n        baggageHeader = requestAsyncStore?.headers.get('baggage') ?? undefined;\n        headers = requestAsyncStore?.headers;\n      } catch (e) {\n        /** empty */\n      }\n\n      return Sentry.wrapServerComponentWithSentry(originalFunction, {\n        componentRoute: '/',\n        componentType: 'Layout',\n        sentryTraceHeader,\n        baggageHeader,\n        headers,\n      }).apply(thisArg, args);\n    },\n  });\n} else {\n  wrappedServerComponent = serverComponent;\n}\n\nconst generateMetadata = serverComponentModule.generateMetadata\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateMetadata, {\n      componentRoute: '/',\n      componentType: 'Layout',\n      generationFunctionIdentifier: 'generateMetadata',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst generateImageMetadata = serverComponentModule.generateImageMetadata\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateImageMetadata, {\n      componentRoute: '/',\n      componentType: 'Layout',\n      generationFunctionIdentifier: 'generateImageMetadata',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst generateViewport = serverComponentModule.generateViewport\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateViewport, {\n      componentRoute: '/',\n      componentType: 'Layout',\n      generationFunctionIdentifier: 'generateViewport',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst wrappedServerComponent$1 = wrappedServerComponent;\n\nexport { wrappedServerComponent$1 as default, generateImageMetadata, generateMetadata, generateViewport };\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 26564;\nmodule.exports = webpackEmptyContext;","module.exports = require(\"stream\");","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\global-error.tsx\");\n","import(/* webpackMode: \"eager\", webpackExports: [\"StagewiseToolbar\"] */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\@stagewise+toolbar-next@0.1_ddd781b6b326c600c1955708a1945bbb\\\\node_modules\\\\@stagewise\\\\toolbar-next\\\\dist\\\\index.js\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"Analytics\"] */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\@vercel+analytics@1.5.0_nex_c9ecab91375e0c29fa3860d2f538ce7c\\\\node_modules\\\\@vercel\\\\analytics\\\\dist\\\\react\\\\index.mjs\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"SpeedInsights\"] */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\@vercel+speed-insights@1.2._a772f3e81ab5047debce92984e03a3d5\\\\node_modules\\\\@vercel\\\\speed-insights\\\\dist\\\\next\\\\index.mjs\");\n","module.exports = require(\"util\");","import { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n","module.exports = require(\"fs\");","module.exports = require(\"next/dist/server/app-render/work-async-storage.external.js\");","module.exports = require(\"node:child_process\");","module.exports = require(\"path\");","module.exports = require(\"tls\");","module.exports = require(\"diagnostics_channel\");","module.exports = require(\"node:http\");","module.exports = require(\"node:zlib\");","module.exports = require(\"node:tls\");","export { default } from '../client/script';\nexport * from '../client/script';\n\n//# sourceMappingURL=script.js.map","import { cva, type VariantProps } from \"class-variance-authority\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-background text-foreground\",\r\n        destructive:\r\n          \"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Alert({\r\n  className,\r\n  variant,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & VariantProps<typeof alertVariants>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert\"\r\n      role=\"alert\"\r\n      className={cn(alertVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-title\"\r\n      className={cn(\r\n        \"col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-description\"\r\n      className={cn(\r\n        \"text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n","module.exports = require(\"node:https\");","export * from \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\lodash\\\\lodash.js\"","import { snakeCase, camelCase } from \"lodash\";\r\n\r\n/**\r\n * Converts an object's keys from camelCase to snake_case recursively\r\n * @param obj The object to convert\r\n * @returns The converted object with snake_case keys\r\n */\r\nexport function toSnakeCase<T>(obj: any): T {\r\n  if (Array.isArray(obj)) {\r\n    return obj.map((v) => toSnakeCase(v)) as any;\r\n  }\r\n  if (obj instanceof Date) {\r\n    return obj as any;\r\n  }\r\n  if (typeof obj === \"object\" && obj !== null) {\r\n    const result = Object.keys(obj).reduce(\r\n      (result, key) => ({\r\n        ...result,\r\n        [snakeCase(key)]: toSnakeCase(obj[key]),\r\n      }),\r\n      {} as T\r\n    );\r\n    return result;\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Converts an object's keys from snake_case to camelCase recursively\r\n * @param obj The object to convert\r\n * @returns The converted object with camelCase keys\r\n */\r\nexport function toCamelCase<T>(obj: any): T {\r\n  if (Array.isArray(obj)) {\r\n    return obj.map((v) => toCamelCase(v)) as any;\r\n  }\r\n  if (obj instanceof Date) {\r\n    return obj as any;\r\n  }\r\n  if (typeof obj === \"object\" && obj !== null) {\r\n    const result = Object.keys(obj).reduce(\r\n      (result, key) => ({\r\n        ...result,\r\n        [camelCase(key)]: toCamelCase(obj[key]),\r\n      }),\r\n      {} as T\r\n    );\r\n    return result;\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Type-safe conversion utilities for database <-> domain entity mapping\r\n */\r\nexport const CaseConverter = {\r\n  toSnakeCase,\r\n  toCamelCase,\r\n} as const;\r\n","import { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Badge({\r\n  className,\r\n  variant,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"span\"> &\r\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\r\n  const Comp = asChild ? Slot : \"span\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"badge\"\r\n      className={cn(badgeVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n","module.exports = require(\"node:os\");","import * as React from 'react';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { Primitive } from '@radix-ui/react-primitive';\n\nimport type { Scope } from '@radix-ui/react-context';\n\n/* -------------------------------------------------------------------------------------------------\n * Progress\n * -----------------------------------------------------------------------------------------------*/\n\nconst PROGRESS_NAME = 'Progress';\nconst DEFAULT_MAX = 100;\n\ntype ScopedProps<P> = P & { __scopeProgress?: Scope };\nconst [createProgressContext, createProgressScope] = createContextScope(PROGRESS_NAME);\n\ntype ProgressState = 'indeterminate' | 'complete' | 'loading';\ntype ProgressContextValue = { value: number | null; max: number };\nconst [ProgressProvider, useProgressContext] =\n  createProgressContext<ProgressContextValue>(PROGRESS_NAME);\n\ntype ProgressElement = React.ComponentRef<typeof Primitive.div>;\ntype PrimitiveDivProps = React.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface ProgressProps extends PrimitiveDivProps {\n  value?: number | null | undefined;\n  max?: number;\n  getValueLabel?(value: number, max: number): string;\n}\n\nconst Progress = React.forwardRef<ProgressElement, ProgressProps>(\n  (props: ScopedProps<ProgressProps>, forwardedRef) => {\n    const {\n      __scopeProgress,\n      value: valueProp = null,\n      max: maxProp,\n      getValueLabel = defaultGetValueLabel,\n      ...progressProps\n    } = props;\n\n    if ((maxProp || maxProp === 0) && !isValidMaxNumber(maxProp)) {\n      console.error(getInvalidMaxError(`${maxProp}`, 'Progress'));\n    }\n\n    const max = isValidMaxNumber(maxProp) ? maxProp : DEFAULT_MAX;\n\n    if (valueProp !== null && !isValidValueNumber(valueProp, max)) {\n      console.error(getInvalidValueError(`${valueProp}`, 'Progress'));\n    }\n\n    const value = isValidValueNumber(valueProp, max) ? valueProp : null;\n    const valueLabel = isNumber(value) ? getValueLabel(value, max) : undefined;\n\n    return (\n      <ProgressProvider scope={__scopeProgress} value={value} max={max}>\n        <Primitive.div\n          aria-valuemax={max}\n          aria-valuemin={0}\n          aria-valuenow={isNumber(value) ? value : undefined}\n          aria-valuetext={valueLabel}\n          role=\"progressbar\"\n          data-state={getProgressState(value, max)}\n          data-value={value ?? undefined}\n          data-max={max}\n          {...progressProps}\n          ref={forwardedRef}\n        />\n      </ProgressProvider>\n    );\n  }\n);\n\nProgress.displayName = PROGRESS_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * ProgressIndicator\n * -----------------------------------------------------------------------------------------------*/\n\nconst INDICATOR_NAME = 'ProgressIndicator';\n\ntype ProgressIndicatorElement = React.ComponentRef<typeof Primitive.div>;\ninterface ProgressIndicatorProps extends PrimitiveDivProps {}\n\nconst ProgressIndicator = React.forwardRef<ProgressIndicatorElement, ProgressIndicatorProps>(\n  (props: ScopedProps<ProgressIndicatorProps>, forwardedRef) => {\n    const { __scopeProgress, ...indicatorProps } = props;\n    const context = useProgressContext(INDICATOR_NAME, __scopeProgress);\n    return (\n      <Primitive.div\n        data-state={getProgressState(context.value, context.max)}\n        data-value={context.value ?? undefined}\n        data-max={context.max}\n        {...indicatorProps}\n        ref={forwardedRef}\n      />\n    );\n  }\n);\n\nProgressIndicator.displayName = INDICATOR_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\nfunction defaultGetValueLabel(value: number, max: number) {\n  return `${Math.round((value / max) * 100)}%`;\n}\n\nfunction getProgressState(value: number | undefined | null, maxValue: number): ProgressState {\n  return value == null ? 'indeterminate' : value === maxValue ? 'complete' : 'loading';\n}\n\nfunction isNumber(value: any): value is number {\n  return typeof value === 'number';\n}\n\nfunction isValidMaxNumber(max: any): max is number {\n  // prettier-ignore\n  return (\n    isNumber(max) &&\n    !isNaN(max) &&\n    max > 0\n  );\n}\n\nfunction isValidValueNumber(value: any, max: number): value is number {\n  // prettier-ignore\n  return (\n    isNumber(value) &&\n    !isNaN(value) &&\n    value <= max &&\n    value >= 0\n  );\n}\n\n// Split this out for clearer readability of the error message.\nfunction getInvalidMaxError(propValue: string, componentName: string) {\n  return `Invalid prop \\`max\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. Only numbers greater than 0 are valid max values. Defaulting to \\`${DEFAULT_MAX}\\`.`;\n}\n\nfunction getInvalidValueError(propValue: string, componentName: string) {\n  return `Invalid prop \\`value\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. The \\`value\\` prop must be:\n  - a positive number\n  - less than the value passed to \\`max\\` (or ${DEFAULT_MAX} if no \\`max\\` prop is set)\n  - \\`null\\` or \\`undefined\\` if the progress is indeterminate.\n\nDefaulting to \\`null\\`.`;\n}\n\nconst Root = Progress;\nconst Indicator = ProgressIndicator;\n\nexport {\n  createProgressScope,\n  //\n  Progress,\n  ProgressIndicator,\n  //\n  Root,\n  Indicator,\n};\nexport type { ProgressProps, ProgressIndicatorProps };\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Users\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8cGF0aCBkPSJNMjIgMjF2LTJhNCA0IDAgMCAwLTMtMy44NyIgLz4KICA8cGF0aCBkPSJNMTYgMy4xM2E0IDQgMCAwIDEgMCA3Ljc1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/users\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Users = createLucideIcon('Users', [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['path', { d: 'M22 21v-2a4 4 0 0 0-3-3.87', key: 'kshegd' }],\n  ['path', { d: 'M16 3.13a4 4 0 0 1 0 7.75', key: '1da9ce' }],\n]);\n\nexport default Users;\n","module.exports = require(\"node:diagnostics_channel\");","module.exports = require(\"crypto\");","module.exports = require(\"https\");","\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect } from \"react\";\r\n\r\nimport { defaultLocale } from \"@/i18n/i18n\";\r\n\r\nexport default function RootNotFound() {\r\n  const router = useRouter();\r\n\r\n  // Redirect to the default locale home page\r\n  useEffect(() => {\r\n    router.replace(`/${defaultLocale}`);\r\n  }, [router]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-screen py-2\">\r\n      <h1 className=\"text-4xl font-bold\">Page Not Found</h1>\r\n      <p className=\"mt-3 text-xl\">Redirecting to home page...</p>\r\n    </div>\r\n  );\r\n}\r\n","module.exports = require(\"node:stream\");","module.exports = require(\"node:util\");","/**\r\n * List of supported locales\r\n */\r\nexport const locales = ['en', 'ar', 'es', 'fr'] as const;\r\n\r\n/**\r\n * Type representing the supported locales\r\n */\r\nexport type Locale = (typeof locales)[number];\r\n\r\n/**\r\n * Default locale when no preference is detected\r\n */\r\nexport const defaultLocale: Locale = 'en';\r\n\r\n/**\r\n * Configuration for each locale\r\n */\r\nexport interface LocaleConfig {\r\n  /** Native name of the language */\r\n  nativeName: string;\r\n  /** English name of the language */\r\n  englishName: string;\r\n  /** Text direction (ltr or rtl) */\r\n  direction: 'ltr' | 'rtl';\r\n  /** Date format pattern */\r\n  dateFormat: string;\r\n  /** Flag emoji or code for the language */\r\n  flag: string;\r\n  /** HTML lang attribute value */\r\n  htmlLang: string;\r\n  /** Number formatting options */\r\n  number: {\r\n    /** Decimal separator */\r\n    decimal: string;\r\n    /** Thousands separator */\r\n    thousands: string;\r\n  };\r\n  /** Calendar system */\r\n  calendar?: 'gregory' | 'islamic';\r\n  /** Font class for language-specific typography */\r\n  fontClass?: string;\r\n}\r\n\r\n/**\r\n * Configuration for all supported locales\r\n */\r\nexport const localeConfigs: Record<Locale, LocaleConfig> = {\r\n  en: {\r\n    nativeName: 'English',\r\n    englishName: 'English',\r\n    direction: 'ltr',\r\n    dateFormat: 'MM/DD/YYYY',\r\n    flag: '',\r\n    htmlLang: 'en',\r\n    calendar: 'gregory',\r\n    number: {\r\n      decimal: '.',\r\n      thousands: ',',\r\n    }\r\n  },\r\n  ar: {\r\n    nativeName: '',\r\n    englishName: 'Arabic',\r\n    direction: 'rtl',\r\n    dateFormat: 'DD/MM/YYYY',\r\n    flag: '',\r\n    htmlLang: 'ar',\r\n    calendar: 'islamic',\r\n    fontClass: 'font-arabic',\r\n    number: {\r\n      decimal: '',\r\n      thousands: '',\r\n    }\r\n  },\r\n  fr: {\r\n    nativeName: 'Franais',\r\n    englishName: 'French',\r\n    direction: 'ltr',\r\n    dateFormat: 'DD/MM/YYYY',\r\n    flag: '',\r\n    htmlLang: 'fr',\r\n    calendar: 'gregory',\r\n    number: {\r\n      decimal: ',',\r\n      thousands: ' ',\r\n    }\r\n  },\r\n  es: {\r\n    nativeName: 'Espaol',\r\n    englishName: 'Spanish',\r\n    direction: 'ltr',\r\n    dateFormat: 'DD/MM/YYYY',\r\n    flag: '',\r\n    htmlLang: 'es',\r\n    calendar: 'gregory',\r\n    number: {\r\n      decimal: ',',\r\n      thousands: '.',\r\n    }\r\n  },\r\n};\r\n\r\n/**\r\n * Get configuration for a specific locale\r\n */\r\nexport function getLocaleConfig(locale: Locale | string): LocaleConfig {\r\n  return localeConfigs[locale as Locale] || localeConfigs[defaultLocale];\r\n}\r\n\r\n/**\r\n * Check if a locale is RTL\r\n */\r\nexport function isRTL(locale: Locale | string): boolean {\r\n  return getLocaleConfig(locale).direction === 'rtl';\r\n}\r\n\r\n/**\r\n * Get font class for a locale\r\n */\r\nexport function getLocaleFont(locale: Locale | string): string | undefined {\r\n  return getLocaleConfig(locale).fontClass;\r\n}\r\n\r\n/**\r\n * Get calendar system for a locale\r\n */\r\nexport function getCalendarSystem(locale: Locale | string): 'gregory' | 'islamic' {\r\n  return getLocaleConfig(locale).calendar || 'gregory';\r\n}\r\n\r\n/**\r\n * Get HTML lang attribute value for a locale\r\n */\r\nexport function getHtmlLang(locale: Locale | string): string {\r\n  return getLocaleConfig(locale).htmlLang;\r\n}\r\n\r\n/**\r\n * Get date format for a locale\r\n */\r\nexport function getDateFormat(locale: Locale | string): string {\r\n  return getLocaleConfig(locale).dateFormat;\r\n}","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNyA4IDEyIDMgNyA4IiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMyIgeTI9IjE1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('Upload', [\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['polyline', { points: '17 8 12 3 7 8', key: 't8dd8p' }],\n  ['line', { x1: '12', x2: '12', y1: '3', y2: '15', key: 'widbto' }],\n]);\n\nexport default Upload;\n","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\error.tsx\");\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name AlertCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/alert-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst AlertCircle = createLucideIcon('AlertCircle', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['line', { x1: '12', x2: '12', y1: '8', y2: '12', key: '1pkeuh' }],\n  ['line', { x1: '12', x2: '12.01', y1: '16', y2: '16', key: '4dfq90' }],\n]);\n\nexport default AlertCircle;\n","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\global-error.tsx\");\n","module.exports = require(\"next/dist/server/app-render/work-unit-async-storage.external.js\");","import(/* webpackMode: \"eager\", webpackExports: [\"UnifiedChatContainer\"] */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\components\\\\ui\\\\unified-chat\\\\UnifiedChatContainer.tsx\");\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Loader2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Loader2 = createLucideIcon('Loader2', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default Loader2;\n","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\error.tsx\");\n","\"use client\";\r\n\r\nimport {\r\n  useFormatter,\r\n  useLocale,\r\n  useNow,\r\n  useTimeZone,\r\n  useTranslations,\r\n} from \"next-intl\";\r\n\r\nimport { getLocaleConfig, Locale } from \"@/i18n/i18n\";\r\n\r\n/**\r\n * Extended hook for i18n utilities combining multiple next-intl hooks\r\n * @returns Various i18n utilities for use in client components\r\n */\r\nexport function useI18n() {\r\n  const locale = useLocale() as Locale;\r\n  const t = useTranslations();\r\n  const format = useFormatter();\r\n  const timeZone = useTimeZone();\r\n  const now = useNow();\r\n\r\n  // Get locale configuration\r\n  const config = getLocaleConfig(locale);\r\n\r\n  // Direction utility\r\n  const direction = config.direction;\r\n  const isRtl = direction === \"rtl\";\r\n\r\n  // Date formatting helper using locale preferences\r\n  const formatDate = (date: Date | number, options?: any) => {\r\n    return format.dateTime(date, options);\r\n  };\r\n\r\n  // Relative time formatting\r\n  const formatRelativeTime = (date: Date | number) => {\r\n    return format.relativeTime(date);\r\n  };\r\n\r\n  // Currency formatting with locale preferences\r\n  const formatCurrency = (value: number, currency = \"USD\") => {\r\n    return format.number(value, {\r\n      style: \"currency\",\r\n      currency,\r\n    } as any);\r\n  };\r\n\r\n  // Number formatting according to locale\r\n  const formatNumber = (value: number, options?: any) => {\r\n    return format.number(value, options);\r\n  };\r\n\r\n  return {\r\n    // Original hooks\r\n    t,\r\n    format,\r\n    locale,\r\n    timeZone,\r\n    now,\r\n\r\n    // Derived utilities\r\n    config,\r\n    direction,\r\n    isRtl,\r\n\r\n    // Helper functions\r\n    formatDate,\r\n    formatRelativeTime,\r\n    formatCurrency,\r\n    formatNumber,\r\n  };\r\n}\r\n\r\n/**\r\n * Hook to access translations for a specific namespace\r\n * @param namespace The translation namespace\r\n * @returns Translation function for the specified namespace\r\n */\r\nexport function useTranslate(namespace: string) {\r\n  return useTranslations(namespace);\r\n}\r\n\r\n/**\r\n * Hook to access global translations (no namespace)\r\n * @returns Translation function for the global namespace\r\n */\r\nexport function useGlobalTranslate() {\r\n  return useTranslations();\r\n}\r\n","module.exports = require(\"node:fs\");","module.exports = require(\"node:url\");","module.exports = require(\"worker_threads\");","\nexport { verifyUserIsAdmin as \"4055c9f9dce3c849928e65e87017b3609674121d00\" } from \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\lib\\\\actions\\\\admin.ts\"\n","module.exports = require(\"zlib\");","import { Metadata } from \"next\";\r\nimport { cookies } from \"next/headers\";\r\nimport Script from \"next/script\";\r\nimport { ReactNode } from \"react\";\r\n\r\nimport { AppSidebar } from \"@/components/ui/app-sidebar\";\r\nimport { SidebarInset, SidebarProvider } from \"@/components/ui/sidebar\";\r\nimport { auth } from \"@/lib/auth\";\r\n\r\n\r\nexport const metadata: Metadata = {\r\n  // Updated title for consolidated structure\r\n  title: \"Unified Chat - Hijraah\",\r\n  description: \"Chat with our AI assistant to get immigration help\",\r\n};\r\n\r\nexport const experimental_ppr = true;\r\n\r\n// Note: Renamed from AIChatLayout to UnifiedChatLayout, now adopting source's structure\r\nexport default async function UnifiedChatLayout({\r\n  children,\r\n}: {\r\n  children: ReactNode;\r\n}) {\r\n  const [session, cookieStore] = await Promise.all([auth(), cookies()]);\r\n  const isCollapsed = cookieStore.get(\"sidebar:state\")?.value !== \"true\";\r\n\r\n  return (\r\n    <>\r\n      <Script\r\n        src=\"https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js\"\r\n        strategy=\"beforeInteractive\"\r\n      />\r\n      <SidebarProvider defaultOpen={!isCollapsed}>\r\n        <AppSidebar />\r\n        <SidebarInset>{children}</SidebarInset>\r\n      </SidebarProvider>\r\n    </>\r\n  );\r\n}\r\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 74619;\nmodule.exports = webpackEmptyContext;","module.exports = require(\"perf_hooks\");","import(/* webpackMode: \"eager\", webpackExports: [\"UnifiedChatContainer\"] */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\components\\\\ui\\\\unified-chat\\\\UnifiedChatContainer.tsx\");\n","module.exports = require(\"node:worker_threads\");","module.exports = require(\"node:path\");","module.exports = require(\"node:net\");","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\client-page.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\client-segment.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\error-boundary.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\http-access-fallback\\\\error-boundary.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\layout-router.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\metadata\\\\async-metadata.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\metadata\\\\metadata-boundary.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\render-from-template-context.js\");\n","module.exports = require(\"node:crypto\");","module.exports = require(\"buffer\");","module.exports = require(\"url\");","module.exports = require(\"child_process\");","module.exports = require(\"node:readline\");","module.exports = require(\"http\");","module.exports = require(\"tty\");","module.exports = require(\"async_hooks\");","import(/* webpackMode: \"eager\", webpackExports: [\"AppSidebar\"] */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\components\\\\ui\\\\app-sidebar.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"SidebarProvider\",\"SidebarInset\"] */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\components\\\\ui\\\\sidebar.tsx\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\lib\\\\auth\\\\hooks.tsx\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\script.js\");\n","module.exports = import(\"ai\");;","const DOMAttributeNames: Record<string, string> = {\n  acceptCharset: 'accept-charset',\n  className: 'class',\n  htmlFor: 'for',\n  httpEquiv: 'http-equiv',\n  noModule: 'noModule',\n}\n\nconst ignoreProps = [\n  'onLoad',\n  'onReady',\n  'dangerouslySetInnerHTML',\n  'children',\n  'onError',\n  'strategy',\n  'stylesheets',\n]\n\nfunction isBooleanScriptAttribute(\n  attr: string\n): attr is 'async' | 'defer' | 'noModule' {\n  return ['async', 'defer', 'noModule'].includes(attr)\n}\n\nexport function setAttributesFromProps(el: HTMLElement, props: object) {\n  for (const [p, value] of Object.entries(props)) {\n    if (!props.hasOwnProperty(p)) continue\n    if (ignoreProps.includes(p)) continue\n\n    // we don't render undefined props to the DOM\n    if (value === undefined) {\n      continue\n    }\n\n    const attr = DOMAttributeNames[p] || p.toLowerCase()\n\n    if (el.tagName === 'SCRIPT' && isBooleanScriptAttribute(attr)) {\n      // Correctly assign boolean script attributes\n      // https://github.com/vercel/next.js/pull/20748\n      ;(el as HTMLScriptElement)[attr] = !!value\n    } else {\n      el.setAttribute(attr, String(value))\n    }\n\n    // Remove falsy non-zero boolean attributes so they are correctly interpreted\n    // (e.g. if we set them to false, this coerces to the string \"false\", which the browser interprets as true)\n    if (\n      value === false ||\n      (el.tagName === 'SCRIPT' &&\n        isBooleanScriptAttribute(attr) &&\n        (!value || value === 'false'))\n    ) {\n      // Call setAttribute before, as we need to set and unset the attribute to override force async:\n      // https://html.spec.whatwg.org/multipage/scripting.html#script-force-async\n      el.setAttribute(attr, '')\n      el.removeAttribute(attr)\n    }\n  }\n}\n","const module0 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\layout.tsx\");\nconst module1 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\error.tsx\");\nconst module2 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\global-error.tsx\");\nconst module3 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\not-found.tsx\");\nconst module4 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/forbidden-error\");\nconst module5 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/unauthorized-error\");\nconst module6 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(ai-unified)\\\\layout.tsx\");\nconst module7 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/forbidden-error\");\nconst module8 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/unauthorized-error\");\nconst module9 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(ai-unified)\\\\chat\\\\layout.tsx\");\nconst page10 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(ai-unified)\\\\chat\\\\[id]\\\\page.tsx\");\nimport { AppPageRouteModule } from \"next/dist/server/route-modules/app-page/module.compiled\" with {\n    'turbopack-transition': 'next-ssr'\n};\nimport { RouteKind } from \"next/dist/server/route-kind\" with {\n    'turbopack-transition': 'next-server-utility'\n};\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        '(ai-unified)',\n        {\n        children: [\n        'chat',\n        {\n        children: [\n        '[id]',\n        {\n        children: ['__PAGE__', {}, {\n          page: [page10, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(ai-unified)\\\\chat\\\\[id]\\\\page.tsx\"],\n          \n        }]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [module9, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(ai-unified)\\\\chat\\\\layout.tsx\"],\n        \n      }\n      ]\n      },\n        {\n        'layout': [module6, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(ai-unified)\\\\layout.tsx\"],\n'forbidden': [module7, \"next/dist/client/components/forbidden-error\"],\n'unauthorized': [module8, \"next/dist/client/components/unauthorized-error\"],\n        \n      }\n      ]\n      },\n        {\n        'layout': [module0, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\layout.tsx\"],\n'error': [module1, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\error.tsx\"],\n'global-error': [module2, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\global-error.tsx\"],\n'not-found': [module3, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\not-found.tsx\"],\n'forbidden': [module4, \"next/dist/client/components/forbidden-error\"],\n'unauthorized': [module5, \"next/dist/client/components/unauthorized-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(ai-unified)\\\\chat\\\\[id]\\\\page.tsx\"];\nexport { tree, pages };\nexport { default as GlobalError } from \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\global-error.tsx\" with {\n    'turbopack-transition': 'next-server-utility'\n};\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nexport const __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\nexport * from \"next/dist/server/app-render/entry-base\" with {\n    'turbopack-transition': 'next-server-utility'\n};\n// Create and export the route module that will be consumed.\nexport const routeModule = new AppPageRouteModule({\n    definition: {\n        kind: RouteKind.APP_PAGE,\n        page: \"/(ai-unified)/chat/[id]/page\",\n        pathname: \"/chat/[id]\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: '',\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map","module.exports = require(\"node:inspector\");","/**\r\n * Chat domain entity\r\n *\r\n * This entity represents a chat between a user and the AI assistant.\r\n */\r\n\r\nimport {\r\n  DBChatAttachmentRow,\r\n  DBChatMessageRow,\r\n  DBChatSessionRow,\r\n} from \"@/_infrastructure/repositories/chat-repository\";\r\n\r\nexport enum ChatModelType {\r\n  GPT_3_5 = \"gpt-3.5-turbo\",\r\n  GPT_4 = \"gpt-4\",\r\n  GPT_4_VISION = \"gpt-4-vision-preview\",\r\n  CLAUDE_3_SONNET = \"claude-3-sonnet\",\r\n  CLAUDE_3_OPUS = \"claude-3-opus\",\r\n  CLAUDE_3_HAIKU = \"claude-3-haiku\",\r\n}\r\n\r\nexport type ChatVisibility = \"private\" | \"public\" | \"team\";\r\n\r\nexport class ChatMessage {\r\n  id: string;\r\n  chatId: string;\r\n  role: \"user\" | \"assistant\" | \"system\";\r\n  content: string;\r\n  attachments: ChatAttachment[];\r\n  metadata: Record<string, any>;\r\n  createdAt: Date;\r\n\r\n  constructor(data: {\r\n    id: string;\r\n    chatId: string;\r\n    role: \"user\" | \"assistant\" | \"system\";\r\n    content: string;\r\n    attachments?: ChatAttachment[];\r\n    metadata?: Record<string, any>;\r\n    createdAt?: Date;\r\n  }) {\r\n    this.id = data.id;\r\n    this.chatId = data.chatId;\r\n    this.role = data.role;\r\n    this.content = data.content;\r\n    this.attachments = data.attachments || [];\r\n    this.metadata = data.metadata || {};\r\n    this.createdAt = data.createdAt || new Date();\r\n  }\r\n\r\n  static fromDatabase(\r\n    record: DBChatMessageRow,\r\n    attachments: ChatAttachment[] = []\r\n  ): ChatMessage {\r\n    return new ChatMessage({\r\n      id: record.id,\r\n      chatId: record.session_id,\r\n      role: record.role as \"user\" | \"assistant\" | \"system\",\r\n      content: record.content || \"\",\r\n      attachments: attachments.filter((a) => a.messageId === record.id),\r\n      metadata:\r\n        typeof record.metadata === \"object\" && record.metadata\r\n          ? (record.metadata as Record<string, any>)\r\n          : {},\r\n      createdAt: new Date(record.created_at),\r\n    });\r\n  }\r\n}\r\n\r\nexport class ChatAttachment {\r\n  id: string;\r\n  messageId: string;\r\n  type: \"image\" | \"document\" | \"link\";\r\n  fileId: string | null; // Reference to a document in the document system\r\n  url: string | null;\r\n  name: string;\r\n  contentType: string | null;\r\n  size: number | null;\r\n  metadata: Record<string, any>;\r\n  createdAt: Date;\r\n\r\n  constructor(data: {\r\n    id: string;\r\n    messageId: string;\r\n    type: \"image\" | \"document\" | \"link\";\r\n    fileId?: string | null;\r\n    url?: string | null;\r\n    name: string;\r\n    contentType?: string | null;\r\n    size?: number | null;\r\n    metadata?: Record<string, any>;\r\n    createdAt?: Date;\r\n  }) {\r\n    this.id = data.id;\r\n    this.messageId = data.messageId;\r\n    this.type = data.type;\r\n    this.fileId = data.fileId || null;\r\n    this.url = data.url || null;\r\n    this.name = data.name;\r\n    this.contentType = data.contentType || null;\r\n    this.size = data.size || null;\r\n    this.metadata = data.metadata || {};\r\n    this.createdAt = data.createdAt || new Date();\r\n  }\r\n\r\n  static fromDatabase(record: DBChatAttachmentRow): ChatAttachment {\r\n    return new ChatAttachment({\r\n      id: record.id,\r\n      messageId: record.message_id,\r\n      type: record.type as \"image\" | \"document\" | \"link\",\r\n      fileId: record.file_id,\r\n      url: record.url,\r\n      name: record.name,\r\n      contentType: record.content_type,\r\n      size: record.size,\r\n      metadata:\r\n        typeof record.metadata === \"object\" && record.metadata\r\n          ? (record.metadata as Record<string, any>)\r\n          : {},\r\n      createdAt: new Date(record.created_at),\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Chat entity representing conversations with the AI assistant\r\n */\r\nexport class Chat {\r\n  id: string;\r\n  userId: string;\r\n  title: string;\r\n  description: string | null;\r\n  modelType: ChatModelType;\r\n  visibility: ChatVisibility;\r\n  systemPrompt: string | null;\r\n  messages: ChatMessage[];\r\n  case_id: string | null; // Optional association with a case\r\n  metadata: Record<string, any>;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n\r\n  constructor(data: {\r\n    id: string;\r\n    userId: string;\r\n    title: string;\r\n    description?: string | null;\r\n    modelType?: ChatModelType;\r\n    visibility?: ChatVisibility;\r\n    systemPrompt?: string | null;\r\n    messages?: ChatMessage[];\r\n    case_id?: string | null;\r\n    rawMetadata?: Record<string, any> | null;\r\n    createdAt?: Date;\r\n    updatedAt?: Date;\r\n  }) {\r\n    this.id = data.id;\r\n    this.userId = data.userId;\r\n    this.title = data.title;\r\n    this.description = data.description || null;\r\n    this.modelType = data.modelType || ChatModelType.GPT_4;\r\n    this.visibility = data.visibility || \"private\";\r\n    this.systemPrompt = data.systemPrompt || null;\r\n    this.messages = data.messages || [];\r\n    this.case_id = data.case_id || null;\r\n    this.metadata = data.rawMetadata || {};\r\n    this.createdAt = data.createdAt || new Date();\r\n    this.updatedAt = data.updatedAt || new Date();\r\n  }\r\n\r\n  /**\r\n   * Add a new message to the chat\r\n   */\r\n  addMessage(message: Omit<ChatMessage, \"chatId\">): Chat {\r\n    const newMessage: ChatMessage = {\r\n      ...message,\r\n      chatId: this.id,\r\n    };\r\n\r\n    this.messages.push(newMessage);\r\n    this.updatedAt = new Date();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the latest message in the chat\r\n   */\r\n  getLatestMessage(): ChatMessage | null {\r\n    if (this.messages.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    // Sort messages by creation date (newest first)\r\n    const sortedMessages = [...this.messages].sort(\r\n      (a, b) => b.createdAt.getTime() - a.createdAt.getTime()\r\n    );\r\n\r\n    return sortedMessages[0];\r\n  }\r\n\r\n  /**\r\n   * Associate this chat with a case\r\n   */\r\n  assignToCase(case_id: string): Chat {\r\n    this.case_id = case_id;\r\n    this.updatedAt = new Date();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Update chat metadata\r\n   */\r\n  updateMetadata(metadata: Record<string, any>): Chat {\r\n    this.metadata = {\r\n      ...this.metadata,\r\n      ...metadata,\r\n    };\r\n    this.updatedAt = new Date();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Update chat title and description\r\n   */\r\n  updateDetails(data: {\r\n    title?: string;\r\n    description?: string | null;\r\n    modelType?: ChatModelType;\r\n    visibility?: ChatVisibility;\r\n    systemPrompt?: string | null;\r\n  }): Chat {\r\n    if (data.title !== undefined) this.title = data.title;\r\n    if (data.description !== undefined) this.description = data.description;\r\n    if (data.modelType !== undefined) this.modelType = data.modelType;\r\n    if (data.visibility !== undefined) this.visibility = data.visibility;\r\n    if (data.systemPrompt !== undefined) this.systemPrompt = data.systemPrompt;\r\n\r\n    this.updatedAt = new Date();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Convert the chat to a plain object\r\n   */\r\n  toObject(): Record<string, any> {\r\n    return {\r\n      id: this.id,\r\n      userId: this.userId,\r\n      title: this.title,\r\n      description: this.description,\r\n      modelType: this.modelType,\r\n      visibility: this.visibility,\r\n      systemPrompt: this.systemPrompt,\r\n      messages: this.messages,\r\n      case_id: this.case_id,\r\n      metadata: this.metadata,\r\n      createdAt: this.createdAt,\r\n      updatedAt: this.updatedAt,\r\n    };\r\n  }\r\n\r\n  static fromDatabase(\r\n    record: DBChatSessionRow,\r\n    messages: DBChatMessageRow[] = [],\r\n    attachments: DBChatAttachmentRow[] = []\r\n  ): Chat {\r\n    const metadata =\r\n      typeof record.metadata === \"object\" &&\r\n      record.metadata !== null &&\r\n      !Array.isArray(record.metadata)\r\n        ? (record.metadata as Record<string, any>)\r\n        : {};\r\n\r\n    const chatAttachments = attachments.map(ChatAttachment.fromDatabase);\r\n\r\n    return new Chat({\r\n      id: record.id,\r\n      userId: record.user_id,\r\n      title: record.title || \"Untitled Chat\",\r\n      description: (metadata?.description as string) || null,\r\n      modelType: (record.model as ChatModelType) || ChatModelType.GPT_4,\r\n      visibility: (record.visibility as ChatVisibility) || \"private\",\r\n      systemPrompt: record.system_prompt || null,\r\n      messages: messages.map((m) =>\r\n        ChatMessage.fromDatabase(m, chatAttachments)\r\n      ),\r\n      case_id: record.case_id || null,\r\n      rawMetadata: metadata,\r\n      createdAt: record.created_at ? new Date(record.created_at) : new Date(),\r\n      updatedAt: record.updated_at ? new Date(record.updated_at) : new Date(),\r\n    });\r\n  }\r\n}\r\n","\"use client\";\r\n\r\nimport * as Sentry from \"@sentry/nextjs\";\r\nimport { useEffect } from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/ui/button\";\r\n\r\nexport default function GlobalError({\r\n  error,\r\n  reset,\r\n}: {\r\n  error: Error & { digest?: string };\r\n  reset: () => void;\r\n}) {\r\n  useEffect(() => {\r\n    // Log the error to an error reporting service\r\n    console.error(\"Global error occurred:\", error);\r\n    Sentry.captureException(error);\r\n  }, [error]);\r\n\r\n  return (\r\n    <html>\r\n      <body>\r\n        <div className=\"flex min-h-screen flex-col items-center justify-center p-4 text-center\">\r\n          <h1 className=\"text-4xl font-bold mb-4\">Something went wrong!</h1>\r\n          <p className=\"text-xl mb-8\">\r\n            {error.message || \"An unexpected error occurred\"}\r\n          </p>\r\n          <div className=\"space-x-4\">\r\n            <Button onClick={() => reset()}>Try again</Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => (window.location.href = \"/\")}\r\n            >\r\n              Go home\r\n            </Button>\r\n          </div>\r\n          {process.env.NODE_ENV === \"development\" && (\r\n            <div className=\"mt-8 p-4 bg-gray-100 dark:bg-gray-800 rounded-md text-left overflow-auto max-w-full\">\r\n              <pre className=\"text-sm\">{error.stack}</pre>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n","/**\r\n * Domain Type Mappings\r\n *\r\n * This file provides type-safe mappings between Supabase database types (snake_case)\r\n * and our domain entities (camelCase). It serves as the central place for all\r\n * database-to-domain type conversions.\r\n */\r\n\r\nimport { Database, Tables } from \"./database.types\";\r\nimport { toCamelCase, toSnakeCase } from \"@/lib/utils/case-converter\";\r\n\r\n// Database table types\r\nexport type DBChatSessionRow = Tables<\"chat_sessions\">;\r\nexport type DBChatMessageRow = Tables<\"chat_messages\">;\r\nexport type DBDocumentRow = Tables<\"documents\">;\r\nexport type DBCaseRow = Tables<\"cases\">;\r\nexport type DBUserProfileRow = Tables<\"profiles\">;\r\nexport type DBResearchSessionRow = Tables<\"research_sessions\">;\r\n\r\n// Domain entity interfaces that match our business logic\r\nexport interface ChatSessionDomain {\r\n  id: string;\r\n  userId: string;\r\n  title: string | null;\r\n  systemPrompt: string | null;\r\n  context: string | null;\r\n  model: string | null;\r\n  prompt: string | null;\r\n  agentConfig: any | null;\r\n  caseId: string | null;\r\n  lastMessageAt: string | null;\r\n  metadata: any | null;\r\n  visibility: string;\r\n  createdAt: string | null;\r\n  updatedAt: string | null;\r\n}\r\n\r\nexport interface ChatMessageDomain {\r\n  id: string;\r\n  sessionId: string;\r\n  userId: string | null;\r\n  role: string;\r\n  content: string;\r\n  sources: any | null;\r\n  toolCalls: any | null;\r\n  tokens: number | null;\r\n  metadata: any | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface DocumentDomain {\r\n  id: string;\r\n  userId: string | null;\r\n  title: string;\r\n  filename: string;\r\n  filePath: string;\r\n  fileType: string | null;\r\n  fileSize: number | null;\r\n  content: string | null;\r\n  text: string;\r\n  status: string;\r\n  classification: any | null;\r\n  metadata: any | null;\r\n  createdAt: string | null;\r\n  updatedAt: string | null;\r\n}\r\n\r\nexport interface CaseDomain {\r\n  id: string;\r\n  userId: string;\r\n  title: string;\r\n  description: string | null;\r\n  status: Database[\"public\"][\"Enums\"][\"case_status\"];\r\n  metadata: any | null;\r\n  createdAt: string | null;\r\n  updatedAt: string | null;\r\n}\r\n\r\nexport interface UserProfileDomain {\r\n  id: string;\r\n  firstName: string | null;\r\n  lastName: string | null;\r\n  avatarUrl: string | null;\r\n  bio: string | null;\r\n  countryOfCitizenship: string | null;\r\n  countryOfInterest: string | null;\r\n  countryOfResidence: string | null;\r\n  immigrationGoals: string | null;\r\n  language: string | null;\r\n  timezone: string | null;\r\n  visaType: string | null;\r\n  role: Database[\"public\"][\"Enums\"][\"user_role\"] | null;\r\n  isAdmin: boolean | null;\r\n  createdAt: string | null;\r\n  updatedAt: string | null;\r\n}\r\n\r\n/**\r\n * Type-safe mapping functions\r\n */\r\nexport class DomainMapper {\r\n  /**\r\n   * Maps a database chat session row to domain entity\r\n   */\r\n  static toChatSessionDomain(dbRow: DBChatSessionRow): ChatSessionDomain {\r\n    return {\r\n      id: dbRow.id,\r\n      userId: dbRow.user_id,\r\n      title: dbRow.title,\r\n      systemPrompt: dbRow.system_prompt,\r\n      context: dbRow.context,\r\n      model: dbRow.model,\r\n      prompt: dbRow.prompt,\r\n      agentConfig: dbRow.agent_config,\r\n      caseId: dbRow.case_id,\r\n      lastMessageAt: dbRow.last_message_at,\r\n      metadata: dbRow.metadata,\r\n      visibility: dbRow.visibility,\r\n      createdAt: dbRow.created_at,\r\n      updatedAt: dbRow.updated_at,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Maps a domain chat session entity to database row\r\n   */\r\n  static fromChatSessionDomain(\r\n    domain: ChatSessionDomain\r\n  ): Partial<DBChatSessionRow> {\r\n    return {\r\n      id: domain.id,\r\n      user_id: domain.userId,\r\n      title: domain.title,\r\n      system_prompt: domain.systemPrompt,\r\n      context: domain.context,\r\n      model: domain.model,\r\n      prompt: domain.prompt,\r\n      agent_config: domain.agentConfig,\r\n      case_id: domain.caseId,\r\n      last_message_at: domain.lastMessageAt,\r\n      metadata: domain.metadata,\r\n      visibility: domain.visibility,\r\n      created_at: domain.createdAt,\r\n      updated_at: domain.updatedAt,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Maps a database chat message row to domain entity\r\n   */\r\n  static toChatMessageDomain(dbRow: DBChatMessageRow): ChatMessageDomain {\r\n    return {\r\n      id: dbRow.id,\r\n      sessionId: dbRow.session_id,\r\n      userId: dbRow.user_id,\r\n      role: dbRow.role,\r\n      content: dbRow.content,\r\n      sources: dbRow.sources,\r\n      toolCalls: dbRow.tool_calls,\r\n      tokens: dbRow.tokens,\r\n      metadata: dbRow.metadata,\r\n      createdAt: dbRow.created_at,\r\n      updatedAt: dbRow.updated_at,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Maps a domain chat message entity to database row\r\n   */\r\n  static fromChatMessageDomain(\r\n    domain: ChatMessageDomain\r\n  ): Partial<DBChatMessageRow> {\r\n    return {\r\n      id: domain.id,\r\n      session_id: domain.sessionId,\r\n      user_id: domain.userId,\r\n      role: domain.role,\r\n      content: domain.content,\r\n      sources: domain.sources,\r\n      tool_calls: domain.toolCalls,\r\n      tokens: domain.tokens,\r\n      metadata: domain.metadata,\r\n      created_at: domain.createdAt,\r\n      updated_at: domain.updatedAt,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Maps a database document row to domain entity\r\n   */\r\n  static toDocumentDomain(dbRow: DBDocumentRow): DocumentDomain {\r\n    return {\r\n      id: dbRow.id,\r\n      userId: dbRow.user_id,\r\n      title: dbRow.title,\r\n      filename: dbRow.filename,\r\n      filePath: dbRow.file_path,\r\n      fileType: dbRow.file_type,\r\n      fileSize: dbRow.file_size,\r\n      content: dbRow.content,\r\n      text: dbRow.text,\r\n      status: dbRow.status,\r\n      classification: dbRow.classification,\r\n      metadata: dbRow.metadata,\r\n      createdAt: dbRow.created_at,\r\n      updatedAt: dbRow.updated_at,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Maps a domain document entity to database row\r\n   */\r\n  static fromDocumentDomain(domain: DocumentDomain): Partial<DBDocumentRow> {\r\n    return {\r\n      id: domain.id,\r\n      user_id: domain.userId,\r\n      title: domain.title,\r\n      filename: domain.filename,\r\n      file_path: domain.filePath,\r\n      file_type: domain.fileType,\r\n      file_size: domain.fileSize,\r\n      content: domain.content,\r\n      text: domain.text,\r\n      status: domain.status,\r\n      classification: domain.classification,\r\n      metadata: domain.metadata,\r\n      created_at: domain.createdAt,\r\n      updated_at: domain.updatedAt,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Maps a database case row to domain entity\r\n   */\r\n  static toCaseDomain(dbRow: DBCaseRow): CaseDomain {\r\n    return {\r\n      id: dbRow.id,\r\n      userId: dbRow.user_id,\r\n      title: dbRow.title,\r\n      description: dbRow.description,\r\n      status: dbRow.status,\r\n      metadata: dbRow.metadata,\r\n      createdAt: dbRow.created_at,\r\n      updatedAt: dbRow.updated_at,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Maps a domain case entity to database row\r\n   */\r\n  static fromCaseDomain(domain: CaseDomain): Partial<DBCaseRow> {\r\n    return {\r\n      id: domain.id,\r\n      user_id: domain.userId,\r\n      title: domain.title,\r\n      description: domain.description,\r\n      status: domain.status,\r\n      metadata: domain.metadata,\r\n      created_at: domain.createdAt,\r\n      updated_at: domain.updatedAt,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Maps a database user profile row to domain entity\r\n   */\r\n  static toUserProfileDomain(dbRow: DBUserProfileRow): UserProfileDomain {\r\n    return {\r\n      id: dbRow.id,\r\n      firstName: dbRow.first_name,\r\n      lastName: dbRow.last_name,\r\n      avatarUrl: dbRow.avatar_url,\r\n      bio: dbRow.bio,\r\n      countryOfCitizenship: dbRow.country_of_citizenship,\r\n      countryOfInterest: dbRow.country_of_interest,\r\n      countryOfResidence: dbRow.country_of_residence,\r\n      immigrationGoals: dbRow.immigration_goals,\r\n      language: dbRow.language,\r\n      timezone: dbRow.timezone,\r\n      visaType: dbRow.visa_type,\r\n      role: dbRow.role,\r\n      isAdmin: dbRow.is_admin,\r\n      createdAt: dbRow.created_at,\r\n      updatedAt: dbRow.updated_at,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Maps a domain user profile entity to database row\r\n   */\r\n  static fromUserProfileDomain(\r\n    domain: UserProfileDomain\r\n  ): Partial<DBUserProfileRow> {\r\n    return {\r\n      id: domain.id,\r\n      first_name: domain.firstName,\r\n      last_name: domain.lastName,\r\n      avatar_url: domain.avatarUrl,\r\n      bio: domain.bio,\r\n      country_of_citizenship: domain.countryOfCitizenship,\r\n      country_of_interest: domain.countryOfInterest,\r\n      country_of_residence: domain.countryOfResidence,\r\n      immigration_goals: domain.immigrationGoals,\r\n      language: domain.language,\r\n      timezone: domain.timezone,\r\n      visa_type: domain.visaType,\r\n      role: domain.role,\r\n      is_admin: domain.isAdmin,\r\n      created_at: domain.createdAt,\r\n      updated_at: domain.updatedAt,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Generic mapping function using case converter\r\n   * Use when specific mapping isn't available\r\n   */\r\n  static genericToDomain<T>(dbRow: any): T {\r\n    return toCamelCase<T>(dbRow);\r\n  }\r\n\r\n  /**\r\n   * Generic mapping function using case converter\r\n   * Use when specific mapping isn't available\r\n   */\r\n  static genericFromDomain<T>(domain: any): T {\r\n    return toSnakeCase<T>(domain);\r\n  }\r\n}\r\n","'use client';\r\n\r\nimport { useEffect } from 'react';\r\n\r\nimport { Button } from '@/ui/button';\r\n\r\nexport default function Error({\r\n  error,\r\n  reset,\r\n}: {\r\n  error: Error & { digest?: string };\r\n  reset: () => void;\r\n}) {\r\n  useEffect(() => {\r\n    // Log the error to an error reporting service\r\n    console.error(error);\r\n  }, [error]);\r\n\r\n  return (\r\n    <div className=\"flex h-screen\">\r\n      <div className=\"m-auto text-center space-y-4\">\r\n        <h2 className=\"text-2xl font-bold\">Something went wrong!</h2>\r\n        <p className=\"text-muted-foreground\">{error.message}</p>\r\n        <Button\r\n          onClick={() => reset()}\r\n          variant=\"outline\"\r\n        >\r\n          Try again\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n} ","import { SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nimport { createSupabaseServiceClient } from \"@/lib/supabase/server\";\r\nimport { Database } from \"@/types/database.types\";\r\nimport { DomainMapper } from \"@/types/domain-mappings\";\r\n\r\nexport type RepositoryOptions = {\r\n  useServiceRole?: boolean;\r\n};\r\n\r\n/**\r\n * Base Repository interface for data access operations\r\n * T represents the entity type\r\n * K represents the primary key type (usually string or number)\r\n */\r\nexport interface IRepository<T, K = string> {\r\n  /**\r\n   * Retrieve all records of this entity\r\n   */\r\n  getAll(options?: { limit?: number; offset?: number }): Promise<T[]>;\r\n\r\n  /**\r\n   * Retrieve a single record by its ID\r\n   */\r\n  getById(id: K): Promise<T | null>;\r\n\r\n  /**\r\n   * Create a new record\r\n   */\r\n  create(data: Partial<T>): Promise<T>;\r\n\r\n  /**\r\n   * Update an existing record\r\n   */\r\n  update(id: K, data: Partial<T>): Promise<T>;\r\n\r\n  /**\r\n   * Delete a record by its ID\r\n   */\r\n  delete(id: K): Promise<boolean>;\r\n}\r\n\r\n/**\r\n * Base Repository implementation using Supabase\r\n */\r\nexport abstract class BaseRepository<\r\n  T,\r\n  K = string,\r\n  TableName extends\r\n    keyof Database[\"public\"][\"Tables\"] = keyof Database[\"public\"][\"Tables\"],\r\n> implements IRepository<T, K>\r\n{\r\n  protected tableName: TableName;\r\n  private static clientInstance: SupabaseClient<Database> | null = null;\r\n\r\n  constructor(tableName: TableName, options: RepositoryOptions = {}) {\r\n    this.tableName = tableName;\r\n  }\r\n\r\n  protected async getClient(): Promise<SupabaseClient<Database>> {\r\n    if (BaseRepository.clientInstance === null) {\r\n      BaseRepository.clientInstance = createSupabaseServiceClient();\r\n    }\r\n    return BaseRepository.clientInstance;\r\n  }\r\n\r\n  /**\r\n   * Retrieve all records of this entity\r\n   */\r\n  async getAll(\r\n    options: { limit?: number; offset?: number } = {}\r\n  ): Promise<T[]> {\r\n    const client = await this.getClient();\r\n    const { data, error } = await client\r\n      .from(this.tableName)\r\n      .select(\"*\")\r\n      .range(\r\n        options.offset || 0,\r\n        (options.offset || 0) + (options.limit || 100) - 1\r\n      );\r\n\r\n    if (error) throw error;\r\n    return data as T[];\r\n  }\r\n\r\n  /**\r\n   * Retrieve a single record by its ID\r\n   */\r\n  async getById(id: K): Promise<T | null> {\r\n    const client = await this.getClient();\r\n    const { data, error } = await client\r\n      .from(this.tableName)\r\n      .select(\"*\")\r\n      .eq(\"id\", id as any)\r\n      .single();\r\n\r\n    if (error) {\r\n      if (error.code === \"PGRST116\") return null; // Record not found\r\n      throw error;\r\n    }\r\n    return data as T;\r\n  }\r\n\r\n  /**\r\n   * Create a new record\r\n   */\r\n  async create(data: Partial<T>): Promise<T> {\r\n    const client = await this.getClient();\r\n\r\n    // Log the data being sent to help debug the createdAt issue\r\n    console.log(\r\n      `[BaseRepository.create] Inserting into ${this.tableName}:`,\r\n      JSON.stringify(data, null, 2)\r\n    );\r\n\r\n    const { data: createdData, error } = await client\r\n      .from(this.tableName)\r\n      .insert(data as any)\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      console.error(`[BaseRepository.create] Error:`, error);\r\n      throw error;\r\n    }\r\n    return createdData as T;\r\n  }\r\n\r\n  /**\r\n   * Update an existing record\r\n   */\r\n  async update(id: K, data: Partial<T>): Promise<T> {\r\n    const client = await this.getClient();\r\n    const { data: updatedData, error } = await client\r\n      .from(this.tableName)\r\n      .update(data as any)\r\n      .eq(\"id\", id as any)\r\n      .select()\r\n      .single();\r\n\r\n    if (error) throw error;\r\n    return updatedData as T;\r\n  }\r\n\r\n  /**\r\n   * Delete a record by its ID\r\n   */\r\n  async delete(id: K): Promise<boolean> {\r\n    const client = await this.getClient();\r\n    const { error } = await client\r\n      .from(this.tableName)\r\n      .delete()\r\n      .eq(\"id\", id as any);\r\n\r\n    if (error) throw error;\r\n    return true;\r\n  }\r\n\r\n  // Abstract method to be implemented by subclasses\r\n  abstract toDomainEntity(record: T): T;\r\n  // Optional: abstract fromDomainEntity(entity: T): T;\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Info\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNMTIgMTZ2LTQiIC8+CiAgPHBhdGggZD0iTTEyIDhoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/info\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Info = createLucideIcon('Info', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M12 16v-4', key: '1dtifu' }],\n  ['path', { d: 'M12 8h.01', key: 'e9boi3' }],\n]);\n\nexport default Info;\n","import { cookies } from \"next/headers\";\r\nimport Script from \"next/script\";\r\n\r\nimport { AppSidebar } from \"@/components/ui/app-sidebar\";\r\nimport { SidebarInset, SidebarProvider } from \"@/components/ui/sidebar\";\r\nimport { auth } from \"@/lib/auth\";\r\n\r\nexport const experimental_ppr = true;\r\n\r\nexport default async function UnifiedLayout({\r\n  // Renamed function\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const [session, cookieStore] = await Promise.all([auth(), cookies()]);\r\n  const isCollapsed = cookieStore.get(\"sidebar:state\")?.value !== \"true\";\r\n\r\n  return (\r\n    <>\r\n      <Script\r\n        src=\"https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js\"\r\n        strategy=\"beforeInteractive\"\r\n      />\r\n      <SidebarProvider defaultOpen={!isCollapsed}>\r\n        <AppSidebar />\r\n        <SidebarInset>{children}</SidebarInset>\r\n      </SidebarProvider>\r\n    </>\r\n  );\r\n}\r\n","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\not-found.tsx\");\n","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\client-page.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\client-segment.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\error-boundary.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\http-access-fallback\\\\error-boundary.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\layout-router.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\metadata\\\\async-metadata.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\metadata\\\\metadata-boundary.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\next@15.3.0-canary.31_@babe_be67f368de2727c847f3a61f5e6cf4fa\\\\node_modules\\\\next\\\\dist\\\\client\\\\components\\\\render-from-template-context.js\");\n","module.exports = require(\"net\");","\"use client\";\n\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\nimport * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root> & {\n    value?: number;\n  }\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name BookOpen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMiAzaDZhNCA0IDAgMCAxIDQgNHYxNGEzIDMgMCAwIDAtMy0zSDJ6IiAvPgogIDxwYXRoIGQ9Ik0yMiAzaC02YTQgNCAwIDAgMC00IDR2MTRhMyAzIDAgMCAxIDMtM2g3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/book-open\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookOpen = createLucideIcon('BookOpen', [\n  ['path', { d: 'M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z', key: 'vv98re' }],\n  ['path', { d: 'M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z', key: '1cyq3y' }],\n]);\n\nexport default BookOpen;\n","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\not-found.tsx\");\n","module.exports = require(\"events\");","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 96708;\nmodule.exports = webpackEmptyContext;","import(/* webpackMode: \"eager\", webpackExports: [\"StagewiseToolbar\"] */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\@stagewise+toolbar-next@0.1_ddd781b6b326c600c1955708a1945bbb\\\\node_modules\\\\@stagewise\\\\toolbar-next\\\\dist\\\\index.js\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"Analytics\"] */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\@vercel+analytics@1.5.0_nex_c9ecab91375e0c29fa3860d2f538ce7c\\\\node_modules\\\\@vercel\\\\analytics\\\\dist\\\\react\\\\index.mjs\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"SpeedInsights\"] */ \"E:\\\\downloads\\\\Hijraah\\\\node_modules\\\\.pnpm\\\\@vercel+speed-insights@1.2._a772f3e81ab5047debce92984e03a3d5\\\\node_modules\\\\@vercel\\\\speed-insights\\\\dist\\\\next\\\\index.mjs\");\n","import { notFound } from \"next/navigation\";\r\n\r\nimport { UnifiedChatContainer } from \"@/components/ui/unified-chat/UnifiedChatContainer\";\r\nimport { ChatRepository } from \"@/_infrastructure/repositories/chat-repository\";\r\nimport { createServerClient } from \"@/lib/supabase/server\";\r\n\r\ninterface ChatPageProps {\r\n  params: {\r\n    id: string;\r\n  };\r\n}\r\n\r\nexport default async function ChatPage({ params }: ChatPageProps) {\r\n  const supabase = createServerClient();\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser();\r\n\r\n  const chatRepository = new ChatRepository();\r\n  const chat = await chatRepository.getById(params.id);\r\n\r\n  if (!chat) {\r\n    notFound();\r\n  }\r\n\r\n  const isReadonly = chat.userId !== user?.id;\r\n\r\n  return (\r\n    <div className=\"flex h-screen flex-col\">\r\n      <UnifiedChatContainer id={params.id} isReadonly={isReadonly} />\r\n    </div>\r\n  );\r\n}\r\n","'use client'\n\nimport ReactDOM from 'react-dom'\nimport React, { useEffect, useContext, useRef, type JSX } from 'react'\nimport type { ScriptHTMLAttributes } from 'react'\nimport { HeadManagerContext } from '../shared/lib/head-manager-context.shared-runtime'\nimport { setAttributesFromProps } from './set-attributes-from-props'\nimport { requestIdleCallback } from './request-idle-callback'\n\nconst ScriptCache = new Map()\nconst LoadCache = new Set()\n\nexport interface ScriptProps extends ScriptHTMLAttributes<HTMLScriptElement> {\n  strategy?: 'afterInteractive' | 'lazyOnload' | 'beforeInteractive' | 'worker'\n  id?: string\n  onLoad?: (e: any) => void\n  onReady?: () => void | null\n  onError?: (e: any) => void\n  children?: React.ReactNode\n  stylesheets?: string[]\n}\n\n/**\n * @deprecated Use `ScriptProps` instead.\n */\nexport type Props = ScriptProps\n\nconst insertStylesheets = (stylesheets: string[]) => {\n  // Case 1: Styles for afterInteractive/lazyOnload with appDir injected via handleClientScriptLoad\n  //\n  // Using ReactDOM.preinit to feature detect appDir and inject styles\n  // Stylesheets might have already been loaded if initialized with Script component\n  // Re-inject styles here to handle scripts loaded via handleClientScriptLoad\n  // ReactDOM.preinit handles dedup and ensures the styles are loaded only once\n  if (ReactDOM.preinit) {\n    stylesheets.forEach((stylesheet: string) => {\n      ReactDOM.preinit(stylesheet, { as: 'style' })\n    })\n\n    return\n  }\n\n  // Case 2: Styles for afterInteractive/lazyOnload with pages injected via handleClientScriptLoad\n  //\n  // We use this function to load styles when appdir is not detected\n  // TODO: Use React float APIs to load styles once available for pages dir\n  if (typeof window !== 'undefined') {\n    let head = document.head\n    stylesheets.forEach((stylesheet: string) => {\n      let link = document.createElement('link')\n\n      link.type = 'text/css'\n      link.rel = 'stylesheet'\n      link.href = stylesheet\n\n      head.appendChild(link)\n    })\n  }\n}\n\nconst loadScript = (props: ScriptProps): void => {\n  const {\n    src,\n    id,\n    onLoad = () => {},\n    onReady = null,\n    dangerouslySetInnerHTML,\n    children = '',\n    strategy = 'afterInteractive',\n    onError,\n    stylesheets,\n  } = props\n\n  const cacheKey = id || src\n\n  // Script has already loaded\n  if (cacheKey && LoadCache.has(cacheKey)) {\n    return\n  }\n\n  // Contents of this script are already loading/loaded\n  if (ScriptCache.has(src)) {\n    LoadCache.add(cacheKey)\n    // It is possible that multiple `next/script` components all have same \"src\", but has different \"onLoad\"\n    // This is to make sure the same remote script will only load once, but \"onLoad\" are executed in order\n    ScriptCache.get(src).then(onLoad, onError)\n    return\n  }\n\n  /** Execute after the script first loaded */\n  const afterLoad = () => {\n    // Run onReady for the first time after load event\n    if (onReady) {\n      onReady()\n    }\n    // add cacheKey to LoadCache when load successfully\n    LoadCache.add(cacheKey)\n  }\n\n  const el = document.createElement('script')\n\n  const loadPromise = new Promise<void>((resolve, reject) => {\n    el.addEventListener('load', function (e) {\n      resolve()\n      if (onLoad) {\n        onLoad.call(this, e)\n      }\n      afterLoad()\n    })\n    el.addEventListener('error', function (e) {\n      reject(e)\n    })\n  }).catch(function (e) {\n    if (onError) {\n      onError(e)\n    }\n  })\n\n  if (dangerouslySetInnerHTML) {\n    // Casting since lib.dom.d.ts doesn't have TrustedHTML yet.\n    el.innerHTML = (dangerouslySetInnerHTML.__html as string) || ''\n\n    afterLoad()\n  } else if (children) {\n    el.textContent =\n      typeof children === 'string'\n        ? children\n        : Array.isArray(children)\n          ? children.join('')\n          : ''\n\n    afterLoad()\n  } else if (src) {\n    el.src = src\n    // do not add cacheKey into LoadCache for remote script here\n    // cacheKey will be added to LoadCache when it is actually loaded (see loadPromise above)\n\n    ScriptCache.set(src, loadPromise)\n  }\n\n  setAttributesFromProps(el, props)\n\n  if (strategy === 'worker') {\n    el.setAttribute('type', 'text/partytown')\n  }\n\n  el.setAttribute('data-nscript', strategy)\n\n  // Load styles associated with this script\n  if (stylesheets) {\n    insertStylesheets(stylesheets)\n  }\n\n  document.body.appendChild(el)\n}\n\nexport function handleClientScriptLoad(props: ScriptProps) {\n  const { strategy = 'afterInteractive' } = props\n  if (strategy === 'lazyOnload') {\n    window.addEventListener('load', () => {\n      requestIdleCallback(() => loadScript(props))\n    })\n  } else {\n    loadScript(props)\n  }\n}\n\nfunction loadLazyScript(props: ScriptProps) {\n  if (document.readyState === 'complete') {\n    requestIdleCallback(() => loadScript(props))\n  } else {\n    window.addEventListener('load', () => {\n      requestIdleCallback(() => loadScript(props))\n    })\n  }\n}\n\nfunction addBeforeInteractiveToCache() {\n  const scripts = [\n    ...document.querySelectorAll('[data-nscript=\"beforeInteractive\"]'),\n    ...document.querySelectorAll('[data-nscript=\"beforePageRender\"]'),\n  ]\n  scripts.forEach((script) => {\n    const cacheKey = script.id || script.getAttribute('src')\n    LoadCache.add(cacheKey)\n  })\n}\n\nexport function initScriptLoader(scriptLoaderItems: ScriptProps[]) {\n  scriptLoaderItems.forEach(handleClientScriptLoad)\n  addBeforeInteractiveToCache()\n}\n\n/**\n * Load a third-party scripts in an optimized way.\n *\n * Read more: [Next.js Docs: `next/script`](https://nextjs.org/docs/app/api-reference/components/script)\n */\nfunction Script(props: ScriptProps): JSX.Element | null {\n  const {\n    id,\n    src = '',\n    onLoad = () => {},\n    onReady = null,\n    strategy = 'afterInteractive',\n    onError,\n    stylesheets,\n    ...restProps\n  } = props\n\n  // Context is available only during SSR\n  const { updateScripts, scripts, getIsSsr, appDir, nonce } =\n    useContext(HeadManagerContext)\n\n  /**\n   * - First mount:\n   *   1. The useEffect for onReady executes\n   *   2. hasOnReadyEffectCalled.current is false, but the script hasn't loaded yet (not in LoadCache)\n   *      onReady is skipped, set hasOnReadyEffectCalled.current to true\n   *   3. The useEffect for loadScript executes\n   *   4. hasLoadScriptEffectCalled.current is false, loadScript executes\n   *      Once the script is loaded, the onLoad and onReady will be called by then\n   *   [If strict mode is enabled / is wrapped in <OffScreen /> component]\n   *   5. The useEffect for onReady executes again\n   *   6. hasOnReadyEffectCalled.current is true, so entire effect is skipped\n   *   7. The useEffect for loadScript executes again\n   *   8. hasLoadScriptEffectCalled.current is true, so entire effect is skipped\n   *\n   * - Second mount:\n   *   1. The useEffect for onReady executes\n   *   2. hasOnReadyEffectCalled.current is false, but the script has already loaded (found in LoadCache)\n   *      onReady is called, set hasOnReadyEffectCalled.current to true\n   *   3. The useEffect for loadScript executes\n   *   4. The script is already loaded, loadScript bails out\n   *   [If strict mode is enabled / is wrapped in <OffScreen /> component]\n   *   5. The useEffect for onReady executes again\n   *   6. hasOnReadyEffectCalled.current is true, so entire effect is skipped\n   *   7. The useEffect for loadScript executes again\n   *   8. hasLoadScriptEffectCalled.current is true, so entire effect is skipped\n   */\n  const hasOnReadyEffectCalled = useRef(false)\n\n  useEffect(() => {\n    const cacheKey = id || src\n    if (!hasOnReadyEffectCalled.current) {\n      // Run onReady if script has loaded before but component is re-mounted\n      if (onReady && cacheKey && LoadCache.has(cacheKey)) {\n        onReady()\n      }\n\n      hasOnReadyEffectCalled.current = true\n    }\n  }, [onReady, id, src])\n\n  const hasLoadScriptEffectCalled = useRef(false)\n\n  useEffect(() => {\n    if (!hasLoadScriptEffectCalled.current) {\n      if (strategy === 'afterInteractive') {\n        loadScript(props)\n      } else if (strategy === 'lazyOnload') {\n        loadLazyScript(props)\n      }\n\n      hasLoadScriptEffectCalled.current = true\n    }\n  }, [props, strategy])\n\n  if (strategy === 'beforeInteractive' || strategy === 'worker') {\n    if (updateScripts) {\n      scripts[strategy] = (scripts[strategy] || []).concat([\n        {\n          id,\n          src,\n          onLoad,\n          onReady,\n          onError,\n          ...restProps,\n        },\n      ])\n      updateScripts(scripts)\n    } else if (getIsSsr && getIsSsr()) {\n      // Script has already loaded during SSR\n      LoadCache.add(id || src)\n    } else if (getIsSsr && !getIsSsr()) {\n      loadScript(props)\n    }\n  }\n\n  // For the app directory, we need React Float to preload these scripts.\n  if (appDir) {\n    // Injecting stylesheets here handles beforeInteractive and worker scripts correctly\n    // For other strategies injecting here ensures correct stylesheet order\n    // ReactDOM.preinit handles loading the styles in the correct order,\n    // also ensures the stylesheet is loaded only once and in a consistent manner\n    //\n    // Case 1: Styles for beforeInteractive/worker with appDir - handled here\n    // Case 2: Styles for beforeInteractive/worker with pages dir - Not handled yet\n    // Case 3: Styles for afterInteractive/lazyOnload with appDir - handled here\n    // Case 4: Styles for afterInteractive/lazyOnload with pages dir - handled in insertStylesheets function\n    if (stylesheets) {\n      stylesheets.forEach((styleSrc) => {\n        ReactDOM.preinit(styleSrc, { as: 'style' })\n      })\n    }\n\n    // Before interactive scripts need to be loaded by Next.js' runtime instead\n    // of native <script> tags, because they no longer have `defer`.\n    if (strategy === 'beforeInteractive') {\n      if (!src) {\n        // For inlined scripts, we put the content in `children`.\n        if (restProps.dangerouslySetInnerHTML) {\n          // Casting since lib.dom.d.ts doesn't have TrustedHTML yet.\n          restProps.children = restProps.dangerouslySetInnerHTML\n            .__html as string\n          delete restProps.dangerouslySetInnerHTML\n        }\n\n        return (\n          <script\n            nonce={nonce}\n            dangerouslySetInnerHTML={{\n              __html: `(self.__next_s=self.__next_s||[]).push(${JSON.stringify([\n                0,\n                { ...restProps, id },\n              ])})`,\n            }}\n          />\n        )\n      } else {\n        // @ts-ignore\n        ReactDOM.preload(\n          src,\n          restProps.integrity\n            ? {\n                as: 'script',\n                integrity: restProps.integrity,\n                nonce,\n                crossOrigin: restProps.crossOrigin,\n              }\n            : { as: 'script', nonce, crossOrigin: restProps.crossOrigin }\n        )\n        return (\n          <script\n            nonce={nonce}\n            dangerouslySetInnerHTML={{\n              __html: `(self.__next_s=self.__next_s||[]).push(${JSON.stringify([\n                src,\n                { ...restProps, id },\n              ])})`,\n            }}\n          />\n        )\n      }\n    } else if (strategy === 'afterInteractive') {\n      if (src) {\n        // @ts-ignore\n        ReactDOM.preload(\n          src,\n          restProps.integrity\n            ? {\n                as: 'script',\n                integrity: restProps.integrity,\n                nonce,\n                crossOrigin: restProps.crossOrigin,\n              }\n            : { as: 'script', nonce, crossOrigin: restProps.crossOrigin }\n        )\n      }\n    }\n  }\n\n  return null\n}\n\nObject.defineProperty(Script, '__nextScript', { value: true })\n\nexport default Script\n"],"names":["cancelIdleCallback","requestIdleCallback","self","bind","window","cb","start","Date","now","setTimeout","didTimeout","timeRemaining","Math","max","id","clearTimeout","ScrollArea","children","className","props","div","auth","result","getAuthUser","session","cn","inputs","twMerge","clsx","generateUUID","crypto","randomUUID","replace","c","r","random","v","toString","bytesToSize","bytes","i","floor","log","k","parseFloat","pow","toFixed","sizes","fetcher","url","res","fetch","ok","error","info","json","e","statusText","status","sanitizeUIMessages","messages","map","message","content","sanitizeText","text","ChatRepository","BaseRepository","constructor","options","getChatById","record","getById","toChatEntity","getByUserId","userId","query","client","getClient","from","select","eq","case_id","orderBy","field","direction","split","order","fieldMapping","createdAt","updatedAt","lastMessageAt","caseId","systemPrompt","agentConfig","ascending","limit","offset","range","data","console","getMessages","chatId","getWithDetails","chat","chatError","single","code","messagesError","Error","messageIds","m","attachments","length","attachmentData","attachmentsError","in","addMessage","messageData","payload","session_id","created_at","toISOString","updated_at","insert","update","last_message_at","deleteChat","messageError","delete","sessionError","success","getMessageCountForUser","hours","since","count","head","gte","storeStreamId","streamId","context","streamIds","Array","isArray","includes","push","updateError","getStreamIdsForChat","deleteStreamIdsForChat","toDomainEntity","Chat","fromDatabase","toChatSessionDomain","DomainMapper","fromDomainEntity","entity","entityObject","toObject","toSnakeCase","fromChatSessionDomain","domain","fromDomainEntityToDbRecord","mapRecordToDomain","metadata","title","default","template","metadataBase","URL","description","keywords","authors","name","creator","icons","icon","apple","openGraph","type","locale","siteName","images","width","height","alt","twitter","card","robots","index","follow","viewport","themeColor","media","color","initialScale","dynamic","maxDuration","RootLayout","stagewiseConfig","plugins","_jsxs","_Fragment","_jsx","Analytics","SpeedInsights","StagewiseToolbar","config","buttonVariants","cva","variants","variant","destructive","outline","secondary","ghost","link","size","sm","lg","defaultVariants","Button","asChild","Comp","Slot","data-slot","alertVariants","Alert","role","AlertTitle","AlertDescription","toCamelCase","obj","Object","keys","reduce","key","camelCase","snakeCase","badgeVariants","Badge","serverComponentModule.default","RootNotFound","useRouter","h1","p","locales","en","nativeName","englishName","dateFormat","flag","htmlLang","calendar","number","decimal","thousands","ar","fontClass","fr","es","getLocaleConfig","localeConfigs","defaultLocale","isRTL","useI18n","useLocale","t","useTranslations","format","useFormatter","timeZone","useTimeZone","useNow","isRtl","formatDate","date","dateTime","formatRelativeTime","relativeTime","formatCurrency","value","currency","style","formatNumber","useTranslate","namespace","useGlobalTranslate","experimental_ppr","UnifiedChatLayout","cookieStore","Promise","all","cookies","isCollapsed","get","Script","src","strategy","SidebarProvider","defaultOpen","AppSidebar","SidebarInset","setAttributesFromProps","DOMAttributeNames","acceptCharset","htmlFor","httpEquiv","noModule","ignoreProps","isBooleanScriptAttribute","attr","el","entries","hasOwnProperty","undefined","toLowerCase","tagName","setAttribute","String","removeAttribute","ChatModelType","ChatMessage","filter","a","messageId","ChatAttachment","fileId","contentType","message_id","file_id","content_type","modelType","visibility","rawMetadata","newMessage","getLatestMessage","sort","b","getTime","assignToCase","updateMetadata","updateDetails","chatAttachments","user_id","model","system_prompt","GlobalError","reset","html","body","onClick","location","href","dbRow","prompt","agent_config","toChatMessageDomain","sessionId","sources","toolCalls","tool_calls","tokens","fromChatMessageDomain","toDocumentDomain","filename","filePath","file_path","fileType","file_type","fileSize","file_size","classification","fromDocumentDomain","toCaseDomain","fromCaseDomain","toUserProfileDomain","firstName","first_name","lastName","last_name","avatarUrl","avatar_url","bio","countryOfCitizenship","country_of_citizenship","countryOfInterest","country_of_interest","countryOfResidence","country_of_residence","immigrationGoals","immigration_goals","language","timezone","visaType","visa_type","isAdmin","is_admin","fromUserProfileDomain","genericToDomain","genericFromDomain","h2","clientInstance","tableName","createSupabaseServiceClient","getAll","create","createdData","updatedData","UnifiedLayout","Progress","React","ref","ProgressPrimitive","transform","displayName","ChatPage","params","supabase","createServerClient","user","getUser","chatRepository","notFound","isReadonly","UnifiedChatContainer","handleClientScriptLoad","initScriptLoader","ScriptCache","Map","LoadCache","Set","insertStylesheets","ReactDOM","preinit","stylesheets","forEach","stylesheet","as","loadScript","onLoad","onReady","dangerouslySetInnerHTML","onError","cacheKey","has","add","then","afterLoad","document","createElement","loadPromise","resolve","reject","addEventListener","call","catch","innerHTML","__html","textContent","join","set","appendChild","scriptLoaderItems","querySelectorAll","script","getAttribute","restProps","updateScripts","scripts","getIsSsr","appDir","nonce","useContext","HeadManagerContext","hasOnReadyEffectCalled","useRef","useEffect","current","hasLoadScriptEffectCalled","readyState","concat","styleSrc","JSON","stringify","preload","integrity","crossOrigin","defineProperty"],"sourceRoot":""}