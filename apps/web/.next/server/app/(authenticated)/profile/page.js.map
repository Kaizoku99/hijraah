{"version":3,"file":"../app/(authenticated)/profile/page.js","mappings":"ubAAA,oTC2EO,SAASA,EAAmBC,CAAiB,EAClD,GAAI,CAACA,EAAM,OAAO,KAElB,IAAMC,EAAQD,EAAKE,aAAa,EAAED,MAChC,SAGIE,EAAyB,CAC7BC,MAAOJ,EAAKE,aAAa,EAAEG,gBAAkB,SAC7CC,SAAUN,EAAKE,aAAa,EAAEK,mBAAqB,KACnDC,mBACER,EAAKE,aAAa,EAAEO,6BAA+B,GACrDC,kBAAmBV,EAAKE,aAAa,EAAES,6BAA8B,EACrEC,mBACEZ,EAAKE,aAAa,EAAEW,8BAA+B,EACrDC,cAAed,EAAKE,aAAa,EAAEa,yBAA0B,CAC/D,EAqCA,MAnCmC,CACjC,GAAGf,CAAI,CACPgB,SACEhB,EAAKE,aAAa,EAAEe,WAAajB,EAAKkB,KAAK,EAAEC,MAAM,IAAI,CAAC,EAAE,EAAI,OAChEC,UAAWpB,EAAKE,aAAa,EAAEmB,YAAc,QAC7CpB,EACAqB,QAnBcrB,SAAkB,YAoBhCE,EACAoB,iBAAkB,IAAMpB,EAASW,aAAa,CAC9CU,eAAgB,IACd,IAAMC,EAAkB,CAAE,GAAGtB,CAAQ,CAAE,GAAGuB,CAAY,EACtD,OAAO3B,EAAmB,CACxB,GAAGC,CAAI,CACPE,cAAe,CACb,GAAGF,EAAKE,aAAa,CACrBG,eAAgBoB,EAAgBrB,KAAK,CACrCG,kBAAmBkB,EAAgBnB,QAAQ,CAC3CG,4BAA6BgB,EAAgBjB,kBAAkB,CAC/DG,2BAA4Bc,EAAgBf,iBAAiB,CAC7DG,4BAA6BY,EAAgBb,kBAAkB,CAC/DG,uBAAwBU,EAAgBX,aAC1C,CACF,EACF,EACAa,SAAU,IAAO,EACfC,GAAI5B,EAAK4B,EAAE,CACXV,MAAOlB,EAAKkB,KAAK,CACjBF,SACEhB,EAAKE,aAAa,EAAEe,WAAajB,EAAKkB,KAAK,EAAEC,MAAM,IAAI,CAAC,EAAE,EAAI,OAChEC,UAAWpB,EAAKE,aAAa,EAAEmB,YAAc,QAC7CpB,WACAE,EACF,CACF,CAGF,CC1GA,IAAM0B,EAAcC,CAAAA,EAAAA,EAAAA,aAAAA,CAAaA,MAA8BC,GAKxD,SAASC,EAAa,UAAEC,CAAQ,CAA2B,EAChE,GAAM,CAACjC,EAAMkC,EAAQ,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,CAAsB,MAChD,CAACC,EAASC,EAAW,CAAGF,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,CAAiB,MACjD,CAACG,EAAWC,EAAa,CAAGJ,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,EAAC,GACrCK,EAAWC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,GAGvBC,EAAiBC,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAAC,UACjC,GAAI,CACFJ,GAAa,GACb,GAAM,CACJK,KAAM,SAAER,CAAO,CAAE,CACjBS,MAAOC,CAAY,CACpB,CAAG,MAAMN,EAASO,IAAI,CAACC,UAAU,GAElC,GAAIF,EAAc,MAAMA,EAExB,GAAIV,EAAS,CACX,GAAM,CACJQ,KAAM,MAAE5C,CAAI,CAAE,CACd6C,MAAOI,CAAS,CACjB,CAAG,MAAMT,EAASO,IAAI,CAACG,OAAO,GAC/B,GAAID,EAAW,MAAMA,EAErBZ,EAAWD,GACXF,EAAQnC,EAAmBC,GAC7B,MACEqC,CADK,CACM,KAFetC,CAG1BmC,EAAQ,KAEZ,CAAE,MAAOW,EAAO,CACdM,QAAQN,KAAK,CAAC,4BAA6BA,GAC3CR,EAAW,MACXH,EAAQ,KACV,QAAU,CACRK,EAAa,GACf,CACF,EAAG,CAACC,EAAS,EAGPY,EAAST,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CACxB,MAAOU,EAAwBC,KAC7Bf,GAAa,GACb,GAAI,CACF,GAAiB,UAAbc,EAAsB,CACxB,GAAI,CAACC,GAASpC,OAAS,CAACoC,GAASC,SAC/B,CADyC,KACnC,MAAU,iDAElB,GAAM,MAAEX,CAAI,OAAEC,CAAK,CAAE,CAAG,MAAML,EAASO,IAAI,CAACS,kBAAkB,CAAC,CAC7DtC,MAAOoC,EAAQpC,KAAK,CACpBqC,SAAUD,EAAQC,QAAQ,GAG5B,GAAIV,EAAO,MAAMA,EAGbD,GAAMR,SAAS,CACjBC,EAAWO,EAAKR,OAAO,EACvBF,EAAQnC,EAAmB6C,EAAKR,OAAO,CAACpC,IAAI,EAAlBD,CAE9B,KAAO,CAEL,GAAM,OAAE8C,CAAK,CAAE,CAAG,MAAML,EAASO,IAAI,CAACU,eAAe,CAAC,CACpDJ,SAAUA,EACVC,QAASA,GAASI,WACd,CAAEA,WAAYJ,EAAQI,UAAU,OAChC3B,CACN,GAEA,GAAIc,EAAO,MAAMA,CAEnB,CACF,CAAE,MAAOA,EAAO,CAEd,MADAM,QAAQN,KAAK,CAAC,oBAAqBA,GAC7BA,CACR,QAAU,CACRN,GAAa,EACf,CACF,EACA,CAACC,EAAS,EAINmB,EAAUhB,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAAC,UAC1BJ,GAAa,GACb,GAAI,CACF,GAAM,CAAEM,OAAK,CAAE,CAAG,MAAML,EAASO,IAAI,CAACY,OAAO,GAC7C,GAAId,EAAO,MAAMA,EAEjBR,EAAW,MACXH,EAAQ,KACV,CAAE,MAAOW,EAAO,CACdM,QAAQN,KAAK,CAAC,qBAAsBA,EACtC,QAAU,CACRN,GAAa,EACf,CACF,EAAG,CAACC,EAAS,EAGPoB,EAASjB,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CACxB,MAAOW,IAMLf,GAAa,GACb,GAAI,CACF,GAAI,CAACe,EAAQpC,KAAK,EAAI,CAACoC,EAAQC,QAAQ,CACrC,CADuC,KACjC,MAAU,2CAGlB,GAAM,MAAEX,CAAI,OAAEC,CAAK,CAAE,CAAG,MAAML,EAASO,IAAI,CAACa,MAAM,CAAC,CACjD1C,MAAOoC,EAAQpC,KAAK,CACpBqC,SAAUD,EAAQC,QAAQ,CAC1BD,QAAS,CACPV,KAAM,CACJ3B,UAAWqC,EAAQtC,QAAQ,EAAI,EACjC,EACA6C,gBACEP,EAAQI,UAAU,EAAI,GAAGI,OAAOC,QAAQ,CAACC,MAAM,CAAC,cAAc,CAAC,CAErE,GAEA,GAAInB,EAAO,MAAMA,EACjB,OAAOD,CACT,CAAE,MAAOC,EAAO,CAEd,MADAM,QAAQN,KAAK,CAAC,oBAAqBA,GAC7BA,CACR,QAAU,CACRN,GAAa,EACf,CACF,EACA,CAACC,EAAS,EAINyB,EAAgBtB,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAC/B,MAAOzB,EAAewC,KACpBnB,EAAa,IACb,GAAI,CACF,GAAM,OAAEM,CAAK,CAAE,CAAG,MAAML,EAASO,IAAI,CAACmB,qBAAqB,CAAChD,EAAO,CACjEwC,WACEA,GAAc,GAAGI,OAAOC,QAAQ,CAACC,MAAM,CAAC,oBAAoB,CAAC,GAGjE,GAAInB,EAAO,MAAMA,EACjB,MAAO,EACT,CAAE,MAAOA,EAAO,CAEd,MADAM,QAAQN,KAAK,CAAC,4BAA6BA,GACrCA,CACR,QAAU,CACRN,GAAa,EACf,CACF,EACA,CAACC,EAAS,EAIN2B,EAAiBxB,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAChC,MAAOY,IACLhB,GAAa,GACb,GAAI,CACF,GAAM,OAAEM,CAAK,CAAE,CAAG,MAAML,EAASO,IAAI,CAACqB,UAAU,CAAC,UAC/Cb,CACF,GAEA,GAAIV,EAAO,MAAMA,EACjB,OAAO,CACT,CAAE,MAAOA,EAAO,CAEd,MADAM,QAAQN,KAAK,CAAC,2BAA4BA,GACpCA,CACR,QAAU,CACRN,GAAa,EACf,CACF,EACA,CAACC,EAAS,EAgDZ,MAAO,UAACX,EAAYwC,QAAQ,EAACC,MAfE,CAeKA,KAdlCtE,UACAoC,YACAE,EACAiC,gBAAiB,CAAC,CAACnC,EACnBgB,iBACAO,iBACAjB,SAEAkB,gBACAK,iBACAE,EACAtB,MAAO,IACT,WAE4CZ,GAC9C,CAKO,SAASuC,IACd,IAAMC,EAAUC,CAAAA,EAAAA,EAAAA,UAAAA,CAAUA,CAAC7C,GAE3B,QAAgBE,IAAZ0C,EACF,KADyB,CACfE,MAAM,+CAGlB,OAAOF,CACT,CAKO,SAASG,IACd,GAAM,MAAE5E,CAAI,CAAE,CAAGwE,IACjB,OAAOxE,CACT,CAKO,SAAS6E,IACd,GAAM,iBAAEN,CAAe,CAAE,CAAGC,IAC5B,OAAOD,CACT,CAKO,SAASO,EAAW7E,CAAY,EACrC,IAAMD,EAAO4E,IACb,OAAO5E,GAAMC,OAASA,CACxB,CAKO,SAAS8E,EAAiBC,CAAkB,EACjD,IAAMhF,EAAO4E,IACb,MAAOK,CAAAA,EAAAA,EAAAA,EAAAA,CAAaA,CAACjF,EAAMgF,EAC7B,CAKO,SAASE,IACd,IAAMT,EAAUC,CAAAA,EAAAA,EAAAA,UAAAA,CAAUA,CAAC7C,GAC3B,QAAgBE,IAAZ0C,EACF,KADyB,CACnB,MAAU,kDAIlB,MAAO,CACLrC,QAASqC,EAAQrC,OAAO,CACxBpC,KAAMyE,EAAQzE,IAAI,CAClBsC,UAAWmC,EAAQnC,SAAS,CAC5BO,MAAO,KACPH,eAAgB+B,EAAQ/B,cAAc,CAE1C,0MC5SA,IAAMyC,EAAOC,EAAAA,UAAgB,CAC3B,CAAC,WAAEC,CAAS,CAAE,GAAGC,EAAO,CAAEC,IACxB,UAACC,EAAAA,CAAMA,CAACC,GAAG,EACTF,IAAKA,EACLF,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CACX,2DACAL,GAEFM,WAAY,CACVC,MAAO,KACPC,UACE,8DACJ,EACAC,WAAY,CAAEC,KAAM,SAAUC,UAAW,IAAKC,QAAS,EAAG,EACzD,GAAGX,CAAK,IAIfH,EAAKe,WAAW,CAAG,OAEnB,IAAMC,EAAaf,EAAAA,UAAgB,CAGjC,CAAC,WAAEC,CAAS,CAAE,GAAGC,EAAO,CAAEC,IAC1B,UAACE,MAAAA,CACCF,IAAKA,EACLF,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CAAC,gCAAiCL,GAC9C,GAAGC,CAAK,IAGba,EAAWD,WAAW,CAAG,aAEzB,IAAME,EAAYhB,EAAAA,UAAgB,CAGhC,CAAC,WAAEC,CAAS,CAAE,GAAGC,EAAO,CAAEC,IAC1B,UAACc,KAAAA,CACCd,IAAKA,EACLF,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CACX,qDACAL,GAED,GAAGC,CAAK,IAGbc,EAAUF,WAAW,CAAG,YAExB,IAAMI,EAAkBlB,EAAAA,UAAgB,CAGtC,CAAC,WAAEC,CAAS,CAAE,GAAGC,EAAO,CAAEC,IAC1B,UAACgB,IAAAA,CACChB,IAAKA,EACLF,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CAAC,gCAAiCL,GAC9C,GAAGC,CAAK,IAGbgB,EAAgBJ,WAAW,CAAG,kBAE9B,IAAMM,EAAcpB,EAAAA,UAAgB,CAGlC,CAAC,WAAEC,CAAS,CAAE,GAAGC,EAAO,CAAEC,IAC1B,UAACE,MAAAA,CAAIF,IAAKA,EAAKF,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CAAC,WAAYL,GAAa,GAAGC,CAAK,IAEhEkB,EAAYN,WAAW,CAAG,cAE1B,IAAMO,EAAarB,EAAAA,UAAgB,CAGjC,CAAC,WAAEC,CAAS,CAAE,GAAGC,EAAO,CAAEC,IAC1B,UAACE,MAAAA,CACCF,IAAKA,EACLF,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CAAC,6BAA8BL,GAC3C,GAAGC,CAAK,IAGbmB,EAAWP,WAAW,CAAG,qHC3FzB,MAAuB,eAAmB,SAK1C,cACA,MAAoB,YAAgB,IACpC,kBACA,yBCXA,0FCEA,cACA,MAAsB,QAAY,IAIlC,OAHE,WAAe,MACjB,WACA,CAAG,EACM,SAAa,kCACtB,mICeO,SAASQ,EAAW,CACvB1G,MAAI,WACJqF,EAAY,EAAE,mBACdsB,EAAoB,EAAE,MACtBC,EAAO,IAAI,OACXC,EAAQ,QAAQ,CACF,EAUd,IAAMC,EAAe,CACjBC,OAAQ,eACRC,OAAQ,YACZ,EAcA,MACI,WAACC,EAAAA,EAAMA,CAAAA,CACH5B,UAAW,GA3BC,CAChB6B,GAAI,UACJC,GAAI,YACJC,GAAI,YACJC,GAAI,WACR,CAsBiC,CAACT,EAAK,CAAC,CAAC,EAAEE,CAAY,CAACD,EAAM,CAAC,CAAC,EAAExB,EAAAA,CAAW,WAEpErF,GAAMsH,OACH,UAACC,EAAAA,EAAWA,CAAAA,CACRC,IAAKxH,EAAKsH,MAAM,CAChBG,IAAKzH,GAAM0H,MAAQ,cACnBC,QAAS,IACLxE,QAAQyE,IAAI,CAAC,+BAAgCC,GAE5CA,EAAEC,MAAM,CAAsBC,KAAK,CAACC,OAAO,CAAG,MACnD,IAEJ,KAEJ,UAACC,EAAAA,EAAcA,CAAAA,CAAC5C,UAAW,GAAGyB,CAAY,CAACD,EAAM,CAAC,CAAC,EAAEF,EAAAA,CAAmB,UACnE3G,GAAM0H,KA3BV1H,EA2BiBkI,CA3BXR,CAAP,IAEG1H,CAFU,CAEL0H,IAAI,CACXvG,KAAK,CAAC,KACNgH,GAAG,CAACC,GAAQA,CAAI,CAAC,EAAE,EACnBC,KAAK,CAAC,EAAG,GACTC,IAAI,CAAC,IACLC,WAAW,GAPQ,IA2Bc,UAACC,EAAAA,CAAIA,CAAAA,CAACnD,UAAU,gBAI9D,0EC7EA,qGCAA,+CCAA,uCAAoH,yICSpH,aACA,WACA,CACA,gBCCM,EAAc,SAGd,CAAC,EAAqB,EAAiB,CAAI,OAAkB,CAAC,GAS9D,CAAC,EAAgB,EAAgB,CAAI,EAToC,GAezE,EAAe,MANkB,MAMlB,CACnB,CAAC,EAAiC,KAChC,GAAM,eAAE,EAAe,GAAG,EAAY,CAAI,EACpC,CAAC,EAAoB,EAAqB,CAAU,CADpB,CACoB,SAA6B,MAAM,CAA7C,CAChD,MACE,UAAC,GACC,MAAO,EACP,qBACA,2BAA4B,EAE5B,mBAAC,IAAS,CAAC,KAAV,CAAgB,GAAG,EAAa,IAAK,EAAc,GAG1D,GAGF,EAAO,YAAc,EAMrB,IAAM,EAAa,cAQb,EAAoB,aACxB,CAAC,EAAsC,KACrC,GAAM,eAAE,MAAe,wBAAK,EAAwB,KAAO,CAAD,CAAI,GAAG,EAAW,CAAI,EAC1E,EAAU,EAAiB,EAD2C,GAEtE,EAAqB,QAD+B,CAoErD,CACP,CACA,gBAAE,cAAgB,EAAY,EAC9B,IACM,EDrIC,WCqIY,aAAa,CDrIzB,CAAoB,CAC7B,EACA,OACA,QCmIQ,EAAiB,SAAgC,IAAI,EACrD,EACJ,GACI,CADA,CACU,EAFD,IACI,CACH,EAAS,CACrB,EAAS,QAAU,IAAI,OAAO,OAEzB,EAAS,SAJQ,KAOpB,CAAC,EAAe,EAAgB,CAAU,WAA6B,EAAvC,EACpC,EAAqB,EAAO,GAAG,CA+BjC,MA5BA,OAAe,CAAC,KACd,EAAiB,EAAqB,EAAO,GAAG,CAAC,CAChD,CAAC,EAAO,EAAI,CAAD,CAEd,OAAe,CAAC,KACd,IAAM,EAAgB,GAA+B,KACnD,EAAiB,EACnB,EAEA,EAHyB,CAGrB,CAAC,EAAO,OAEZ,IAAM,EAAa,EAAa,QAAQ,EAClC,EAAc,EAAa,OAAO,EAUxC,OATA,EAAM,iBAAiB,OAAQ,GAC/B,EAAM,KADmC,WACnC,CAAiB,QAAS,GAC5B,IACF,EAAM,EAFmC,QACvB,IACZ,CAAiB,GAEE,UAAvB,OAAO,IACT,EAAM,YAAc,GAGf,KACL,EAAM,oBAAoB,OAAQ,GAClC,EAAM,KADsC,cACtC,CAAoB,QAAS,EACrC,CACF,EAAG,CAAC,EAAO,EAAa,CAF0B,CAEX,EAEhC,CACT,EAlHqD,EAAK,GAChD,EAA4B,KAD8B,CAC9B,CAAc,CAAC,IAC/C,EAAsB,GACtB,EAAQ,CADoB,yBACpB,CAA2B,EACrC,CAAC,EAQD,CAT2C,KAG3C,OAAe,CAAC,KACa,QAAQ,CAA/B,GACF,EAA0B,EAE9B,EAAG,CAAC,EAAoB,EAA0B,EAEpB,OAJkB,IAK9C,YAAC,IAAS,CAAC,IAAV,CAAe,GAAG,EAAY,IAAK,MAAc,EAAU,EAC1D,IACN,GAGF,EAAY,YAAc,EAM1B,IAAM,EAAgB,iBAOhB,EAAuB,aAC3B,CAAC,EAAyC,KACxC,GAAM,eAAE,UAAe,EAAS,GAAG,EAAc,CAAI,EAC/C,EAAU,EAAiB,EAAe,GADC,CAE1C,EAAW,EAAY,CAAU,IADqB,KAC/B,CAAU,CAAqB,MAAS,GAArB,GASjD,OAPM,YAAU,KACd,GAAgB,SAAZ,EAAuB,CACzB,IAAM,EAAU,OAAO,WAAW,IAAM,GAAa,GAAO,CAAH,EACzD,IADmE,EAC5D,IAAM,OAAO,aAAa,EACnC,CACF,EAAG,CAAC,CAFwC,CAEhC,EAEL,GAFI,WAES,EAAQ,mBAC1B,UAAC,IAAS,CAAC,KAAV,CAAgB,GAAG,EAAe,IAAK,EAAc,EACpD,IACN,GAOF,SAAS,EAAqB,EAAgC,GAAkC,OAC9F,EAGK,EAHD,CAMA,EAHM,GAGA,GAAQ,IAChB,CADqB,CACf,IAAM,GAEP,EAAM,UAAY,EAAM,aAAe,EAAI,SAAW,WALpD,QAHA,MASX,CAfA,EAAe,YAAc,EAkE7B,IAAM,EAAO,EACP,EAAQ,EACR,EAAW,gECnKjB,IAAMoD,EAAc,CAChBC,UAAW,YACXC,aAAc,eACdC,cAAe,gBACfC,aAAc,cAClB,EAEIC,EAAQ,EA+BNC,EAAgB,IAAIC,IAEpBC,EAAU,CAACC,EAAcC,KAC3B,OAAQA,EAAOpD,IAAI,EACf,KAAK0C,EAAYC,SAAS,CACtB,MAAO,CACH,GAAGQ,CAAK,CACRE,OAAQ,CAACD,EAAOE,KAAK,IAAKH,EAAME,MAAM,CAAC,CAACf,KAAK,CAAC,EAvD1C,CAuD6CiB,CACrD,CAEJ,MAAKb,EAAYE,YAAY,CACzB,MAAO,CACH,GAAGO,CAAK,CACRE,OAAQF,EAAME,MAAM,CAACjB,GAAG,CAAC,GACrBoB,EAAE3H,EAAE,GAAKuH,EAAOE,KAAK,CAACzH,EAAE,CAAG,CAAE,GAAG2H,CAAC,CAAE,GAAGJ,EAAOE,KAAK,EAAKE,EAE/D,CAEJ,MAAKd,EAAYG,aAAa,CAAE,CAC5B,GAAM,SAAEY,CAAO,CAAE,CAAGL,EAIpB,GAAIK,EACIT,EAAcU,GAAG,CAACD,CADb,IAELE,KAD4B,QACfX,EAAcY,GAAG,CAACH,IAC/BT,EAAca,MAAM,CAACJ,SAGzB,IAAK,GAAM,CAAC5H,EAAIiI,EAAQ,GAAId,EAAce,OAAO,GAAI,aACpCD,GACbd,EAAca,MAAM,CAAChI,GAI7B,MAAO,CACH,GAAGsH,CAAK,CACRE,OAAQF,EAAME,MAAM,CAACjB,GAAG,CAAEoB,GACtBA,EAAE3H,EAAE,GAAK4H,QAAuBzH,IAAZyH,EACd,CACE,GAAGD,CAAC,CACJQ,MAAM,CACV,EACER,EAEd,CACJ,CACA,KAAKd,EAAYI,YAAY,CACzB,QAAuB9G,IAAnBoH,EAAOK,KAAuB,EAAhB,CACd,MAAO,CACH,GAAGN,CAAK,CACRE,OAAQ,EAAE,EAGlB,MAAO,CACH,GAAGF,CAAK,CACRE,OAAQF,EAAME,MAAM,CAACY,MAAM,CAAC,GAAOT,EAAE3H,EAAE,GAAKuH,EAAOK,OAAO,CAC9D,CACR,CACJ,EAEMS,EAA2C,EAAE,CAE/CC,EAAqB,CAAEd,OAAQ,EAAE,EAErC,SAASe,EAAShB,CAAc,EAC5Be,EAAcjB,EAAQiB,EAAaf,GACnCc,EAAUG,OAAO,CAAC,IACdC,EAASH,EACb,EACJ,CAIA,SAASb,EAAM,CAAE,GAAG/D,EAAc,EAC9B,IAAM1D,EAtGCkH,CADPA,EAAQ,CAACA,GAAQ,EAAKwB,OAAOC,SAAAA,EAChBC,QAAQ,GA6GfC,EAAU,IAAMN,EAAS,CAAEpE,KAAM0C,EAAYG,aAAa,CAAEY,QAAS5H,CAAG,GAc9E,OAZAuI,EAAS,CACLpE,KAAM0C,EAAYC,SAAS,CAC3BW,MAAO,CACH,GAAG/D,CAAK,IACR1D,EACAmI,MAAM,EACNW,aAAc,IACN,GAAOD,GACf,CACJ,CACJ,GAEO,IACH7I,UACA6I,EACAE,OAtBYrF,GACZ6E,EAAS,CACLpE,KAAM0C,EAAYE,YAAY,CAC9BU,MAAO,CAAE,GAAG/D,CAAK,IAAE1D,CAAG,CAC1B,EAmBJ,CACJ,CAEA,SAASgJ,IACL,GAAM,CAAC1B,EAAO2B,EAAS,CAAGzF,EAAAA,QAAc,CAAQ8E,GAYhD,OAVA9E,EAAAA,SAAe,CAAC,KACZ6E,EAAUa,IAAI,CAACD,GACR,KACH,IAAME,EAAQd,EAAUe,OAAO,CAACH,GAC5BE,EAAQ,CAAC,GAAG,EACFE,MAAM,CAACF,EAAO,EAEhC,GACD,CAAC7B,EAAM,EAEH,CACH,GAAGA,CAAK,OACRG,EACAoB,QAAS,GAAsBN,EAAS,CAAEpE,KAAM0C,EAAYG,aAAa,CAAEY,SAAQ,EACvF,CACJ,aCnLA,cACA,yCAEA,OADA,0BACA,CACA,CACA,cACA,YACA,WACA,6ICDA,SAAS0B,EAAM,WACb7F,CAAS,CACT,GAAGC,EAC8C,EACjD,MACE,UAAC6F,EAAAA,CAAmB,EAClBC,YAAU,QACV/F,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CACX,sNACAL,GAED,GAAGC,CAAK,EAGf,gFClBE,kBAA6E,yBCH/E,0GCAA,qDCAA,iNCaA,IAAM+F,EAAiBC,CAAAA,EAAAA,EAAAA,CAAAA,CAAGA,CACtB,sDACA,CACIC,SAAU,CACN3E,KAAM,CACFM,GAAI,UACJC,GAAI,YACJC,GAAI,WACR,CACJ,EACAoE,gBAAiB,CACb5E,KAAM,IACV,CACJ,GAGEK,EAAS7B,EAAAA,UAAgB,CAI7B,CAAC,WAAEC,CAAS,MAAEuB,CAAI,CAAE,GAAGtB,EAAO,CAAEC,IAC9B,UAACkG,EAAAA,EAAoB,EACjBlG,IAAKA,EACLF,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CAAC2F,EAAe,MAAEzE,CAAK,GAAIvB,GACvC,GAAGC,CAAK,IAGjB2B,EAAOf,WAAW,CAAGuF,EAAAA,EAAoB,CAACvF,WAAW,CAErD,IAAMqB,EAAcnC,EAAAA,UAAgB,CAGlC,CAAC,WAAEC,CAAS,CAAE,GAAGC,EAAO,CAAEC,IACxB,UAACkG,EAAAA,EAAqB,EAClBlG,IAAKA,EACLF,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CAAC,8BAA+BL,GAC5C,GAAGC,CAAK,IAGjBiC,EAAYrB,WAAW,CAAGuF,EAAAA,EAAqB,CAACvF,WAAW,CAE3D,IAAM+B,EAAiB7C,EAAAA,UAAgB,CAGrC,CAAC,WAAEC,CAAS,CAAE,GAAGC,EAAO,CAAEC,IACxB,UAACkG,EAAAA,EAAwB,EACrBlG,IAAKA,EACLF,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CACT,uEACAL,GAEH,GAAGC,CAAK,IAGjB2C,EAAe/B,WAAW,CAAGuF,EAAAA,EAAwB,CAACvF,WAAW,8CCnEjE,oDCAA,sNCiBM,EAAY,OAGZ,CAAC,EAAmB,EAAe,CAAI,OAAkB,CAAC,EAAW,CACzE,CADuC,CACvC,EAA2B,CAC5B,EACK,EAA2B,QAA2B,CAAC,EAWvD,CAAC,EAAc,EAAc,CAAI,EAAoC,GA6BrE,EAAa,IA7BiE,QA6BjE,CACjB,CAAC,EAA+B,KAC9B,GAAM,aACJ,EACA,MAAO,gBACP,eACA,cACA,EAAc,aACd,qBACA,EAAiB,YACjB,GAAG,EACL,CAAI,EACE,EAAY,QAAY,CAAC,GAAG,CAC3B,EAAO,EAAQ,CAAI,KAAJ,CAAI,CAAoB,CAAC,CAC7C,KAAM,EACN,SAAU,EACV,YAAa,GAAgB,GAC7B,OAAQ,CACV,CAAC,EAED,MACE,UAAC,GACC,MAAO,EACP,OAAQ,OAAK,CAAC,QACd,EACA,cAAe,EACf,cACA,IAAK,iBACL,EAEA,mBAAC,IAAS,CAAC,IAAV,CACC,IAAK,EACL,mBAAkB,EACjB,GAAG,EACJ,IAAK,GACP,EAGN,GAGF,EAAK,YAAc,EAMnB,IAAM,EAAgB,WAOhB,EAAiB,aACrB,CAAC,EAAmC,KAClC,GAAM,aAAE,OAAa,GAAO,EAAM,GAAG,EAAU,CAAI,EAC7C,EAAU,EAAe,CADgB,CACD,GACxC,EAAwB,EAAyB,GACvD,CAFyD,KAGvD,EAFgE,CAEhE,OAAkB,KAAjB,CACC,SAAO,EACN,GAAG,EACJ,YAAa,EAAQ,YACrB,IAAK,EAAQ,SACb,EAEA,mBAAC,IAAS,CAAC,IAAV,CACC,KAAK,UACL,mBAAkB,EAAQ,YACzB,GAAG,EACJ,IAAK,GACP,EAGN,GAGF,EAAS,YAAc,EAMvB,IAAM,EAAe,cAQf,EAAoB,aACxB,CAAC,EAAsC,KACrC,GAAM,aAAE,QAAa,WAAO,GAAW,EAAO,GAAG,EAAa,CAAI,EAC5D,EAAU,EAAe,EAAc,EADiB,CAExD,EAAwB,EAAyB,GACjD,CAFkD,CAEtC,EAAc,EAAQ,EAD0B,IAC1B,CAAQ,GAC1C,EAD+C,EACrB,EAAQ,OAAQ,GAC1C,EAD+C,IACxB,EAAQ,MACrC,MACE,UAAkB,KAAjB,CACC,SAAO,EACN,GAAG,EACJ,UAAW,CAAC,EACZ,OAAQ,EAER,mBAAC,IAAS,CAAC,OAAV,CACC,KAAK,SACL,KAAK,MACL,gBAAe,EACf,gBAAe,EACf,aAAY,EAAa,SAAW,WACpC,gBAAe,EAAW,GAAK,gBAC/B,EACA,GAAI,EACH,GAAG,EACJ,IAAK,EACL,YAAa,OAAoB,CAAC,EAAM,YAAa,IAG/C,GAA8B,IAAjB,EAAM,SAAkC,IAAlB,EAAM,CAAmB,MAAnB,CAI3C,EAAM,eAAe,EAHrB,EAAQ,cAAc,EAK1B,CAAC,EACD,UAAW,OAAoB,CAAC,EAAM,UAAW,IAC3C,CAAC,IAAK,OAAO,EAAE,SAAS,EAAM,GAAG,EAAG,GAAQ,cAAc,EAChE,CAAC,EACD,QAAS,OAAoB,CAAC,EAAM,QAAS,KAG3C,IAAM,EAAmD,WAA3B,EAAQ,eACjC,GAAe,IAAY,GAC9B,EAAQ,EADS,WACT,CAAc,EAE1B,CAAC,CAHwD,CAC1B,CAGjC,EAGN,GAGF,EAAY,YAAc,EAM1B,IAAM,EAAe,cAaf,EAAoB,aACxB,CAAC,EAAsC,KACrC,GAAM,aAAE,QAAa,aAAO,WAAY,EAAU,GAAG,EAAa,CAAI,EAChE,EAAU,EAAe,EAAc,EADqB,CAE5D,EAAY,EAAc,EAAQ,EADgB,IAChB,CAAQ,GAC1C,EAAY,EAAc,EAAQ,OAAQ,GAC1C,EAAa,IAAU,EAAQ,MAC/B,EAAqC,SAAO,GAOlD,OACE,EANI,UAAU,KACd,IAAM,EAAM,sBAAsB,IAAO,EAA6B,QAAU,IAChF,CADsF,KAC/E,IAAM,qBAAqB,EACpC,CADuC,CACpC,CAAC,CAAC,EAGH,UAAC,GAAQ,CAAR,CAAS,QAAS,GAAc,EAC9B,UAAC,SAAE,EAAQ,GACV,UAAC,IAAS,CAAC,IAAV,CACC,aAAY,EAAa,SAAW,WACpC,mBAAkB,EAAQ,YAC1B,KAAK,WACL,kBAAiB,EACjB,OAAQ,CAAC,EACT,GAAI,EACJ,SAAU,EACT,GAAG,EACJ,IAAK,EACL,MAAO,CACL,GAAG,EAAM,MACT,kBAAmB,EAA6B,QAAU,KAAO,MACnE,EAEC,YAAW,GACd,CAEJ,CAEJ,GAOF,SAAS,EAAc,EAAgB,GACrC,MAAO,GAAG,EAAM,WAAY,EAAK,EAGnC,CAHmC,QAG1B,EAAc,EAAgB,GACrC,MAAO,GAAG,EAAM,WAAY,EAAK,EATnC,CASmC,CATvB,YAAc,EAY1B,IAAMwF,EAAO,EACP,EAAO,EACP,EAAU,EACV,EAAU,0BC1RhB,gDCAA,oKCaM,EAAc,aAAqC,CAAC,EAAO,IAE7D,UAAC,IAAS,CAAC,MAAV,CACE,GAAG,EACJ,IAAK,EACL,YAAa,IAEI,EAAM,OACV,QAAQ,iCAAiC,EAAG,EAEvD,EAAM,cAAc,GAEhB,CAAC,CAFoB,CAEd,kBAAoB,EAAM,OAAS,EAAG,GAAM,eAAe,EACxE,KAKN,EAAM,YAxBO,EAwBO,MAIpB,IAAM,EAAO,0BCnCb,0EC2FIC,oFAzEJ,GAAM,CAAEC,MAAOC,CAAS,CAAE,CAAGC,MAGvBC,EAAcC,wBAAoC,CAClDC,EAAkBD,kBAJkBF,yIAIuB,CAC3DI,EAAiBF,QAAQG,GAAG,CAACC,yBAAyB,CAetDC,EAAuDJ,EACzD,CAAEK,OAAQL,CAAgB,OAC1BlK,EAYJ,SAASwK,IAeP,GAAI,CAACR,GAAe,CAACE,EAInB,MAHA9I,QAAQN,CAD4B,IACvB,CACX,2FAEI,MAAU,uCAEpB,CAQmC,CACjC,IAAM2J,EAAIC,WACLD,EAAEE,mBAAmB,EAAE,CAC1BF,EAAEZ,KAAK,CAAGC,EACVW,EAAEE,mBAAmB,EAAG,EAG5B,CAKA,SAASC,UAEP,CADAJ,IACIZ,GACKA,EASTA,EAAwBiB,CAAAA,EAAAA,EAAAA,WAVG,QAUHA,CAAoBA,CAC1Cb,EACAE,EACA,CACEY,OAAQ,CACNC,QAAST,CACX,CACF,EAQJ,CAQO,SAASU,IACd,MAAOC,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,CAACL,EAA0B,EAAE,CAC7C,CAGO,SAASlK,IAEd,OADA8J,IACOK,CAAAA,EAAAA,EAAAA,mBAAAA,CAAoBA,CAAWb,EAAcE,EAAkB,CACpEY,OAAQ,CACNC,QAAST,CACX,CACF,EACF,CAwIO,IAAMY,EAAoBN,EAUTA,uBAVkC,IAUP,CC9RnD,kDCAA,iDCAA,iECAA,+KCcA,IAAMO,EAAW9H,EAAAA,UAAgB,CAC7B,CAAC,CAAEC,WAAS,CAAE,GAAGC,EAAO,CAAEC,IAElB,UAAC4H,WAAAA,CACG9H,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CACT,uSACAL,GAEJE,IAAKA,EACJ,GAAGD,CAAK,IAKzB4H,EAAShH,WAAW,CAAG,wDC5BvB,uDCAA,4DCWA,MAAY,EAAQ,KAAO,EAI3B,UAJmB,IAInB,2BAHA,cACA,2CACA,EAEA,aACA,cACA,oBACA,kBA0BA,cACA,oBACA,UACA,IACA,UACA,aACA,CAAI,SACJ,QACA,CACA,CAIA,MACA,4BACA,0BACA,uCANA,cACA,UACA,EArCA,cACA,UACA,KAA2B,MAAQ,uBAA0C,EAC7E,YACA,OAmBA,OAlBA,EACA,WACA,UACA,gBACA,SAAoD,OAAY,CAChE,CAAK,CACL,SAEA,EACA,WAEA,OADA,SAAoD,OAAY,EAChE,aACA,SAAsD,OAAY,CAClE,CAAO,CACP,CAAK,CACL,KAEA,KACA,CACA,EAoBA,sBAA4B,CAC5B,oIC9DA,EAAiB,iBAAK,4CACtB,IACA,cACA,SAAsB,UAAc,MAIpC,MAHE,OAAe,MACjB,uBACA,CAAG,MACH,eAA2C,EAAG,KAC9C,iDCEM,MAAO,cAAgB,CAAC,MAAQ,EACpC,CAAC,MAAQ,EAAE,EAAG,CAA6C,+CAAK,SAAU,EAC1E,CAAC,QAAU,EAAE,EAAI,MAAM,CAAI,MAAK,CAAG,KAAK,GAAK,UAAU,EACxD,uCChBD,wDCAA,+DCmBI,sBAAsB,wlBAX1B,IAAM,EAAqB,CAAE,GAAG,CAAU,CAAE,CAEtC,EACJ,OAHsB,UAEC,KACD,GAAI,EACtB,EAAmB,gBAAD,IAAC,CACnB,qBAAqB,GAAI,EACvB,EAAmB,gBAAD,GAAC,MACnB,EASN,EAJ6B,KALd,KAKwB,EAArC,OAAO,CAIa,CAAG,IAAI,KAAK,CAAC,EAAiB,CAClD,KAAK,CAAE,CAAC,EAAkB,EAAS,CADa,GACT,CAAN,IAAW,EAEtC,CAFkB,CAGlB,EAGJ,GAAI,CACF,CAJS,GAIH,CALS,CAKW,CANP,CACD,CAK6B,CANzB,GAED,IADM,EAK8B,CACzD,CADuB,CACH,GADyB,OACC,CAAC,GAAG,CAAjC,EAAoB,YAA4B,CAAC,OAAI,EACtE,EAAgB,GAAmB,EAD4C,KACrC,CAA7B,GAAiC,CAAC,EAAd,OAAuB,CAAC,OAAI,EAC7D,EAAU,GAAmB,EAAtB,KAA6B,CACrC,MAD4B,CACnB,CAAE,CAElB,CAEM,OAAO,+BAAoC,CAAC,EAAkB,CAC5D,aAD0D,CAC5C,CAAE,0BAA0B,CAC1C,aAAa,CAAE,MAAM,mBACrB,gBACA,CADiB,SAEjB,CACR,CAAO,CAFc,CAEZ,GADM,EACD,CAAC,EAAS,EACxB,CAAK,CADuB,CAAN,CA7BEkH,EAoCnB,IAAC,OAOF,EAEE,EAOF,KAhBkB,EAkBhB,OAOF,EAEE,EAA2B,CAlBN,IASL,iBASQ,IChF9B,qECAA,qDCAA,oICwBA,EAnBA,CACA,IACA,SACA,MACA,OACA,KACA,KACA,MACA,QACA,QACA,KACA,MACA,KACA,IACA,SACA,OACA,MACA,KACA,CACA,eACA,MAAe,QAAU,cAAc,EAAK,GAC5C,EAAe,YAAgB,SAC/B,YAAY,QAA6B,EAKzC,MAHA,4BACA,oCAE2B,SAAG,CAJ9B,MAI8B,CAAS,WAAsC,CAC7E,CAAG,EAEH,OADA,2BAAkC,EAAK,EACvC,CAAW,WACX,CAAC,GAAI,EACL,gBACA,GAAc,WAAkB,wBAChC,0BCvCA,yDCAA,6NCaM,EAAc,gCACd,EAAgB,CAAE,SAAS,EAAO,YAAY,CAAK,EAMnD,EAAa,mBAGb,CAAC,EAAY,EAAe,EAAqB,CAAI,OAAgB,CAGzE,GAGI,CAAC,EAA+B,EAA2B,CAAI,OAAkB,CACrF,EACA,CAAC,EAAqB,EA+BlB,CAAC,EAAqB,EAAqB,CAC/C,EAAkD,CAlCa,EAuC3D,EAAyB,IArCP,CAgCsC,MADb,CAMlB,CAC7B,CAAC,EAA2C,IAExC,UAAC,EAAW,SAAX,CAAoB,MAAO,EAAM,wBAChC,mBAAC,EAAW,KAAX,CAAgB,MAAO,EAAM,wBAC5B,mBAAC,GAAsB,GAAG,EAAO,IAAK,EAAc,EACtD,EACF,EAKN,GAAiB,YAAc,EAgB/B,IAAM,EAA6B,aAGjC,CAAC,EAA+C,KAChD,GAAM,yBACJ,cACA,OACA,GAAO,MACP,EACA,iBAAkB,0BAClB,2BACA,eACA,4BACA,GAA4B,EAC5B,GAAG,EACL,CAAI,EACE,EAAY,SAAoC,IAAI,EACpD,EAAe,OAAe,CAAC,EAAc,GAAG,EACpC,QAAY,CAAC,GAAG,CAC3B,EAAkB,EAAmB,CAAI,OAAoB,CAAC,CACnE,KAAM,EADoC,YAE7B,GAA2B,KACxC,SAAU,EACV,OAAQ,CACV,CAAC,EACK,CAAC,EAAkB,EAAmB,CAAU,YAAS,GACzD,CADsC,CAAwB,CAC3C,MAAc,CAAC,GAClC,EAAW,EAAc,GACzB,EAF8C,EAEtB,OAAO,IAC/B,CAAC,EAAqB,EAAsB,CAAU,WAAS,CAAC,EAUtE,KAVkD,EAE5C,YAAU,KACd,IAAM,EAAO,EAAI,QACjB,GAAI,EAEF,IAFQ,GACR,EAAK,iBAAiB,EAAa,GAC5B,IAAM,EAAK,OADiC,YACjC,CAAoB,EAAa,EAEvD,EAAG,CAAC,EAAiB,EAGnB,OALqE,CAKrE,EAAC,GACC,MAAO,cACP,EACA,IAAK,OACL,mBACA,EACA,YAAmB,cACjB,GAAe,EAAoB,GACnC,CAAC,EAAmB,EAEtB,CAH8C,cACxB,EAEA,YAAY,IAAM,GAAoB,GAAO,CAAH,CAAK,EACrE,mBAA0B,cACxB,IAAM,EAAuB,GAAe,EAAY,CAAC,EACzD,CAAC,GAEH,sBAA6B,cAC3B,IAAM,EAAuB,GAAe,EAAY,CAAC,EACzD,CAAC,GAGH,mBAAC,IAAS,CAAC,IAAV,CACC,SAAU,GAA4C,IAAxB,EAA4B,GAAK,EAC/D,mBAAkB,EACjB,GAAG,EACJ,IAAK,EACL,MAAO,CAAE,QAAS,OAAQ,GAAG,EAAM,OACnC,YAAa,OAAoB,CAAC,EAAM,YAAa,KACnD,EAAgB,SAAU,CAC5B,CAAC,EACD,QAAS,OAAoB,CAAC,EAAM,QAAS,IAK3C,IAAM,EAAkB,CAAC,EAAgB,QAEzC,GAAI,EAAM,SAAW,EAAM,eAAiB,GAAmB,CAAC,EAAkB,CAChF,IAAM,EAAkB,IAAI,YAAY,EAAa,GAGrD,GAFA,EAAM,KAD4D,QAC5D,CAAc,cAAc,GAE9B,CAAC,EAAgB,SAF4B,OAE5B,CAAkB,CACrC,IAAM,EAAQ,IAAW,KAAF,CAAE,CAAQ,GAAS,EAAK,SAAS,EAOxD,EAJuB,CAFJ,EAAM,KAAK,CAMnB,EAN6B,EAAK,MAAM,EAC/B,EAAM,KAAK,GAAU,EAAK,KAAO,MACD,EAAK,CAAE,EAAF,IAAE,CADU,SAI/B,IAAI,GAAU,EAAK,IAAI,OAAQ,EAC1C,EAC7B,CACF,CAEA,EAAgB,SAAU,CAC5B,CAAC,EACD,MAN0D,CAMlD,OAAoB,CAAC,EAAM,OAAQ,IAAM,GAAoB,GAAM,EAAD,CAAC,CAInF,CAAC,EAMK,EAAY,uBAaZ,EAA6B,aACjC,CAAC,EAA0C,KACzC,GAAM,yBACJ,YACA,GAAY,EACZ,UAAS,YACT,WACA,EACA,GAAG,EACL,CAAI,EACE,EAAS,OAAK,CAAC,EACf,EAAK,GAAa,EAClB,EAAU,EAAsB,EAAW,GAC3C,EAAmB,EAAQ,gBADuC,GAClB,EAChD,EAAW,EAAc,GAEzB,oBAFgD,CAE9C,uBAAoB,mBAAuB,EAAiB,CAAI,EASxE,OAPM,YAAU,KACd,GAAI,EAEF,OADA,EADa,EAEN,IAAM,GAEjB,EAAG,CAAC,EAAW,EAAoB,CAHZ,CAGkC,EAGvD,UAAC,EAAW,KAH0C,GAG1C,CAAX,CACC,MAAO,KACP,EACA,YACA,SAEA,mBAAC,IAAS,CAAC,KAAV,CACC,SAAU,EAAmB,EAAI,GACjC,mBAAkB,EAAQ,YACzB,GAAG,EACJ,IAAK,EACL,YAAa,OAAoB,CAAC,EAAM,YAAa,IAG9C,EAEA,EAAQ,MAFG,KAEH,CAAY,EAAE,CAFX,EAAM,eAAe,CAGvC,CAAC,EACD,QAAS,OAAoB,CAAC,EAAM,QAAS,IAAM,EAAQ,YAAY,EAAE,CAAC,CAC1E,UAAW,OAAoB,CAAC,EAAM,UAAW,IAC/C,GAAkB,QAAd,EAAM,KAAiB,EAAM,SAAU,YACzC,EAAQ,eAAe,EAIzB,GAAI,EAAM,SAAW,EAAM,cAAe,OAE1C,IAAM,EAAc,SAqDvB,CAAe,CAA4B,EAA2B,GAAiB,MAC9F,IAAM,GARsB,EAQK,CAArB,CAA2B,CARE,EAQF,CAP3B,EAD8C,IACvC,EAOyB,EAPlB,CAOqB,CANhC,cAAR,EAAsB,aAAuB,eAAR,EAAuB,YAAc,GAOjF,KAAoB,aAAhB,GAA8B,CAAC,YAAa,YAAY,EAAE,SAAS,EAAG,EAAG,EACzE,CAAgB,KADgE,aAChD,CAAC,UAAW,WAAW,EAAE,SAAS,EAAG,EAAG,OACrE,CAD4E,CACpD,EACjC,CADoC,CAzDW,EAAO,EAAQ,YAAa,EAAQ,GAAG,EAE1E,GAAoB,SAAhB,EAA2B,CAC7B,GAAI,EAAM,SAAW,EAAM,SAAW,EAAM,QAAU,EAAM,SAAU,OACtE,EAAM,eAAe,EAErB,IAAI,EADU,IAAW,KAAF,CAAE,CAAQ,GAAS,EAAK,SAAS,EAC7B,IAAI,GAAU,EAAK,IAAI,OAAQ,EAE1D,GAAoB,OAAQ,EAAxB,EAAwB,EAAe,QAAQ,UAC1B,SAAhB,GAA0C,SAAhB,EAAwB,CACrC,OAAQ,OAAe,QAAQ,EACnD,IAAM,EAAe,EAAe,QAAQ,EAAM,aAAa,EAC/D,EAAiB,EAAQ,KACrB,SA6DX,CAAa,CAAY,GAAoB,OAC7C,EAAM,IAAO,CAAC,EAAG,IAAU,GAAO,EAAa,GAAS,EAAM,MAAM,CAAE,CAC/E,EA/D8B,EAAgB,EAAe,CAAC,EAC1C,EAAe,MAAM,EAAe,CAAC,CAC3C,CAMA,WAAW,IAAM,EAAW,GAC9B,CACF,CAAC,EAEA,OAJ6C,CAAC,CAI1B,YAApB,OAAO,EACJ,EAAS,kBAAE,EAAkB,WAAgC,MAApB,CAAyB,CAAC,EACnE,GACN,EAGN,GAGF,EAAqB,YAAc,EAKnC,IAAM,EAAuD,CAC3D,UAAW,OAAQ,QAAS,OAC5B,WAAY,OAAQ,UAAW,OAC/B,OAAQ,QAAS,KAAM,QACvB,SAAU,OAAQ,IAAK,MACzB,EAgBA,SAAS,EAAW,EAA2B,GAAgB,GAAO,IAC9D,EAA6B,SAAS,cAC5C,QAAW,KAAa,EAEtB,GAAI,IAAc,EAFgB,EAGlC,EAAU,MAAM,eAAE,CAAc,CAAC,EAC7B,SAAS,gBAAkB,GAFe,MAIlD,CAUA,IAAM,EAAO,EACP,EAAO,OAbkD,uDEvUxD,OAAMC,UAAkB1I,MAK7B2I,YAAYC,CAAe,CAAEC,CAAY,CAAEC,CAAqB,CAAEC,CAAe,CAAE,CACjF,KAAK,CAACH,GACN,IAAI,CAAC7F,IAAI,CAAG,YACZ,IAAI,CAAC8F,IAAI,CAAGA,EACZ,IAAI,CAACE,MAAM,CAAGA,EACd,IAAI,CAACD,aAAa,CAAGA,CACvB,CAKAE,QAAS,CACP,MAAO,CACLjG,KAAM,IAAI,CAACA,IAAI,CACf6F,QAAS,IAAI,CAACA,OAAO,CACrBC,KAAM,IAAI,CAACA,IAAI,CACfE,OAAQ,IAAI,CAACA,MAAM,CAEvB,CAKAE,YAAa,CACX,OAAO,IAAIC,SACTC,KAAKC,SAAS,CAAC,CACblL,MAAO,CACL0K,QAAS,IAAI,CAACA,OAAO,CACrBC,KAAM,IAAI,CAACA,IAAI,CAEnB,GACA,CACEE,OAAQ,IAAI,CAACA,MAAM,EAAI,IACvBZ,QAAS,CACP,eAAgB,kBAClB,CACF,EAEJ,CACF,CAKO,MAAMkB,UAA0BX,EACrCC,YAAYC,EAAU,yBAAyB,CAAEE,CAAqB,CAAE,CACtE,KAAK,CAACF,EAAS,oBAAqBE,EAAe,KACnD,IAAI,CAAC/F,IAAI,CAAG,mBACd,CACF,CAKO,MAAMuG,UAAuBZ,EAClCC,YAAYC,EAAU,0BAA0B,CAAEE,CAAqB,CAAE,CACvE,KAAK,CAACF,EAAS,iBAAkBE,EAAe,KAChD,IAAI,CAAC/F,IAAI,CAAG,gBACd,CACF,CAKO,MAAMwG,UAAqBb,EAChCC,YAAYC,EAAU,eAAe,CAAEE,CAAqB,CAAE,CAC5D,KAAK,CAACF,EAAS,qBAAsBE,EAAe,KACpD,IAAI,CAAC/F,IAAI,CAAG,cACd,CACF,CAKO,MAAMyG,UAAgCd,EAC3CC,YAAYC,EAAU,qBAAqB,CAAEE,CAAqB,CAAE,CAClE,KAAK,CAACF,EAAS,2BAA4BE,EAAe,KAC1D,IAAI,CAAC/F,IAAI,CAAG,yBACd,CACF,CAKO,MAAM0G,UAA2Bf,EACtCC,YAAYC,EAAU,uBAAuB,CAAEE,CAAqB,CAAE,CACpE,KAAK,CAACF,EAAS,6BAA8BE,EAAe,KAC5D,IAAI,CAAC/F,IAAI,CAAG,oBACd,CACF,CCpCA,IAAM2G,EAAkC,CACtCC,MAAO,CAAC,EACRC,eAAgB,QAChBC,aAAa,CACf,CAYO,OAAMC,EAOXnB,YAAYhK,EAAuB,CAAC,CAAC,CAAE,MAF/BoL,eAAAA,CAAgD,IAAI1F,IAG1D,IAAM2F,EAAS,CAAE,GAAGN,CAAkB,CAAE,GAAG/K,CAAQ,EACnD,IAAI,CAACgL,KAAK,CAAGK,EAAOL,KAAK,EAAI,CAAC,EAC9B,IAAI,CAACC,cAAc,CAAGI,EAAOJ,cAAc,EAAI,QAC/C,IAAI,CAACC,WAAW,CAAGG,EAAOH,WAAW,GAAI,EACzC,IAAI,CAACI,YAAY,CACfD,EAAOC,YAAY,EAClB,IACQ,CAAC5O,EAAKC,IAAI,EAAI,OAAO,CAElC,CAKA4O,WAAW5O,CAAU,CAAQ,CAC3B,IAAI,CAACqO,KAAK,CAACrO,EAAKyH,IAAI,CAAC,CAAGzH,EAGpB,IAAI,CAACuO,WAAW,EAAE,IAChB,CAACE,eAAe,CAACI,KAAK,EAE9B,CAKAC,YAAYT,CAA2B,CAAQ,CAC7C,IAAI,CAACA,KAAK,CAAG,CAAE,GAAG,IAAI,CAACA,KAAK,CAAE,GAAGA,CAAK,EAGlC,IAAI,CAACE,WAAW,EAClB,IAAI,CAACE,eAAe,CAACI,KAAK,EAE9B,CAKA,mBACEE,CAAgB,CAChBC,EAAuB,IAAIC,GAAK,CACf,CAEjB,GAAID,EAAQxF,GAAG,CAACuF,GACd,OAAO,CADkB,GACdE,IAIbD,EAAQE,GAAG,CAACH,GAGZ,IAAM/O,EAAO,IAAI,CAACqO,KAAK,CAACU,EAAS,CACjC,GAAI,CAAC/O,EACH,IADS,GACF,IAAIiP,IAIb,IAAME,EAAc,IAAIF,IAAIjP,EAAKmP,WAAW,EAG5C,GAAInP,EAAKoP,QAAQ,EAAIpP,EAAKoP,QAAQ,CAACC,MAAM,CAAG,EAC1C,CAD6C,GACxC,IAAMC,KAActP,EAAKoP,QAAQ,CACV,IAAI,CAACG,kBAAkB,CAACD,EAAYN,GAC5C7E,OAAO,CAAC,GAAgBgF,EAAYD,GAAG,CAACnK,IAI9D,OAAOoK,CACT,CAKAK,mBAAmBzP,CAAyB,CAAmB,CAC7D,GAAI,CAACA,EACH,IADS,GACF,IAAIkP,IAIb,IAAMQ,EAAY,IAAI,CAACd,YAAY,CAAC5O,GAGpC,GAAI0P,EAAUC,QAAQ,CAAC,IAAI,CAACpB,cAAc,EACxC,CAD2C,MACpC,IAAIW,IAAI,CAAC,IAAI,EAItB,CAJyB,EAIrB,IAAI,CAACV,WAAW,CAAE,CACpB,IAAMoB,EAAWF,EAAUG,IAAI,GAAGvH,IAAI,CAAC,KACjCwH,EANgE,IAMxC,CAACpB,eAAe,CAAC/E,GAAG,CAACiG,GAEnD,GAAIE,EACF,OAAOA,CAEX,CAGA,IAAMC,EAAiB,EANE,EAMEb,IAC3B,IAAK,IAAMF,KAAYU,EACG,IAAI,CAACF,GADG,eACe,CAACR,GAChC5E,OAAO,CAAC,GAAgB2F,EAAeZ,GAAG,CAACnK,IAI7D,GAAI,IAAI,CAACwJ,WAAW,EAAIkB,EAAUJ,MAAM,CAAG,EAAG,CAC5C,IAAMM,EAAWF,EAAUG,IAAI,GAAGvH,IAAI,CAAC,KACvC,IAAI,CAACoG,eAAe,CAACsB,GAAG,CAACJ,EAAUG,EACrC,CAEA,OAAOA,CACT,CAKAE,QAAQjQ,CAAyB,CAAEgP,CAAgB,CAAW,CAC5D,GAAI,CAAChP,EAAM,OAAO,EAElB,IAAM0P,EAAY,IAAI,CAACd,YAAY,CAAC5O,GACpC,OACE0P,EAAUC,QAAQ,CAACX,IAAaU,EAAUC,QAAQ,CAAC,IAAI,CAACpB,cAAc,CAE1E,CAKAtJ,cAAcjF,CAAyB,CAAEgF,CAAsB,CAAW,CACxE,GAAI,CAAChF,EAAM,MAAO,GAGlB,IAAMoP,EAAc,IAAI,CAACK,kBAAkB,CAACzP,GAG5C,GAAIoP,EAAY3F,GAAG,CAAC,MAGhB2F,EAAY3F,GAAG,CAACzE,GAHM,OAAO,EAMjC,CAHiC,GAG3BkL,EAAQlL,EAH0B,KAGV,CAAC,KAC/B,IAAK,IAAImL,EAAI,EAAGA,GAAKD,EAAMZ,MAAM,CAAEa,IAAK,CACtC,IAAMC,EAAqB,IAAIF,EAAM7H,KAAK,CAAC,EAAG8H,GAAI,IAAI,CAAC7H,IAAI,CAAC,KAC5D,GAAI8G,EAAY3F,GAAG,CAAC2G,GAAqB,OAAO,CAClD,CAEA,OAAO,CACT,CAKAC,iBACErQ,CAAyB,CACzBoP,CAAyB,CAChB,CACT,OAAOA,EAAYkB,IAAI,CAAC,GACtB,IAAI,CAACrL,aAAa,CAACjF,EAAMgF,GAE7B,CAKAuL,kBACEvQ,CAAyB,CACzBoP,CAAyB,CAChB,CACT,OAAOA,EAAYoB,KAAK,CAAExL,GACxB,IAAI,CAACC,aAAa,CAACjF,EAAMgF,GAE7B,CAKAyL,kBAAkBzQ,CAAyB,CAAEgF,CAAsB,CAAQ,CACzE,GAAI,CAAC,IAAI,CAACC,aAAa,CAACjF,EAAMgF,GAC5B,MAAM,IADmC,EAChB,CAAC,WAAFiJ,kBAA+B,EAAEjJ,EAAAA,CAAY,CAEzE,CAKA0L,qBACE1Q,CAAyB,CACzBoP,CAAyB,CACnB,CACN,GAAI,CAAC,IAAI,CAACiB,gBAAgB,CAACrQ,EAAMoP,GAC/B,MAAM,IAAInB,CADmC,CAE3C,CAAC,WADqBA,uCAC6B,EAAEmB,EAAY9G,IAAI,CAAC,OAAO,CAGnF,CAKAqI,sBACE3Q,CAAyB,CACzBoP,CAAyB,CACnB,CACN,GAAI,CAAC,IAAI,CAACmB,iBAAiB,CAACvQ,EAAMoP,GAChC,MAAM,IAAInB,CADoC,CAE5C,CAAC,WADqBA,+BACqB,EAAEmB,EAAY9G,IAAI,CAAC,OAAO,CAG3E,CAKAsI,iBAAiBC,CAAgB,CAAE1H,CAAc,CAAc,CAC7D,MAAO,GAAG0H,EAAS,CAAC,EAAE1H,EAAAA,CAAQ,CAElC,CAGA,IAAI2H,EAAkC,KAsB/B,SAAS7L,EACdjF,CAAyB,CACzBgF,CAAsB,QAEtB,MAAO+L,CApBH,IACFD,EAAc,IAAIrC,GADF,IADWnL,EAEGA,EAEzBwN,CAFyBxN,EAmBR2B,aAAa,CAACjF,EAAMgF,EAC9C,0BC7UA,0YCkBA,OACA,UACA,GACA,CACA,UACA,kBACA,CACA,UACA,UACA,CACA,uBAAiC,EACjC,MApBA,IAAoB,uCAAoH,CAoBxI,mFAES,EACF,CACP,CAGA,EACA,CACO,CACP,CACA,QAlCA,IAAsB,uCAA6G,CAkCnI,4EACA,WAlCA,IAAsB,4CAAgF,CAkCtG,+CACA,cAlCA,IAAsB,4CAAmF,CAkCzG,mDAGA,CACO,CACP,CACA,QAhDA,IAAsB,uCAA4F,CAgDlH,2DACA,OAhDA,IAAsB,uCAA2F,CAgDjH,0DACA,gBAhDA,IAAsB,uCAAkG,CAgDxH,iEACA,aAhDA,IAAsB,uCAA+F,CAgDrH,8DACA,WAhDA,IAAsB,4CAAgF,CAgDtG,+CACA,cAhDA,IAAsB,4CAAmF,CAgDzG,mDAGA,CACO,UACP,sFAOO,GACP,QAH6B,EAI7B,UAHA,OADgD,KAChD,SAIA,EAKO,MAAwB,oBAAkB,EACjD,YACA,KAAc,WAAS,UACvB,qCACA,oBAEA,cACA,YACA,WACA,CAAK,CACL,UACA,YACA,CACA,CAAC,oCZnEG,sBAAsB,yHAX1B,IAAM,EAAqB,CAAE,GAAG,CAAU,CAAE,CAEtC,EACJ,OAHsB,UAEC,KACD,GAAI,EACtB,EAAmB,gBAAD,IAAC,CACnB,qBAAqB,GAAI,EACvB,EAAmB,gBAAD,GAAC,CACnB,OASN,EATe,IASc,KAAK,CatBrB,SAASgM,CbsBA,KAA4B,IarBlD/O,CAAQ,CAGT,EACC,KALsB+O,CAMpBC,CAAAA,EAAAA,EAAAA,GAAAA,CAAA,CAAAC,EAAAA,QAAA,EACGjP,QAAAA,CAAAA,GAGP,EbYsD,CAClD,KAAK,CAAE,CAAC,EAAkB,EAAS,IAAI,CAAN,IAAW,EAEtC,CAFkB,CAGlB,EAGJ,GAAI,CACF,CAJS,GAIH,CALS,CAKW,CANP,CACD,CAK6B,CANzB,GAED,IAIkC,EANxB,CAO/B,CADuB,CACH,GADyB,OACC,CAAC,GAAG,CAAC,EAAd,YAA4B,CAAC,OAAI,EACtE,EAAgB,GAAmB,EAD4C,KACrC,CAA7B,GAAiC,CAAC,EAAd,OAAuB,CAAC,OAAI,EAC7D,EAAU,GAAmB,EADyC,KAE9E,CAAO,MAAQ,CAAC,CAAE,CAElB,CAEM,OAAO,+BAAoC,CAAC,EAAkB,CAC5D,aAD0D,CAC5C,CAAE,kBAAkB,CAClC,aAAa,CAAE,QAAQ,mBACvB,gBACA,CADiB,CAEjB,OAAO,EACf,CAAO,CAAC,CAAC,KAAK,CAAC,EAAS,EACxB,CAAK,CADuB,CAAN,CAOjB,IAAC,OAOF,EAEE,OAOF,EAEE,OAOF,EAEE,EAA2B,CAlBN,IASL,iBASQ,IchF9B,qDCAA,4DCAA,kDCAA,wDCAA,iECAA,sNCOA,SAASkP,EAAK,WACZ9L,CAAS,CACT,GAAGC,EAC6C,EAChD,MACE,UAAC8L,EAAAA,EAAkB,EACjBhG,YAAU,OACV/F,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CAAC,sBAAuBL,GACpC,GAAGC,CAAK,EAGf,CAEA,SAAS+L,EAAS,CAChBhM,WAAS,CACT,GAAGC,EAC6C,EAChD,MACE,UAAC8L,EAAAA,EAAkB,EACjBhG,YAAU,YACV/F,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CACX,sGACAL,GAED,GAAGC,CAAK,EAGf,CAEA,SAASgM,EAAY,WACnBjM,CAAS,CACT,GAAGC,EACgD,EACnD,MACE,UAAC8L,EAAAA,EAAqB,EACpBhG,YAAU,eACV/F,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CACX,kqBACAL,GAED,GAAGC,CAAK,EAGf,CAEA,SAASiM,EAAY,WACnBlM,CAAS,CACT,GAAGC,EACgD,EACnD,MACE,UAAC8L,EAAAA,EAAqB,EACpBhG,YAAU,eACV/F,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CAAC,sBAAuBL,GACpC,GAAGC,CAAK,EAGf,0EC/DA,sDCAA,kDCAA,uCAAoH,uHCIpH,SAASkM,EAAM,WAAEnM,CAAS,MAAEU,CAAI,CAAE,GAAGT,EAAsC,EACzE,MACE,UAACmM,QAAAA,CACC1L,KAAMA,EACNqF,YAAU,QACV/F,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,CAAEA,CACX,kcACA,gFACA,yGACAL,GAED,GAAGC,CAAK,EAGf,0EClBA,oDCAA,iDCAA,2DCAA,0DCAA,0ECaM,MAAM,cAAgB,CAAC,KAAO,EAClC,CAAC,QAAU,EAAE,EAAI,OAAO,CAAI,SAAQ,CAAG,OAAO,GAAK,UAAU,EAC7D,CAAC,MAAQ,EAAE,EAAG,CAAiB,mBAAK,SAAU,EAC9C,CAAC,MAAQ,EAAE,EAAG,CAA2B,6BAAK,SAAU,EACzD,iDCJK,MAAS,cAAgB,CAAC,QAAU,EACxC,CACE,OACA,CACE,CAAG,8FACH,GAAK,SACP,EACF,CACA,CAAC,QAAU,EAAE,EAAI,MAAM,CAAI,OAAM,CAAG,KAAK,GAAK,UAAU,EACzD,iRCEc,SAASoM,IACtB,GAAM,MAAE1R,CAAI,CAAE,CAAGwE,CAAAA,EAAAA,EAAAA,OAAAA,CAAOA,GAClB,OAAE6E,CAAK,CAAE,CAAGuB,CAAAA,EAAAA,EAAAA,CAAAA,CAAQA,GACpBpI,EAAWmP,CAAAA,EAAAA,EAAAA,mBAAAA,CAAmBA,CAClC3F,wBAAoC,CACpCA,2JAAyC,EAErC,CAAC1J,EAAWC,EAAa,CAAGJ,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,EAAC,GACrC,CAACf,EAAWwQ,EAAa,CAAGzP,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,CACxCnC,GAAME,eAAemB,YAEjB,CAACwQ,EAAUC,EAAY,CAAG3P,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,CAAC,CACvCuF,KAAM1H,GAAME,eAAewH,MAAQ,GACnCxG,MAAOlB,GAAMkB,OAAS,GACtB6Q,IAAK/R,GAAME,eAAe6R,KAAO,GACjCC,gBAAiB,GACjBC,YAAa,GACbC,gBAAiB,EACnB,GAoCMC,EAAoB,IAGxBL,EAAY,GAAW,EACrB,EADqB,CAClBM,CAAI,CACP,CAACvK,EAAEC,MAAM,CAAClG,EAAE,CAAC,CAAEiG,EAAEC,MAAM,CAACxD,KAAK,CAC/B,EACF,EAEM+N,EAAsB,MAAOxK,IACjCA,EAAEyK,cAAc,GAChB/P,GAAa,GAEb,GAAI,CACF,GAAM,OAAEM,CAAK,CAAE,CAAG,MAAML,EAASO,IAAI,CAACqB,UAAU,CAAC,CAC/CxB,KAAM,CACJ8E,KAAMmK,EAASnK,IAAI,CACnBqK,IAAKF,EAASE,GAAG,CAErB,GAEA,GAAIlP,EAAO,MAAMA,EAEjBwG,EAAM,CACJkJ,MAAO,UACPC,YAAa,8BACf,EACF,CAAE,MAAO3P,EAAO,CACdwG,EAAM,CACJoJ,QAAS,cACTF,MAAO,QACPC,YAAa,0BACf,EACF,QAAU,CACRjQ,GAAa,EACf,CACF,EAEMmQ,EAAuB,MAAO7K,IAIlC,GAHAA,EAAEyK,cAAc,GAChB/P,EAAa,IAETsP,EAASI,WAAW,GAAKJ,EAASK,eAAe,CAAE,CACrD7I,EAAM,CACJoJ,QAAS,cACTF,MAAO,QACPC,YAAa,4BACf,GACAjQ,GAAa,GACb,MACF,CAEA,GAAI,CACF,GAAM,OAAEM,CAAK,CAAE,CAAG,MAAML,EAASO,IAAI,CAACqB,UAAU,CAAC,CAC/Cb,SAAUsO,EAASI,WAAW,GAGhC,GAAIpP,EAAO,MAAMA,EAEjBwG,EAAM,CACJkJ,MAAO,UACPC,YAAa,+BACf,GAGAV,EAAaM,GAAU,EACrB,EADqB,CAClBA,CAAI,CACPJ,gBAAiB,GACjBC,YAAa,GACbC,gBAAiB,GACnB,EACF,CAAE,MAAOrP,EAAO,CACdwG,EAAM,CACJoJ,QAAS,cACTF,MAAO,QACPC,YAAa,2BACf,EACF,QAAU,CACRjQ,EAAa,GACf,CACF,EAEMoQ,EAAqB,MAAO9K,IAChC,IAAM+K,EAAO/K,EAAEC,MAAM,CAAC+K,KAAK,EAAE,CAAC,EAAE,CAChC,GAAI,GAAU7S,EAEd,GAFa,CAAO,EAGL,IAGb,IAAM8S,EAAY,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,CAAYA,CAACvQ,EAAUoQ,EAAM5S,EAAK4B,EAAE,CAG5D,OAAMoR,CAAAA,EAAAA,EAAAA,EAAAA,CAAgBA,CAACxQ,EAAUxC,EAAK4B,EAAE,CAAEkR,GAG1C,GAAM,CAAEjQ,MAAOoQ,CAAW,CAAE,CAAG,MAAMzQ,EAASO,IAAI,CAACqB,UAAU,CAAC,CAC5DxB,KAAM,CAAEvB,WAAYyR,CAAU,CAChC,GAEA,GAAIG,EAAa,MAAMA,EAGvBrB,EAAakB,GAEbzJ,EAAM,CACJkJ,MAAO,UACPC,YAAa,sCACf,EACF,CAAE,MAAO3P,EAAO,CACdM,QAAQN,KAAK,CAAC,uBAAwBA,GACtCwG,EAAM,CACJoJ,QAAS,cACTF,MAAO,QACPC,YAAa,kCACf,EACF,QAAU,CACRjQ,GAAa,EACf,CACF,EAEA,MACE,WAACkD,MAAAA,CAAIJ,UAAU,qCACb,UAAC6N,KAAAA,CAAG7N,UAAU,mCAA0B,qBAExC,WAAC8L,EAAAA,IAAIA,CAAAA,CAACgC,aAAa,UAAU9N,UAAU,mBACrC,WAACgM,EAAAA,QAAQA,CAAAA,CAAChM,UAAU,iBAClB,UAACiM,EAAAA,WAAWA,CAAAA,CAAChN,MAAM,mBAAU,YAC7B,UAACgN,EAAAA,WAAWA,CAAAA,CAAChN,MAAM,oBAAW,gBAGhC,UAACiN,EAAAA,WAAWA,CAAAA,CAACjN,MAAM,mBACjB,UAACa,EAAAA,EAAIA,CAAAA,CAACE,UAAU,eACd,WAAC+N,OAAAA,CAAKC,SAAUhB,EAAqBhN,UAAU,uBAE7C,WAACI,MAAAA,CAAIJ,UAAU,oCACb,WAACI,MAAAA,CAAIJ,UAAU,qBACb,UAACqB,EAAAA,CAAUA,CAAAA,CACT1G,KAAM,CACJ0H,KAAMmK,EAASnK,IAAI,CACnBxG,MAAO2Q,EAAS3Q,KAAK,CACrBoG,OAAQlG,CACV,EACAwF,KAAK,KACLC,MAAM,SACNxB,UAAU,uDAEZ,UAACiO,QAAAA,CAAMC,QAAQ,yBACb,UAACC,EAAAA,CAAMA,CAAAA,CACLnO,UAAU,sEACVoN,QAAQ,UACR1M,KAAK,kBAEL,UAAC0N,EAAAA,CAAMA,CAAAA,CAACpO,UAAU,gBAGtB,UAACoM,QAAAA,CACC7P,GAAG,gBACHmE,KAAK,OACL2N,OAAO,UACPrO,UAAU,SACVsO,SAAUhB,EACViB,SAAUtR,OAGd,WAACmD,MAAAA,WACC,UAACY,KAAAA,CAAGhB,UAAU,uBAAc,oBAC5B,UAACkB,IAAAA,CAAElB,UAAU,yCAAgC,qDAOjD,WAACI,MAAAA,CAAIJ,UAAU,uBACb,WAACI,MAAAA,CAAIJ,UAAU,uBACb,UAAC6F,EAAAA,CAAKA,CAAAA,CAACqI,QAAQ,gBAAO,cACtB,UAAC/B,EAAAA,CAAKA,CAAAA,CACJ5P,GAAG,OACHiS,YAAY,uBACZvP,MAAOuN,EAASnK,IAAI,CACpBiM,SAAUxB,OAId,WAAC1M,MAAAA,CAAIJ,UAAU,uBACb,UAAC6F,EAAAA,CAAKA,CAAAA,CAACqI,QAAQ,iBAAQ,UACvB,UAAC/B,EAAAA,CAAKA,CAAAA,CACJ5P,GAAG,QACHmE,KAAK,QACLzB,MAAOuN,EAAS3Q,KAAK,CACrB0S,QAAQ,SAIZ,WAACnO,MAAAA,CAAIJ,UAAU,uBACb,UAAC6F,EAAAA,CAAKA,CAAAA,CAACqI,QAAQ,eAAM,QACrB,UAACrG,EAAAA,CAAQA,CAAAA,CACPtL,GAAG,MACHiS,YAAY,+BACZxO,UAAU,gBACVsO,SAAUxB,WAETN,EAASE,GAAG,SAKnB,UAACyB,EAAAA,CAAMA,CAAAA,CAACnO,UAAU,mBAAmBuO,SAAUtR,WAC5CA,EAAY,YAAc,wBAMnC,UAACiP,EAAAA,WAAWA,CAAAA,CAACjN,MAAM,oBACjB,UAACa,EAAAA,EAAIA,CAAAA,CAACE,UAAU,eACd,UAAC+N,OAAAA,CAAKC,SAAUX,EAAsBrN,UAAU,sBAC9C,WAACI,MAAAA,CAAIJ,UAAU,mCACb,UAACI,MAAAA,CAAIJ,UAAU,+EACb,UAACyO,EAAAA,CAAGA,CAAAA,CAACzO,UAAU,2BAEjB,WAACI,MAAAA,CAAIJ,UAAU,mBACb,UAACgB,KAAAA,CAAGhB,UAAU,4BAAmB,aACjC,UAACkB,IAAAA,CAAElB,UAAU,8CAAqC,qDAGlD,WAACI,MAAAA,CAAIJ,UAAU,uBACb,WAACI,MAAAA,CAAIJ,UAAU,uBACb,UAAC6F,EAAAA,CAAKA,CAAAA,CAACqI,QAAQ,2BAAkB,qBACjC,UAAC/B,EAAAA,CAAKA,CAAAA,CACJ5P,GAAG,kBACHmE,KAAK,WACL8N,YAAY,yBACZvP,MAAOuN,EAASG,eAAe,CAC/B2B,SAAUxB,OAGd,WAAC1M,MAAAA,CAAIJ,UAAU,uBACb,UAAC6F,EAAAA,CAAKA,CAAAA,CAACqI,QAAQ,uBAAc,iBAC7B,UAAC/B,EAAAA,CAAKA,CAAAA,CACJ5P,GAAG,cACHmE,KAAK,WACL8N,YAAY,qBACZvP,MAAOuN,EAASI,WAAW,CAC3B0B,SAAUxB,OAGd,WAAC1M,MAAAA,CAAIJ,UAAU,uBACb,UAAC6F,EAAAA,CAAKA,CAAAA,CAACqI,QAAQ,2BAAkB,qBACjC,UAAC/B,EAAAA,CAAKA,CAAAA,CACJ5P,GAAG,kBACHmE,KAAK,WACL8N,YAAY,uBACZvP,MAAOuN,EAASK,eAAe,CAC/ByB,SAAUxB,OAGd,UAACqB,EAAAA,CAAMA,CAAAA,CAACnO,UAAU,mBAAmBuO,SAAUtR,WAC5CA,EAAY,cAAgB,wCAWnD,mFC5VA,iDCAA,yDCAA,+CCAA,4DCAA,mGCOO,OAAMyR,UAA0BpP,MACrC2I,YACEC,CAAe,CACf,CAA0B,CAC1B,CACA,KAAK,CAACA,GAAAA,IAAAA,CAFCE,aAAAA,CAAAA,EAGP,IAAI,CAAC/F,IAAI,CAAG,oBACR+F,GAAiBA,EAAcuG,KAAK,EAAE,CACxC,IAAI,CAACA,KAAK,CAAGvG,EAAcuG,KAAAA,CAE/B,CACF,CAKO,MAAMC,UAA2BtP,MACtC2I,YACEC,CAAe,CACf,CAA0B,CAC1B,CACA,KAAK,CAACA,GAAAA,IAAAA,CAFCE,aAAAA,CAAAA,EAGP,IAAI,CAAC/F,IAAI,CAAG,qBACR+F,GAAiBA,EAAcuG,KAAK,EAAE,CACxC,IAAI,CAACA,KAAK,CAAGvG,EAAcuG,KAAAA,CAE/B,CACF,CAMA,IAAME,EAAgB,UAahBC,EAAc,IAAInL,IA6BjB,eAAe+J,EACpBvQ,CAAkC,CAClCoQ,CAAU,CACVwB,CAAc,EAEd,GAAI,CACF,IAAMC,EAAUzB,EAAKlL,IAAI,CAACvG,KAAK,CAAC,KAAKmT,GAAG,GAClCC,EAAW,GAAGH,EAAO,CAAC,EAAEI,KAAKC,GAAG,GAAG,CAAC,EAAEJ,EAAAA,CAAS,CAC/CK,EAAW,GAAGN,EAAO,CAAC,EAAEG,EAAAA,CAAU,CAGlC,CAAE1R,MAAO8R,CAAW,CAAE,CAAG,MAAMnS,EAASoS,OAAO,CAClDC,IAAI,CAACX,GACLY,MAAM,CAACJ,EAAU9B,EAAM,CAAEmC,OAAQ,EAAK,GAEzC,GAAIJ,EACF,MAAM,IAAIZ,CADK,CAEb,sCACAY,GAKJ,GAAM,CACJ/R,KAAM,WAAEkQ,CAAS,CAAE,CACpB,CAAGtQ,EAASoS,OAAO,CAACC,IAAI,CAACX,GAAec,YAAY,CAACN,GAEtD,GAAI,CAAC5B,EACH,MAAM,GADQ,CACJiB,EACR,qDAIJ,OAAOjB,CACT,CAAE,MAAOjQ,EAAO,CACd,GAAIA,aAAiBkR,EACnB,MAAMlR,CAGR,OADAM,GAHwC,KAGhCN,KAAK,CAAC,0BAA2BA,GACnC,IAAIkR,EACR,qDACAlR,EAEJ,CACF,CAKO,eAAemQ,EACpBxQ,CAAkC,CAClC4R,CAAc,CACdhT,CAAiB,EAEjB,GAAI,CAEF,GAAM,CAAEwB,KAAMqS,CAAO,CAAEpS,MAAOqS,CAAY,CAAE,CAAG,MAAM1S,EAClDqS,IAAI,CAAC,YACLM,MAAM,CAAC,MACPC,EAAE,CAAC,KAAMhB,GACTiB,WAAW,GAEd,GAAIH,EACF,MAAM,IAAIjB,EADM,4DAGdiB,GAIJ,GAAID,EAAS,CAEX,GAAM,OAAEpS,CAAK,CAAE,CAAG,MAAML,EACrBqS,IAAI,CAAC,YACLlK,MAAM,CAAC,CAAEtJ,WAAYD,EAAWkU,WAAY,IAAId,OAAOe,WAAW,EAAG,GACrEH,EAAE,CAAC,KAAMhB,GAEZ,GAAIvR,EACF,KADS,CACH,IAAIoR,EACR,gDACApR,EAGN,KAAO,CAEL,GAAM,OAAEA,CAAK,CAAE,CAAG,MAAML,EAASqS,IAAI,CAAC,YAAYW,MAAM,CAAC,CACvD5T,GAAIwS,EACJ/S,WAAYD,EAIZqU,WAAY,IAAIjB,OAAOe,WAAW,GAClCD,WAAY,IAAId,OAAOe,WAAW,EACpC,GAEA,GAAI1S,EACF,KADS,CACH,IAAIoR,EACR,gDACApR,EAGN,CACF,CAAE,MAAOA,EAAO,CACd,GAAIA,aAAiBoR,EACnB,MAAMpR,CAGR,OADAM,IAHyC,IAGjCN,KAAK,CAAC,8BAA+BA,GACvC,IAAIoR,EACR,2DACApR,EAEJ,CACF,CAOO,IAAM6S,EAAkB,IAE7B,IAAIC,EAAO,EACX,IAAK,IAAIxF,EAAI,EAAGA,EAAIiE,EAAO9E,MAAM,CAAEa,IAAK,EAC/BiE,EAAOwB,UAAU,CAACzF,GAAM,EAACwF,IAAQ,EAAKA,CAAAA,CAAG,CAChDA,GAAcA,EAEhB,EAFSA,EAAa,EAEFE,KAAKC,GAAG,CAACH,EAAO,KACpC,EAD2C,IACpC,CAAC,EAHyC,2BAE4B,mBACrB,EAAEI,EAAAA,CAAa,EACvE,eASoBC,EACpBxT,CAAkC,CAClC4R,CAAc,EAEd,GAAI,CAACA,EAEH,MAFW,CACXjR,QAAQyE,IAAI,CAAC,2DA7KS,uBAkLxB,GAAIuM,EAAY1K,GAAG,CAAC2K,GAClB,MAD2B,CACpBD,EAAYxK,GAAG,CAACyK,GAIzB,GAAI,CAAC5R,EAEH,OADAW,CADa,OACLN,KAAK,CAAC,4DACP6S,EAAgBtB,GAGzB,GAAI,CAEF,EALgC,CAK1B,CAAExR,KAAMqT,CAAW,CAAEpT,MAAOqS,CAAY,CAAE,CAAG,MAAM1S,EACtDqS,IAAI,CAAC,WANkE,CAMtD,MACX,CAAC,cAAc,EACnB,CAAC,KAAMT,GACT8B,CAHkD,KAG5C,GAYT,GAVIhB,GAAsC,UAJkB,EAIN,CAAlCA,EAAa1H,IAAI,EAEnCrK,QAAQN,KAAK,CACX,2CACAqS,EACA,4CACApH,KAAKC,SAAS,CAACmH,EAAciB,OAAOC,mBAAmB,CAAClB,KAIxDe,GAAa5U,WAEf,CAF2B,MAC3B8S,EAAYnE,GAAG,CAACoE,EAAQ6B,EAAY5U,UAAU,EACvC4U,EAAY5U,UAAU,CAI/B,IAAMgV,EAAiB,CAAC,OAAO,EAAEjC,EAAO,IAAI,CAAC,CACvC,CAAExR,KAAM0T,CAAW,CAAE,CAAG,MAAM9T,EAASoS,OAAO,CACjDC,IAAI,CAAC,MAF0E,KAE/D,YACJ,CAACwB,GAGhB,GAAIC,GAAaxD,UAMf,CAVkD,EAU9CwD,EAAYxD,SAAS,CAACyD,QAAQ,CAACF,GAEjC,OADAlC,EAAYnE,GAAG,CAACoE,CADkC,CAC1BkC,EAAYxD,SAAS,EACtCwD,EAAYxD,SAAS,MAE5B3P,QAAQyE,IAAI,CACV,CAAC,YAAY,EAAE0O,EAAYxD,SAAS,CAAC,8BAA8B,EAAEuD,EAAe,eAAe,CAAC,EAM1G,IAAMG,EAAed,EAAgBtB,GAErC,OADAD,EAAYnE,GAAG,CAACoE,EAAQoC,GACjBA,CACT,CAAE,MAAO3T,EAAO,CACdM,QAAQN,KAAK,CACX,mCACAA,EACA,oCACAiL,KAAKC,SAAS,CAAClL,EAAOsT,OAAOC,mBAAmB,CAACvT,KAGnD,IAAM2T,EAAed,EAAgBtB,GAErC,OADAD,EAAYnE,GAAG,CAACoE,EAAQoC,GACjBA,CACT,CACF,UAH2C,gBCzS3C,CDyS4D,CCzS5D,wFCAe,GACb,KAAO,8BACP,KAAO,IACP,MAAQ,IACR,OAAS,aACT,IAAM,QACN,MAAQ,gBACR,WAAa,GACb,aAAe,SACf,cAAgB,QAClB,ECmBa,MAAc,GACzB,EACG,EADH,EACG,CAFsB,EAEtB,CAAQ,qBAAsB,OAAO,EACrC,WAAY,GACZ,IAAK,GAEJ,EAAmB,CAAC,EAAkB,KAC1C,GAD6E,CACvE,CAAY,EADK,EACL,eAEd,CACE,KAAQ,uBACR,EAAO,eACP,EAAc,sBACd,YACA,EAAY,YACZ,EACA,GAAG,GAEL,GACG,CACI,qBACL,KACA,KACE,EACA,GAAG,EACH,KAAO,GACP,MAAQ,GACR,MAAQ,GACR,YAAa,EACR,EAA4B,CAA5B,MAAO,EAAW,EAAU,KAA5B,EAAmC,CAAI,EAAjB,EACvB,UACO,CAAC,SAAU,CAAU,WAAY,GAAa,IAAW,EAAf,GAAe,CAAK,CAAP,EAAU,EAC5E,GAAG,GAEL,IACK,CAAS,KAAI,CAAC,CAAC,CAAK,EAAK,CAAM,uBAAc,EAAK,KAAK,CAAC,CACvD,KAAM,SAAQ,GAAY,EAAW,CAAC,EAAhB,CAAI,GAQ/B,EARmD,KAMhD,cAAc,EAAG,GAAQ,EAE5B,CACT,GAHqC","sources":["webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/after-task-async-storage.external.js\"","webpack://@hijraah/web/./src/types/auth.ts","webpack://@hijraah/web/./src/lib/auth/hooks.tsx","webpack://@hijraah/web/./src/components/ui/card.tsx","webpack://@hijraah/web/../../node_modules/.pnpm/@radix-ui+react-direction@1_e1ac71731ad139df71b1a0831f881d22/node_modules/@radix-ui/react-direction/dist/index.mjs","webpack://@hijraah/web/external commonjs2 \"module\"","webpack://@hijraah/web/../../node_modules/.pnpm/@radix-ui+react-use-callbac_26bd8c55cf97ccafaf5977e418b34b4f/node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs","webpack://@hijraah/web/./src/components/ui/user-avatar.tsx","webpack://@hijraah/web/external commonjs \"next/dist/compiled/next-server/app-page.runtime.prod.js\"","webpack://@hijraah/web/external commonjs2 \"punycode\"","webpack://@hijraah/web/?813a","webpack://@hijraah/web/../../node_modules/.pnpm/@radix-ui+react-use-is-hydr_d9488d269c441942c37796e78853c9aa/node_modules/@radix-ui/react-use-is-hydrated/dist/index.mjs","webpack://@hijraah/web/../src/avatar.tsx","webpack://@hijraah/web/./src/components/ui/use-toast.tsx","webpack://@hijraah/web/../../node_modules/.pnpm/@supabase+realtime-js@2.11.10_bufferutil@4.0.9/node_modules/@supabase/realtime-js/dist/main/ sync?5147","webpack://@hijraah/web/./src/components/ui/label.tsx","webpack://@hijraah/web/../../node_modules/.pnpm/use-sync-external-store@1.5.0_react@18.3.1/node_modules/use-sync-external-store/shim/index.js","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/action-async-storage.external.js\"","webpack://@hijraah/web/external commonjs2 \"process\"","webpack://@hijraah/web/external commonjs2 \"os\"","webpack://@hijraah/web/./src/components/ui/avatar.tsx","webpack://@hijraah/web/external commonjs2 \"stream\"","webpack://@hijraah/web/external commonjs2 \"util\"","webpack://@hijraah/web/../src/tabs.tsx","webpack://@hijraah/web/external commonjs2 \"fs\"","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/work-async-storage.external.js\"","webpack://@hijraah/web/../src/label.tsx","webpack://@hijraah/web/external node-commonjs \"node:child_process\"","webpack://@hijraah/web/./src/lib/supabase/client.ts","webpack://@hijraah/web/external commonjs2 \"path\"","webpack://@hijraah/web/external commonjs2 \"tls\"","webpack://@hijraah/web/external commonjs2 \"diagnostics_channel\"","webpack://@hijraah/web/external node-commonjs \"node:http\"","webpack://@hijraah/web/./src/components/ui/textarea.tsx","webpack://@hijraah/web/external node-commonjs \"node:zlib\"","webpack://@hijraah/web/external node-commonjs \"node:tls\"","webpack://@hijraah/web/../../node_modules/.pnpm/use-sync-external-store@1.5.0_react@18.3.1/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","webpack://@hijraah/web/../../node_modules/.pnpm/@radix-ui+react-id@1.1.1_@types+react@18.3.1_react@18.3.1/node_modules/@radix-ui/react-id/dist/index.mjs","webpack://@hijraah/web/../../../src/icons/user.ts","webpack://@hijraah/web/external node-commonjs \"node:https\"","webpack://@hijraah/web/external node-commonjs \"node:os\"","webpack://@hijraah/web/sentry-wrapper-module","webpack://@hijraah/web/external node-commonjs \"node:diagnostics_channel\"","webpack://@hijraah/web/external commonjs2 \"crypto\"","webpack://@hijraah/web/external commonjs2 \"https\"","webpack://@hijraah/web/../../node_modules/.pnpm/@radix-ui+react-primitive@2_6162bfe80a00db392cb1b806315fba03/node_modules/@radix-ui/react-primitive/dist/index.mjs","webpack://@hijraah/web/external node-commonjs \"node:stream\"","webpack://@hijraah/web/external node-commonjs \"node:util\"","webpack://@hijraah/web/../src/roving-focus-group.tsx","webpack://@hijraah/web/ignored|E:\\downloads\\Hijraah\\node_modules\\.pnpm\\ws@8.18.2_bufferutil@4.0.9\\node_modules\\ws\\lib|utf-8-validate","webpack://@hijraah/web/./src/lib/auth/errors.ts","webpack://@hijraah/web/./src/lib/auth/rbac.ts","webpack://@hijraah/web/external commonjs \"next/dist/server/app-render/work-unit-async-storage.external.js\"","webpack://@hijraah/web/?9374","webpack://@hijraah/web/src/app/(authenticated)/layout.tsx","webpack://@hijraah/web/external node-commonjs \"node:fs\"","webpack://@hijraah/web/external commonjs2 \"worker_threads\"","webpack://@hijraah/web/external commonjs2 \"zlib\"","webpack://@hijraah/web/external commonjs2 \"perf_hooks\"","webpack://@hijraah/web/external node-commonjs \"node:worker_threads\"","webpack://@hijraah/web/external node-commonjs \"node:path\"","webpack://@hijraah/web/./src/components/ui/tabs.tsx","webpack://@hijraah/web/external node-commonjs \"node:net\"","webpack://@hijraah/web/external node-commonjs \"node:crypto\"","webpack://@hijraah/web/?cfb0","webpack://@hijraah/web/./src/components/ui/input.tsx","webpack://@hijraah/web/external commonjs2 \"buffer\"","webpack://@hijraah/web/external commonjs2 \"url\"","webpack://@hijraah/web/external commonjs2 \"child_process\"","webpack://@hijraah/web/external node-commonjs \"node:readline\"","webpack://@hijraah/web/external commonjs2 \"http\"","webpack://@hijraah/web/../../../src/icons/key.ts","webpack://@hijraah/web/../../../src/icons/camera.ts","webpack://@hijraah/web/./src/app/(authenticated)/profile/page.tsx","webpack://@hijraah/web/external commonjs2 \"tty\"","webpack://@hijraah/web/external commonjs2 \"async_hooks\"","webpack://@hijraah/web/external module \"ai\"","webpack://@hijraah/web/external node-commonjs \"node:inspector\"","webpack://@hijraah/web/external commonjs2 \"net\"","webpack://@hijraah/web/./src/lib/avatar-utils.ts","webpack://@hijraah/web/external commonjs2 \"events\"","webpack://@hijraah/web/../../src/defaultAttributes.ts","webpack://@hijraah/web/../../src/createLucideIcon.ts"],"sourcesContent":["module.exports = require(\"next/dist/server/app-render/after-task-async-storage.external.js\");","// This file is the single source of truth for Authentication and RBAC related types\r\n\r\nimport { Session, User, SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nimport { Database } from \"@/types/database.types\";\r\n\r\n// RBAC Types (from former rbac.ts)\r\nexport type Permission = string;\r\n\r\nexport interface Role {\r\n  name: string;\r\n  description?: string;\r\n  permissions: Permission[];\r\n  inherits?: string[];\r\n}\r\n\r\nexport interface RBACOptions {\r\n  roles?: Record<string, Role>;\r\n  superAdminRole?: string;\r\n  enableCache?: boolean;\r\n  extractRoles?: (user: ExtendedUser) => string[];\r\n}\r\n\r\n// Auth Types (from former src/lib/auth/types.ts)\r\nexport interface UserSettings {\r\n  theme: string;\r\n  language: string;\r\n  emailNotifications: boolean;\r\n  documentReminders: boolean;\r\n  applicationUpdates: boolean;\r\n  twoFactorAuth: boolean;\r\n}\r\n\r\nexport type ExtendedUser = User & {\r\n  fullName: string;\r\n  avatarUrl: string;\r\n  role: Database[\"public\"][\"Enums\"][\"user_role\"]; // Updated to use the enum from database\r\n  isAdmin?: boolean; // Consider deriving from a hasPermission('admin.access') or similar\r\n  settings?: UserSettings;\r\n  hasTwoFactorAuth?: () => boolean;\r\n  updateSettings?: (settings: Partial<UserSettings>) => ExtendedUser;\r\n  toObject?: () => Record<string, any>;\r\n};\r\n\r\nexport type AuthProvider = \"google\" | \"github\" | \"email\" | \"phone\" | \"azure\"; // Added azure from old types.ts\r\n\r\nexport interface AuthContextType {\r\n  user: ExtendedUser | null;\r\n  session: Session | null;\r\n  isLoading: boolean;\r\n  isAuthenticated: boolean;\r\n  error: any | null; // Consider a more specific error type\r\n  signIn: (provider: AuthProvider, options?: any) => Promise<void>;\r\n  signOut: () => Promise<void>;\r\n  refreshSession: () => Promise<void>;\r\n  signUp: (options: {\r\n    email: string;\r\n    password: string;\r\n    fullName?: string;\r\n    redirectTo?: string;\r\n  }) => Promise<any>; // Consider specific result type\r\n  resetPassword: (email: string, redirectTo?: string) => Promise<boolean>;\r\n  updatePassword: (password: string) => Promise<boolean>;\r\n  hasPermission?: (permission: Permission) => boolean; // Added from old types.ts\r\n}\r\n\r\nexport interface AuthMiddlewareContext {\r\n  user: ExtendedUser | null;\r\n  session: Session | null;\r\n  isAuthenticated: boolean;\r\n  supabase: SupabaseClient<Database>; // Use SupabaseClient<Database> here\r\n  hasPermission?: (permission: Permission) => boolean;\r\n}\r\n\r\n// Utility function (can live here or be moved to a helpers file if it grows)\r\nexport function createExtendedUser(user: User | null): ExtendedUser | null {\r\n  if (!user) return null;\r\n\r\n  const role = (user.user_metadata?.role ||\r\n    \"client\") as Database[\"public\"][\"Enums\"][\"user_role\"];\r\n  const isAdmin = role === \"admin\"; // This isAdmin flag should be used cautiously, prefer RBAC checks\r\n\r\n  const settings: UserSettings = {\r\n    theme: user.user_metadata?.settings_theme || \"system\",\r\n    language: user.user_metadata?.settings_language || \"en\",\r\n    emailNotifications:\r\n      user.user_metadata?.settings_emailNotifications || false,\r\n    documentReminders: user.user_metadata?.settings_documentReminders || false,\r\n    applicationUpdates:\r\n      user.user_metadata?.settings_applicationUpdates || false,\r\n    twoFactorAuth: user.user_metadata?.settings_twoFactorAuth || false,\r\n  };\r\n\r\n  const extendedUser: ExtendedUser = {\r\n    ...user,\r\n    fullName:\r\n      user.user_metadata?.full_name || user.email?.split(\"@\")[0] || \"User\",\r\n    avatarUrl: user.user_metadata?.avatar_url || \"\",\r\n    role,\r\n    isAdmin,\r\n    settings,\r\n    hasTwoFactorAuth: () => settings.twoFactorAuth,\r\n    updateSettings: (newSettings: Partial<UserSettings>) => {\r\n      const updatedSettings = { ...settings, ...newSettings };\r\n      return createExtendedUser({\r\n        ...user,\r\n        user_metadata: {\r\n          ...user.user_metadata,\r\n          settings_theme: updatedSettings.theme,\r\n          settings_language: updatedSettings.language,\r\n          settings_emailNotifications: updatedSettings.emailNotifications,\r\n          settings_documentReminders: updatedSettings.documentReminders,\r\n          settings_applicationUpdates: updatedSettings.applicationUpdates,\r\n          settings_twoFactorAuth: updatedSettings.twoFactorAuth,\r\n        },\r\n      }) as ExtendedUser;\r\n    },\r\n    toObject: () => ({\r\n      id: user.id,\r\n      email: user.email,\r\n      fullName:\r\n        user.user_metadata?.full_name || user.email?.split(\"@\")[0] || \"User\",\r\n      avatarUrl: user.user_metadata?.avatar_url || \"\",\r\n      role,\r\n      settings,\r\n    }),\r\n  };\r\n\r\n  return extendedUser;\r\n}\r\n\r\n// Types from the old src/types/types.ts that were not in src/lib/auth/types.ts\r\n// (Excluding duplicates like ExtendedUser, AuthProvider which are merged above)\r\n\r\nexport interface AuthResult {\r\n  session: Session | null;\r\n  user: User | null; // Should this be ExtendedUser?\r\n  error: Error | null;\r\n}\r\n\r\nexport interface AuthState {\r\n  user: ExtendedUser | null;\r\n  session: Session | null;\r\n  isLoading: boolean;\r\n  isAuthenticated: boolean;\r\n  error?: Error | null;\r\n}\r\n\r\nexport interface LoginCredentials {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nexport interface SignUpData {\r\n  email: string;\r\n  password: string;\r\n  fullName?: string;\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport interface AuthOptions {\r\n  redirectTo?: string;\r\n  email?: string;\r\n  metadata?: Record<string, any>;\r\n  provider?: {\r\n    id: string;\r\n    scopes?: string;\r\n  };\r\n}\r\n\r\nexport type AuthChangeCallback = (\r\n  session: Session | null,\r\n  user: User | null // Should this be ExtendedUser?\r\n) => void | Promise<void>;\r\n\r\nexport interface InitOptions {\r\n  refreshSession?: boolean;\r\n  autoRecoverSession?: boolean;\r\n  refreshOptions?: {\r\n    enableAutoRefresh?: boolean;\r\n    refreshThreshold?: number;\r\n  };\r\n}\r\n","\"use client\";\r\n\r\nimport { Session, User } from \"@supabase/supabase-js\";\r\nimport {\r\n  useState,\r\n  useEffect,\r\n  createContext,\r\n  useContext,\r\n  useCallback,\r\n  ReactNode,\r\n} from \"react\";\r\n\r\nimport { createClient } from \"@/lib/supabase/client\";\r\n\r\nimport { hasPermission } from \"./rbac\";\r\nimport {\r\n  AuthContextType,\r\n  type AuthProvider,\r\n  ExtendedUser,\r\n  createExtendedUser,\r\n} from \"@/types/auth\";\r\n\r\n// Create Auth Context\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\n/**\r\n * Provider component to wrap your app and provide authentication state\r\n */\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<ExtendedUser | null>(null);\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const supabase = createClient();\r\n\r\n  // Refresh session\r\n  const refreshSession = useCallback(async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const {\r\n        data: { session },\r\n        error: sessionError,\r\n      } = await supabase.auth.getSession();\r\n\r\n      if (sessionError) throw sessionError;\r\n\r\n      if (session) {\r\n        const {\r\n          data: { user },\r\n          error: userError,\r\n        } = await supabase.auth.getUser();\r\n        if (userError) throw userError;\r\n\r\n        setSession(session);\r\n        setUser(createExtendedUser(user));\r\n      } else {\r\n        setSession(null);\r\n        setUser(null);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error refreshing session:\", error);\r\n      setSession(null);\r\n      setUser(null);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [supabase]);\r\n\r\n  // Sign in with provider\r\n  const signIn = useCallback(\r\n    async (provider: AuthProvider, options?: any) => {\r\n      setIsLoading(true);\r\n      try {\r\n        if (provider === \"email\") {\r\n          if (!options?.email || !options?.password) {\r\n            throw new Error(\"Email and password required for email sign in\");\r\n          }\r\n          const { data, error } = await supabase.auth.signInWithPassword({\r\n            email: options.email,\r\n            password: options.password,\r\n          });\r\n\r\n          if (error) throw error;\r\n\r\n          // Email sign-in provides session immediately\r\n          if (data?.session) {\r\n            setSession(data.session);\r\n            setUser(createExtendedUser(data.session.user));\r\n          }\r\n        } else {\r\n          // OAuth provider sign-in redirects to provider\r\n          const { error } = await supabase.auth.signInWithOAuth({\r\n            provider: provider as any,\r\n            options: options?.redirectTo\r\n              ? { redirectTo: options.redirectTo }\r\n              : undefined,\r\n          });\r\n\r\n          if (error) throw error;\r\n          // No session update here as user will be redirected\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error signing in:\", error);\r\n        throw error;\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [supabase]\r\n  );\r\n\r\n  // Sign out\r\n  const signOut = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n\r\n      setSession(null);\r\n      setUser(null);\r\n    } catch (error) {\r\n      console.error(\"Error signing out:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [supabase]);\r\n\r\n  // Sign up with email/password\r\n  const signUp = useCallback(\r\n    async (options: {\r\n      email: string;\r\n      password: string;\r\n      fullName?: string;\r\n      redirectTo?: string;\r\n    }) => {\r\n      setIsLoading(true);\r\n      try {\r\n        if (!options.email || !options.password) {\r\n          throw new Error(\"Email and password required for sign up\");\r\n        }\r\n\r\n        const { data, error } = await supabase.auth.signUp({\r\n          email: options.email,\r\n          password: options.password,\r\n          options: {\r\n            data: {\r\n              full_name: options.fullName || \"\",\r\n            },\r\n            emailRedirectTo:\r\n              options.redirectTo || `${window.location.origin}/auth/callback`,\r\n          },\r\n        });\r\n\r\n        if (error) throw error;\r\n        return data;\r\n      } catch (error) {\r\n        console.error(\"Error signing up:\", error);\r\n        throw error;\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [supabase]\r\n  );\r\n\r\n  // Reset password\r\n  const resetPassword = useCallback(\r\n    async (email: string, redirectTo?: string) => {\r\n      setIsLoading(true);\r\n      try {\r\n        const { error } = await supabase.auth.resetPasswordForEmail(email, {\r\n          redirectTo:\r\n            redirectTo || `${window.location.origin}/auth/reset-password`,\r\n        });\r\n\r\n        if (error) throw error;\r\n        return true;\r\n      } catch (error) {\r\n        console.error(\"Error resetting password:\", error);\r\n        throw error;\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [supabase]\r\n  );\r\n\r\n  // Update password\r\n  const updatePassword = useCallback(\r\n    async (password: string) => {\r\n      setIsLoading(true);\r\n      try {\r\n        const { error } = await supabase.auth.updateUser({\r\n          password,\r\n        });\r\n\r\n        if (error) throw error;\r\n        return true;\r\n      } catch (error) {\r\n        console.error(\"Error updating password:\", error);\r\n        throw error;\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [supabase]\r\n  );\r\n\r\n  // Set up auth listener\r\n  useEffect(() => {\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange(async (_event, session) => {\r\n      setSession(session);\r\n\r\n      // When auth state changes, get authenticated user data\r\n      if (session) {\r\n        const { data: userData, error } = await supabase.auth.getUser();\r\n        if (!error && userData) {\r\n          setUser(createExtendedUser(userData.user));\r\n        } else {\r\n          setUser(null);\r\n        }\r\n      } else {\r\n        setUser(null);\r\n      }\r\n\r\n      setIsLoading(false);\r\n    });\r\n\r\n    // Get initial session\r\n    refreshSession();\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  }, [supabase, refreshSession]);\r\n\r\n  const value: AuthContextType = {\r\n    user,\r\n    session,\r\n    isLoading,\r\n    isAuthenticated: !!session,\r\n    signIn,\r\n    signOut,\r\n    refreshSession,\r\n    // Add these new functions\r\n    signUp,\r\n    resetPassword,\r\n    updatePassword,\r\n    error: null, // For backwards compatibility\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\n/**\r\n * Hook to access authentication state and methods\r\n */\r\nexport function useAuth(): AuthContextType {\r\n  const context = useContext(AuthContext);\r\n\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth must be used within an AuthProvider\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\n/**\r\n * Hook to get the current user\r\n */\r\nexport function useUser(): ExtendedUser | null {\r\n  const { user } = useAuth();\r\n  return user;\r\n}\r\n\r\n/**\r\n * Hook to check if the user is authenticated\r\n */\r\nexport function useIsAuthenticated(): boolean {\r\n  const { isAuthenticated } = useAuth();\r\n  return isAuthenticated;\r\n}\r\n\r\n/**\r\n * Hook to check if the user has a specific role\r\n */\r\nexport function useHasRole(role: string): boolean {\r\n  const user = useUser();\r\n  return user?.role === role;\r\n}\r\n\r\n/**\r\n * Hook to check if the user has a specific permission\r\n */\r\nexport function useHasPermission(permission: string): boolean {\r\n  const user = useUser();\r\n  return hasPermission(user, permission);\r\n}\r\n\r\n/**\r\n * Hook to access the current session - for compatibility with next-auth style\r\n */\r\nexport function useSession() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useSession must be used within an AuthProvider\");\r\n  }\r\n  // Simplified return for direct session access if preferred elsewhere,\r\n  // but useAuth provides more comprehensive state.\r\n  return {\r\n    session: context.session,\r\n    user: context.user,\r\n    isLoading: context.isLoading,\r\n    error: null, // Assuming errors are handled and reported differently, or add context.error\r\n    refreshSession: context.refreshSession, // Expose refreshSession\r\n  };\r\n}\r\n","/**\r\n * Card component and related sub-components.\r\n * Provides a container for related content with variants for different use cases.\r\n */\r\n\r\nimport { motion, HTMLMotionProps } from \"motion/react\";\r\nimport * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n// Define a type for CardProps\r\n// Omit 'className' from HTMLMotionProps because we handle it with `cn`\r\n// Omit 'ref' as it's typed by React.forwardRef\r\ninterface CardProps extends Omit<HTMLMotionProps<\"div\">, \"className\" | \"ref\"> {\r\n  className?: string;\r\n}\r\n\r\nconst Card = React.forwardRef<HTMLDivElement, CardProps>(\r\n  ({ className, ...props }, ref) => (\r\n    <motion.div\r\n      ref={ref}\r\n      className={cn(\r\n        \"rounded-lg border bg-card text-card-foreground shadow-sm\",\r\n        className\r\n      )}\r\n      whileHover={{\r\n        scale: 1.03,\r\n        boxShadow:\r\n          \"0px 7px 25px rgba(0,0,0,0.08), 0px 3px 10px rgba(0,0,0,0.04)\",\r\n      }}\r\n      transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\r\n      {...props}\r\n    />\r\n  )\r\n);\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardDescription,\r\n  CardContent,\r\n};\r\n","// packages/react/direction/src/direction.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar DirectionContext = React.createContext(void 0);\nvar DirectionProvider = (props) => {\n  const { dir, children } = props;\n  return /* @__PURE__ */ jsx(DirectionContext.Provider, { value: dir, children });\n};\nfunction useDirection(localDir) {\n  const globalDir = React.useContext(DirectionContext);\n  return localDir || globalDir || \"ltr\";\n}\nvar Provider = DirectionProvider;\nexport {\n  DirectionProvider,\n  Provider,\n  useDirection\n};\n//# sourceMappingURL=index.mjs.map\n","module.exports = require(\"module\");","// packages/react/use-callback-ref/src/use-callback-ref.tsx\nimport * as React from \"react\";\nfunction useCallbackRef(callback) {\n  const callbackRef = React.useRef(callback);\n  React.useEffect(() => {\n    callbackRef.current = callback;\n  });\n  return React.useMemo(() => (...args) => callbackRef.current?.(...args), []);\n}\nexport {\n  useCallbackRef\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\r\n\r\nimport { User } from 'lucide-react';\r\nimport React from 'react';\r\n\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/ui/avatar';\r\n\r\nexport interface UserAvatarProps {\r\n    user?: {\r\n        name?: string;\r\n        email?: string;\r\n        avatar?: string;\r\n    };\r\n    className?: string;\r\n    fallbackClassName?: string;\r\n    size?: 'sm' | 'md' | 'lg' | 'xl';\r\n    shape?: 'circle' | 'square';\r\n}\r\n\r\n/**\r\n * A component that displays a user's avatar with proper fallbacks\r\n * If no avatar is provided, it shows initials or a default user icon\r\n */\r\nexport function UserAvatar({\r\n    user,\r\n    className = '',\r\n    fallbackClassName = '',\r\n    size = 'md',\r\n    shape = 'circle'\r\n}: UserAvatarProps) {\r\n    // Size classes\r\n    const sizeClasses = {\r\n        sm: 'h-8 w-8',\r\n        md: 'h-10 w-10',\r\n        lg: 'h-16 w-16',\r\n        xl: 'h-24 w-24',\r\n    };\r\n\r\n    // Shape classes\r\n    const shapeClasses = {\r\n        circle: 'rounded-full',\r\n        square: 'rounded-lg',\r\n    };\r\n\r\n    // Get user initials for fallback\r\n    const getInitials = () => {\r\n        if (!user?.name) return '?';\r\n\r\n        return user.name\r\n            .split(' ')\r\n            .map(part => part[0])\r\n            .slice(0, 2)\r\n            .join('')\r\n            .toUpperCase();\r\n    };\r\n\r\n    return (\r\n        <Avatar\r\n            className={`${sizeClasses[size]} ${shapeClasses[shape]} ${className}`}\r\n        >\r\n            {user?.avatar ? (\r\n                <AvatarImage\r\n                    src={user.avatar}\r\n                    alt={user?.name || 'User Avatar'}\r\n                    onError={(e) => {\r\n                        console.warn('Avatar image failed to load:', e);\r\n                        // Let fallback display when image fails\r\n                        (e.target as HTMLImageElement).style.display = 'none';\r\n                    }}\r\n                />\r\n            ) : null}\r\n\r\n            <AvatarFallback className={`${shapeClasses[shape]} ${fallbackClassName}`}>\r\n                {user?.name ? getInitials() : <User className=\"h-5 w-5\" />}\r\n            </AvatarFallback>\r\n        </Avatar>\r\n    );\r\n} ","module.exports = require(\"next/dist/compiled/next-server/app-page.runtime.prod.js\");","module.exports = require(\"punycode\");","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(authenticated)\\\\profile\\\\page.tsx\");\n","// src/use-is-hydrated.tsx\nimport { useSyncExternalStore } from \"use-sync-external-store/shim\";\nfunction useIsHydrated() {\n  return useSyncExternalStore(\n    subscribe,\n    () => true,\n    () => false\n  );\n}\nfunction subscribe() {\n  return () => {\n  };\n}\nexport {\n  useIsHydrated\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from 'react';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { useLayoutEffect } from '@radix-ui/react-use-layout-effect';\nimport { Primitive } from '@radix-ui/react-primitive';\nimport { useIsHydrated } from '@radix-ui/react-use-is-hydrated';\n\nimport type { Scope } from '@radix-ui/react-context';\n\n/* -------------------------------------------------------------------------------------------------\n * Avatar\n * -----------------------------------------------------------------------------------------------*/\n\nconst AVATAR_NAME = 'Avatar';\n\ntype ScopedProps<P> = P & { __scopeAvatar?: Scope };\nconst [createAvatarContext, createAvatarScope] = createContextScope(AVATAR_NAME);\n\ntype ImageLoadingStatus = 'idle' | 'loading' | 'loaded' | 'error';\n\ntype AvatarContextValue = {\n  imageLoadingStatus: ImageLoadingStatus;\n  onImageLoadingStatusChange(status: ImageLoadingStatus): void;\n};\n\nconst [AvatarProvider, useAvatarContext] = createAvatarContext<AvatarContextValue>(AVATAR_NAME);\n\ntype AvatarElement = React.ComponentRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = React.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface AvatarProps extends PrimitiveSpanProps {}\n\nconst Avatar = React.forwardRef<AvatarElement, AvatarProps>(\n  (props: ScopedProps<AvatarProps>, forwardedRef) => {\n    const { __scopeAvatar, ...avatarProps } = props;\n    const [imageLoadingStatus, setImageLoadingStatus] = React.useState<ImageLoadingStatus>('idle');\n    return (\n      <AvatarProvider\n        scope={__scopeAvatar}\n        imageLoadingStatus={imageLoadingStatus}\n        onImageLoadingStatusChange={setImageLoadingStatus}\n      >\n        <Primitive.span {...avatarProps} ref={forwardedRef} />\n      </AvatarProvider>\n    );\n  }\n);\n\nAvatar.displayName = AVATAR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AvatarImage\n * -----------------------------------------------------------------------------------------------*/\n\nconst IMAGE_NAME = 'AvatarImage';\n\ntype AvatarImageElement = React.ComponentRef<typeof Primitive.img>;\ntype PrimitiveImageProps = React.ComponentPropsWithoutRef<typeof Primitive.img>;\ninterface AvatarImageProps extends PrimitiveImageProps {\n  onLoadingStatusChange?: (status: ImageLoadingStatus) => void;\n}\n\nconst AvatarImage = React.forwardRef<AvatarImageElement, AvatarImageProps>(\n  (props: ScopedProps<AvatarImageProps>, forwardedRef) => {\n    const { __scopeAvatar, src, onLoadingStatusChange = () => {}, ...imageProps } = props;\n    const context = useAvatarContext(IMAGE_NAME, __scopeAvatar);\n    const imageLoadingStatus = useImageLoadingStatus(src, imageProps);\n    const handleLoadingStatusChange = useCallbackRef((status: ImageLoadingStatus) => {\n      onLoadingStatusChange(status);\n      context.onImageLoadingStatusChange(status);\n    });\n\n    useLayoutEffect(() => {\n      if (imageLoadingStatus !== 'idle') {\n        handleLoadingStatusChange(imageLoadingStatus);\n      }\n    }, [imageLoadingStatus, handleLoadingStatusChange]);\n\n    return imageLoadingStatus === 'loaded' ? (\n      <Primitive.img {...imageProps} ref={forwardedRef} src={src} />\n    ) : null;\n  }\n);\n\nAvatarImage.displayName = IMAGE_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AvatarFallback\n * -----------------------------------------------------------------------------------------------*/\n\nconst FALLBACK_NAME = 'AvatarFallback';\n\ntype AvatarFallbackElement = React.ComponentRef<typeof Primitive.span>;\ninterface AvatarFallbackProps extends PrimitiveSpanProps {\n  delayMs?: number;\n}\n\nconst AvatarFallback = React.forwardRef<AvatarFallbackElement, AvatarFallbackProps>(\n  (props: ScopedProps<AvatarFallbackProps>, forwardedRef) => {\n    const { __scopeAvatar, delayMs, ...fallbackProps } = props;\n    const context = useAvatarContext(FALLBACK_NAME, __scopeAvatar);\n    const [canRender, setCanRender] = React.useState(delayMs === undefined);\n\n    React.useEffect(() => {\n      if (delayMs !== undefined) {\n        const timerId = window.setTimeout(() => setCanRender(true), delayMs);\n        return () => window.clearTimeout(timerId);\n      }\n    }, [delayMs]);\n\n    return canRender && context.imageLoadingStatus !== 'loaded' ? (\n      <Primitive.span {...fallbackProps} ref={forwardedRef} />\n    ) : null;\n  }\n);\n\nAvatarFallback.displayName = FALLBACK_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction resolveLoadingStatus(image: HTMLImageElement | null, src?: string): ImageLoadingStatus {\n  if (!image) {\n    return 'idle';\n  }\n  if (!src) {\n    return 'error';\n  }\n  if (image.src !== src) {\n    image.src = src;\n  }\n  return image.complete && image.naturalWidth > 0 ? 'loaded' : 'loading';\n}\n\nfunction useImageLoadingStatus(\n  src: string | undefined,\n  { referrerPolicy, crossOrigin }: AvatarImageProps\n) {\n  const isHydrated = useIsHydrated();\n  const imageRef = React.useRef<HTMLImageElement | null>(null);\n  const image = (() => {\n    if (!isHydrated) return null;\n    if (!imageRef.current) {\n      imageRef.current = new window.Image();\n    }\n    return imageRef.current;\n  })();\n\n  const [loadingStatus, setLoadingStatus] = React.useState<ImageLoadingStatus>(() =>\n    resolveLoadingStatus(image, src)\n  );\n\n  useLayoutEffect(() => {\n    setLoadingStatus(resolveLoadingStatus(image, src));\n  }, [image, src]);\n\n  useLayoutEffect(() => {\n    const updateStatus = (status: ImageLoadingStatus) => () => {\n      setLoadingStatus(status);\n    };\n\n    if (!image) return;\n\n    const handleLoad = updateStatus('loaded');\n    const handleError = updateStatus('error');\n    image.addEventListener('load', handleLoad);\n    image.addEventListener('error', handleError);\n    if (referrerPolicy) {\n      image.referrerPolicy = referrerPolicy;\n    }\n    if (typeof crossOrigin === 'string') {\n      image.crossOrigin = crossOrigin;\n    }\n\n    return () => {\n      image.removeEventListener('load', handleLoad);\n      image.removeEventListener('error', handleError);\n    };\n  }, [image, crossOrigin, referrerPolicy]);\n\n  return loadingStatus;\n}\n\nconst Root = Avatar;\nconst Image = AvatarImage;\nconst Fallback = AvatarFallback;\n\nexport {\n  createAvatarScope,\n  //\n  Avatar,\n  AvatarImage,\n  AvatarFallback,\n  //\n  Root,\n  Image,\n  Fallback,\n};\nexport type { AvatarProps, AvatarImageProps, AvatarFallbackProps };\n","// Copied and adapted from shadcn/ui toast component\r\n// https://ui.shadcn.com/docs/components/toast\r\n\r\nimport * as React from \"react\"\r\n\r\nimport {\r\n    type ToastActionElement,\r\n    type ToastProps,\r\n} from \"./toast\"\r\n\r\nconst TOAST_LIMIT = 5\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n    id: string\r\n    title?: React.ReactNode\r\n    description?: React.ReactNode\r\n    action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n    ADD_TOAST: \"ADD_TOAST\",\r\n    UPDATE_TOAST: \"UPDATE_TOAST\",\r\n    DISMISS_TOAST: \"DISMISS_TOAST\",\r\n    REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n    count = (count + 1) % Number.MAX_VALUE\r\n    return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n    | {\r\n        type: ActionType[\"ADD_TOAST\"]\r\n        toast: ToasterToast\r\n    }\r\n    | {\r\n        type: ActionType[\"UPDATE_TOAST\"]\r\n        toast: Partial<ToasterToast>\r\n    }\r\n    | {\r\n        type: ActionType[\"DISMISS_TOAST\"]\r\n        toastId?: string\r\n    }\r\n    | {\r\n        type: ActionType[\"REMOVE_TOAST\"]\r\n        toastId?: string\r\n    }\r\n\r\ninterface State {\r\n    toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst reducer = (state: State, action: Action): State => {\r\n    switch (action.type) {\r\n        case actionTypes.ADD_TOAST:\r\n            return {\r\n                ...state,\r\n                toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n            }\r\n\r\n        case actionTypes.UPDATE_TOAST:\r\n            return {\r\n                ...state,\r\n                toasts: state.toasts.map((t) =>\r\n                    t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n                ),\r\n            }\r\n\r\n        case actionTypes.DISMISS_TOAST: {\r\n            const { toastId } = action\r\n\r\n            // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n            // but I'll keep it here for simplicity\r\n            if (toastId) {\r\n                if (toastTimeouts.has(toastId)) {\r\n                    clearTimeout(toastTimeouts.get(toastId))\r\n                    toastTimeouts.delete(toastId)\r\n                }\r\n            } else {\r\n                for (const [id, timeout] of toastTimeouts.entries()) {\r\n                    clearTimeout(timeout)\r\n                    toastTimeouts.delete(id)\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                toasts: state.toasts.map((t) =>\r\n                    t.id === toastId || toastId === undefined\r\n                        ? {\r\n                            ...t,\r\n                            open: false,\r\n                        }\r\n                        : t\r\n                ),\r\n            }\r\n        }\r\n        case actionTypes.REMOVE_TOAST:\r\n            if (action.toastId === undefined) {\r\n                return {\r\n                    ...state,\r\n                    toasts: [],\r\n                }\r\n            }\r\n            return {\r\n                ...state,\r\n                toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n            }\r\n    }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n    memoryState = reducer(memoryState, action)\r\n    listeners.forEach((listener) => {\r\n        listener(memoryState)\r\n    })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">\r\n\r\nfunction toast({ ...props }: Toast) {\r\n    const id = genId()\r\n\r\n    const update = (props: ToasterToast) =>\r\n        dispatch({\r\n            type: actionTypes.UPDATE_TOAST,\r\n            toast: { ...props, id },\r\n        })\r\n    const dismiss = () => dispatch({ type: actionTypes.DISMISS_TOAST, toastId: id })\r\n\r\n    dispatch({\r\n        type: actionTypes.ADD_TOAST,\r\n        toast: {\r\n            ...props,\r\n            id,\r\n            open: true,\r\n            onOpenChange: (open) => {\r\n                if (!open) dismiss()\r\n            },\r\n        },\r\n    })\r\n\r\n    return {\r\n        id,\r\n        dismiss,\r\n        update,\r\n    }\r\n}\r\n\r\nfunction useToast() {\r\n    const [state, setState] = React.useState<State>(memoryState)\r\n\r\n    React.useEffect(() => {\r\n        listeners.push(setState)\r\n        return () => {\r\n            const index = listeners.indexOf(setState)\r\n            if (index > -1) {\r\n                listeners.splice(index, 1)\r\n            }\r\n        }\r\n    }, [state])\r\n\r\n    return {\r\n        ...state,\r\n        toast,\r\n        dismiss: (toastId?: string) => dispatch({ type: actionTypes.DISMISS_TOAST, toastId }),\r\n    }\r\n}\r\n\r\nexport { useToast, toast } ","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 15668;\nmodule.exports = webpackEmptyContext;","\"use client\"\r\n\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Label }\r\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","module.exports = require(\"next/dist/server/app-render/action-async-storage.external.js\");","module.exports = require(\"process\");","module.exports = require(\"os\");","/**\r\n * @deprecated This file is maintained for backward compatibility.\r\n * Please import from '@/ui/atoms/avatar' instead.\r\n */\r\n\r\n'use client'\r\n\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst avatarVariants = cva(\r\n    \"relative flex shrink-0 overflow-hidden rounded-full\",\r\n    {\r\n        variants: {\r\n            size: {\r\n                sm: \"h-8 w-8\",\r\n                md: \"h-10 w-10\",\r\n                lg: \"h-12 w-12\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            size: \"md\",\r\n        },\r\n    }\r\n)\r\n\r\nconst Avatar = React.forwardRef<\r\n    React.ElementRef<typeof AvatarPrimitive.Root>,\r\n    React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root> &\r\n    VariantProps<typeof avatarVariants>\r\n>(({ className, size, ...props }, ref) => (\r\n    <AvatarPrimitive.Root\r\n        ref={ref}\r\n        className={cn(avatarVariants({ size }), className)}\r\n        {...props}\r\n    />\r\n))\r\nAvatar.displayName = AvatarPrimitive.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n    React.ElementRef<typeof AvatarPrimitive.Image>,\r\n    React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n    <AvatarPrimitive.Image\r\n        ref={ref}\r\n        className={cn(\"aspect-square h-full w-full\", className)}\r\n        {...props}\r\n    />\r\n))\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n    React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n    React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n    <AvatarPrimitive.Fallback\r\n        ref={ref}\r\n        className={cn(\r\n            \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n","module.exports = require(\"stream\");","module.exports = require(\"util\");","import * as React from 'react';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { createRovingFocusGroupScope } from '@radix-ui/react-roving-focus';\nimport { Presence } from '@radix-ui/react-presence';\nimport { Primitive } from '@radix-ui/react-primitive';\nimport * as RovingFocusGroup from '@radix-ui/react-roving-focus';\nimport { useDirection } from '@radix-ui/react-direction';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { useId } from '@radix-ui/react-id';\n\nimport type { Scope } from '@radix-ui/react-context';\n\n/* -------------------------------------------------------------------------------------------------\n * Tabs\n * -----------------------------------------------------------------------------------------------*/\n\nconst TABS_NAME = 'Tabs';\n\ntype ScopedProps<P> = P & { __scopeTabs?: Scope };\nconst [createTabsContext, createTabsScope] = createContextScope(TABS_NAME, [\n  createRovingFocusGroupScope,\n]);\nconst useRovingFocusGroupScope = createRovingFocusGroupScope();\n\ntype TabsContextValue = {\n  baseId: string;\n  value: string;\n  onValueChange: (value: string) => void;\n  orientation?: TabsProps['orientation'];\n  dir?: TabsProps['dir'];\n  activationMode?: TabsProps['activationMode'];\n};\n\nconst [TabsProvider, useTabsContext] = createTabsContext<TabsContextValue>(TABS_NAME);\n\ntype TabsElement = React.ComponentRef<typeof Primitive.div>;\ntype RovingFocusGroupProps = React.ComponentPropsWithoutRef<typeof RovingFocusGroup.Root>;\ntype PrimitiveDivProps = React.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface TabsProps extends PrimitiveDivProps {\n  /** The value for the selected tab, if controlled */\n  value?: string;\n  /** The value of the tab to select by default, if uncontrolled */\n  defaultValue?: string;\n  /** A function called when a new tab is selected */\n  onValueChange?: (value: string) => void;\n  /**\n   * The orientation the tabs are layed out.\n   * Mainly so arrow navigation is done accordingly (left & right vs. up & down)\n   * @defaultValue horizontal\n   */\n  orientation?: RovingFocusGroupProps['orientation'];\n  /**\n   * The direction of navigation between toolbar items.\n   */\n  dir?: RovingFocusGroupProps['dir'];\n  /**\n   * Whether a tab is activated automatically or manually.\n   * @defaultValue automatic\n   * */\n  activationMode?: 'automatic' | 'manual';\n}\n\nconst Tabs = React.forwardRef<TabsElement, TabsProps>(\n  (props: ScopedProps<TabsProps>, forwardedRef) => {\n    const {\n      __scopeTabs,\n      value: valueProp,\n      onValueChange,\n      defaultValue,\n      orientation = 'horizontal',\n      dir,\n      activationMode = 'automatic',\n      ...tabsProps\n    } = props;\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      onChange: onValueChange,\n      defaultProp: defaultValue ?? '',\n      caller: TABS_NAME,\n    });\n\n    return (\n      <TabsProvider\n        scope={__scopeTabs}\n        baseId={useId()}\n        value={value}\n        onValueChange={setValue}\n        orientation={orientation}\n        dir={direction}\n        activationMode={activationMode}\n      >\n        <Primitive.div\n          dir={direction}\n          data-orientation={orientation}\n          {...tabsProps}\n          ref={forwardedRef}\n        />\n      </TabsProvider>\n    );\n  }\n);\n\nTabs.displayName = TABS_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * TabsList\n * -----------------------------------------------------------------------------------------------*/\n\nconst TAB_LIST_NAME = 'TabsList';\n\ntype TabsListElement = React.ComponentRef<typeof Primitive.div>;\ninterface TabsListProps extends PrimitiveDivProps {\n  loop?: RovingFocusGroupProps['loop'];\n}\n\nconst TabsList = React.forwardRef<TabsListElement, TabsListProps>(\n  (props: ScopedProps<TabsListProps>, forwardedRef) => {\n    const { __scopeTabs, loop = true, ...listProps } = props;\n    const context = useTabsContext(TAB_LIST_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    return (\n      <RovingFocusGroup.Root\n        asChild\n        {...rovingFocusGroupScope}\n        orientation={context.orientation}\n        dir={context.dir}\n        loop={loop}\n      >\n        <Primitive.div\n          role=\"tablist\"\n          aria-orientation={context.orientation}\n          {...listProps}\n          ref={forwardedRef}\n        />\n      </RovingFocusGroup.Root>\n    );\n  }\n);\n\nTabsList.displayName = TAB_LIST_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * TabsTrigger\n * -----------------------------------------------------------------------------------------------*/\n\nconst TRIGGER_NAME = 'TabsTrigger';\n\ntype TabsTriggerElement = React.ComponentRef<typeof Primitive.button>;\ntype PrimitiveButtonProps = React.ComponentPropsWithoutRef<typeof Primitive.button>;\ninterface TabsTriggerProps extends PrimitiveButtonProps {\n  value: string;\n}\n\nconst TabsTrigger = React.forwardRef<TabsTriggerElement, TabsTriggerProps>(\n  (props: ScopedProps<TabsTriggerProps>, forwardedRef) => {\n    const { __scopeTabs, value, disabled = false, ...triggerProps } = props;\n    const context = useTabsContext(TRIGGER_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    return (\n      <RovingFocusGroup.Item\n        asChild\n        {...rovingFocusGroupScope}\n        focusable={!disabled}\n        active={isSelected}\n      >\n        <Primitive.button\n          type=\"button\"\n          role=\"tab\"\n          aria-selected={isSelected}\n          aria-controls={contentId}\n          data-state={isSelected ? 'active' : 'inactive'}\n          data-disabled={disabled ? '' : undefined}\n          disabled={disabled}\n          id={triggerId}\n          {...triggerProps}\n          ref={forwardedRef}\n          onMouseDown={composeEventHandlers(props.onMouseDown, (event) => {\n            // only call handler if it's the left button (mousedown gets triggered by all mouse buttons)\n            // but not when the control key is pressed (avoiding MacOS right click)\n            if (!disabled && event.button === 0 && event.ctrlKey === false) {\n              context.onValueChange(value);\n            } else {\n              // prevent focus to avoid accidental activation\n              event.preventDefault();\n            }\n          })}\n          onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n            if ([' ', 'Enter'].includes(event.key)) context.onValueChange(value);\n          })}\n          onFocus={composeEventHandlers(props.onFocus, () => {\n            // handle \"automatic\" activation if necessary\n            // ie. activate tab following focus\n            const isAutomaticActivation = context.activationMode !== 'manual';\n            if (!isSelected && !disabled && isAutomaticActivation) {\n              context.onValueChange(value);\n            }\n          })}\n        />\n      </RovingFocusGroup.Item>\n    );\n  }\n);\n\nTabsTrigger.displayName = TRIGGER_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * TabsContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst CONTENT_NAME = 'TabsContent';\n\ntype TabsContentElement = React.ComponentRef<typeof Primitive.div>;\ninterface TabsContentProps extends PrimitiveDivProps {\n  value: string;\n\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst TabsContent = React.forwardRef<TabsContentElement, TabsContentProps>(\n  (props: ScopedProps<TabsContentProps>, forwardedRef) => {\n    const { __scopeTabs, value, forceMount, children, ...contentProps } = props;\n    const context = useTabsContext(CONTENT_NAME, __scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    const isMountAnimationPreventedRef = React.useRef(isSelected);\n\n    React.useEffect(() => {\n      const rAF = requestAnimationFrame(() => (isMountAnimationPreventedRef.current = false));\n      return () => cancelAnimationFrame(rAF);\n    }, []);\n\n    return (\n      <Presence present={forceMount || isSelected}>\n        {({ present }) => (\n          <Primitive.div\n            data-state={isSelected ? 'active' : 'inactive'}\n            data-orientation={context.orientation}\n            role=\"tabpanel\"\n            aria-labelledby={triggerId}\n            hidden={!present}\n            id={contentId}\n            tabIndex={0}\n            {...contentProps}\n            ref={forwardedRef}\n            style={{\n              ...props.style,\n              animationDuration: isMountAnimationPreventedRef.current ? '0s' : undefined,\n            }}\n          >\n            {present && children}\n          </Primitive.div>\n        )}\n      </Presence>\n    );\n  }\n);\n\nTabsContent.displayName = CONTENT_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\nfunction makeTriggerId(baseId: string, value: string) {\n  return `${baseId}-trigger-${value}`;\n}\n\nfunction makeContentId(baseId: string, value: string) {\n  return `${baseId}-content-${value}`;\n}\n\nconst Root = Tabs;\nconst List = TabsList;\nconst Trigger = TabsTrigger;\nconst Content = TabsContent;\n\nexport {\n  createTabsScope,\n  //\n  Tabs,\n  TabsList,\n  TabsTrigger,\n  TabsContent,\n  //\n  Root,\n  List,\n  Trigger,\n  Content,\n};\nexport type { TabsProps, TabsListProps, TabsTriggerProps, TabsContentProps };\n","module.exports = require(\"fs\");","module.exports = require(\"next/dist/server/app-render/work-async-storage.external.js\");","import * as React from 'react';\nimport { Primitive } from '@radix-ui/react-primitive';\n\n/* -------------------------------------------------------------------------------------------------\n * Label\n * -----------------------------------------------------------------------------------------------*/\n\nconst NAME = 'Label';\n\ntype LabelElement = React.ComponentRef<typeof Primitive.label>;\ntype PrimitiveLabelProps = React.ComponentPropsWithoutRef<typeof Primitive.label>;\ninterface LabelProps extends PrimitiveLabelProps {}\n\nconst Label = React.forwardRef<LabelElement, LabelProps>((props, forwardedRef) => {\n  return (\n    <Primitive.label\n      {...props}\n      ref={forwardedRef}\n      onMouseDown={(event) => {\n        // only prevent text selection if clicking inside the label itself\n        const target = event.target as HTMLElement;\n        if (target.closest('button, input, select, textarea')) return;\n\n        props.onMouseDown?.(event);\n        // prevent text selection when double clicking label\n        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n      }}\n    />\n  );\n});\n\nLabel.displayName = NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nconst Root = Label;\n\nexport {\n  Label,\n  //\n  Root,\n};\nexport type { LabelProps };\n","module.exports = require(\"node:child_process\");","import {\n  createBrowserClient as _createBrowserClient,\n  createServerClient as _createServerClient,\n} from \"@supabase/ssr\";\nimport {\n  createClient as createSupabaseClient,\n  SupabaseClient,\n  type SupabaseClient as CoreSupabaseClient,\n} from \"@supabase/supabase-js\";\nimport fetchPonyfill from \"fetch-ponyfill\";\nimport { useMemo } from \"react\";\n\nimport type { Database } from \"@/types/database.types\";\n\nimport type { ReadonlyRequestCookies } from \"next/dist/server/web/spec-extension/adapters/request-cookies\";\n\n// Get fetch from ponyfill to avoid undici issues like 'Failed to execute 'fetch' on 'Window': Invalid name'\n// See: https://github.com/vercel/next.js/issues/54827\nconst { fetch: ponyfetch } = fetchPonyfill();\n\n// Environment variables for Supabase\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\nconst serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n\n// Type alias for clarity\nexport type TypedSupabaseClient = SupabaseClient<Database>;\nexport type TypedSSRSupabaseClient = CoreSupabaseClient<Database>;\n\n// --------------------------------------\n// Shared header builders\n// --------------------------------------\n\n/**\n * Default headers that must accompany every request made via a browser or server client\n * which authenticates with the anonymous public key.  This prevents 401 responses from\n * PostgREST that indicate the `apikey` header is missing.\n */\nconst anonymousHeaders: Record<string, string> | undefined = supabaseAnonKey\n  ? { apikey: supabaseAnonKey }\n  : undefined;\n\n/**\n * Default headers for the service-role client.  These include the service key as both the\n * `apikey` header and (where relevant) the `Authorization` header is still injected by the\n * libraryʼs internal `fetchWithAuth` helper.\n */\nconst serviceHeaders: Record<string, string> | undefined = serviceRoleKey\n  ? { apikey: serviceRoleKey }\n  : undefined;\n\n// Helper function to check essential env vars\nfunction checkPublicEnvVars() {\n  if (process.env.NODE_ENV === \"development\") {\n    console.debug(\n      \"[Supabase Env] NEXT_PUBLIC_SUPABASE_URL present?\",\n      !!supabaseUrl\n    );\n    console.debug(\n      \"[Supabase Env] NEXT_PUBLIC_SUPABASE_ANON_KEY present?\",\n      !!supabaseAnonKey\n    );\n    console.debug(\n      \"[Supabase Env] SUPABASE_SERVICE_ROLE_KEY present?\",\n      !!serviceRoleKey\n    );\n  }\n  if (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\n      \"Missing environment variables NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY\"\n    );\n    throw new Error(\"Supabase URL or Anon Key is missing.\");\n  }\n}\n\n// --------------------------------------\n// Patch global `fetch` on the **server** to use `ponyfetch`.\n// This avoids the infamous Undici \"Socket closed unexpectedly\" bug on\n// Windows/Node 18-20 without relying on fragile Undici internals.\n// The patch is idempotent and NO-OPs in the browser.\n\nif (typeof window === \"undefined\") {\n  const g = globalThis as any;\n  if (!g.__USING_PONYFETCH__) {\n    g.fetch = ponyfetch as unknown as typeof fetch;\n    g.__USING_PONYFETCH__ = true;\n    console.info(\"[Supabase] Server fetch patched to use ponyfetch ✅\");\n  }\n}\n\n// --- Browser Client (Singleton with Hook) ---\nlet browserClientInstance: TypedSSRSupabaseClient | undefined;\n\nfunction getSupabaseBrowserClient(): TypedSSRSupabaseClient {\n  checkPublicEnvVars();\n  if (browserClientInstance) {\n    return browserClientInstance;\n  }\n\n  // In the browser we rely on the native `fetch` implementation to ensure that\n  // request headers (apikey/Authorization) are preserved. Injecting a ponyfill\n  // here has proven to strip custom headers in certain edge-cases, leading to\n  // 401 \"No API key found\" responses. Therefore we only attach the required\n  // headers and leave `fetch` undefined so @supabase/ssr uses the global one.\n\n  browserClientInstance = _createBrowserClient<Database>(\n    supabaseUrl!,\n    supabaseAnonKey!,\n    {\n      global: {\n        headers: anonymousHeaders,\n      },\n    }\n  );\n\n  if (typeof window !== \"undefined\") {\n    console.debug(\"[Supabase] anon key present?\", !!supabaseAnonKey);\n  }\n\n  return browserClientInstance;\n}\n\n/**\n * Hook to get a Supabase client instance suitable for Browser/Client Components.\n * Uses a singleton pattern to ensure only one client instance is created.\n * Leverages @supabase/ssr for proper session handling with Next.js App Router.\n * @returns Memoized Supabase client instance for browser usage.\n */\nexport function useSupabaseBrowser(): TypedSSRSupabaseClient {\n  return useMemo(getSupabaseBrowserClient, []);\n}\n\n// This is the primary export for creating a browser client directly\nexport function createClient(): TypedSSRSupabaseClient {\n  checkPublicEnvVars();\n  return _createBrowserClient<Database>(supabaseUrl!, supabaseAnonKey!, {\n    global: {\n      headers: anonymousHeaders,\n    },\n  });\n}\n\n// --- Server Client (For Server Components, Route Handlers, Server Actions) ---\n\n/**\n * Creates a Supabase client suitable for use in Server Components, Server Actions,\n * and Route Handlers that require access to cookies.\n * @param cookieStore A ReadonlyRequestCookies instance (e.g., from `next/headers`).\n * @returns Supabase client instance for server-side usage with cookie handling.\n */\nexport function createSupabaseServerClient(\n  cookieStore: ReadonlyRequestCookies\n): TypedSSRSupabaseClient {\n  checkPublicEnvVars();\n  return _createServerClient<Database>(supabaseUrl!, supabaseAnonKey!, {\n    cookies: {\n      get(name: string) {\n        return cookieStore.get(name)?.value;\n      },\n      set(name: string, value: string, options) {\n        try {\n          cookieStore.set(name, value, options);\n        } catch (error) {\n          console.warn(`Failed to set cookie '${name}':`, error);\n        }\n      },\n      remove(name: string, options) {\n        try {\n          cookieStore.set(name, \"\", options);\n        } catch (error) {\n          console.warn(`Failed to remove cookie '${name}':`, error);\n        }\n      },\n    },\n    global: {\n      fetch: ponyfetch,\n      headers: anonymousHeaders,\n    },\n  });\n}\n\n// --- Service Role Client (Admin Operations) ---\n\n/**\n * Creates a Supabase client with the service role key for admin operations.\n * WARNING: This client bypasses RLS. Use only in trusted server-side environments\n * with proper authorization checks. NEVER expose the service role key to the browser.\n * @returns Supabase client instance with service_role privileges.\n */\nexport function createSupabaseServiceClient(): TypedSupabaseClient {\n  if (!supabaseUrl || !serviceRoleKey) {\n    console.error(\"Supabase URL or Service Role Key is missing\");\n    throw new Error(\"Supabase service client configuration is incomplete.\");\n  }\n\n  return createSupabaseClient<Database>(supabaseUrl, serviceRoleKey, {\n    auth: {\n      autoRefreshToken: false,\n      persistSession: false,\n    },\n    global: {\n      fetch: ponyfetch,\n      headers: serviceHeaders,\n    },\n  });\n}\n\n// --- Client with Custom Auth Token ---\n\n/**\n * Creates a Supabase client authenticated with a custom JWT token.\n * Useful for scenarios like testing or specific server-to-server interactions.\n * @param authToken JWT token for authentication.\n * @returns Authenticated Supabase client instance.\n */\nexport function createClientWithAuth(authToken: string): TypedSupabaseClient {\n  checkPublicEnvVars();\n  return createSupabaseClient<Database>(supabaseUrl!, supabaseAnonKey!, {\n    auth: {\n      persistSession: false,\n      autoRefreshToken: false,\n      detectSessionInUrl: false,\n    },\n    global: {\n      fetch: ponyfetch,\n      headers: {\n        Authorization: `Bearer ${authToken}`,\n        ...(anonymousHeaders ?? {}),\n      },\n    },\n  });\n}\n\n// ======================================\n// EDGE RUNTIME CLIENT\n// ======================================\n\n/**\n * Creates a Supabase client suitable for Edge Runtime environments (e.g., Edge Functions, Middleware).\n * Reads cookies from the Request headers. Requires manual handling for setting/removing cookies\n * via Response headers in the calling Edge function.\n * @param request The Request object from the Edge Function context.\n */\nexport const createEdgeClient = (request: Request): TypedSSRSupabaseClient => {\n  checkPublicEnvVars();\n  const cookieHeader = request.headers.get(\"cookie\") ?? \"\";\n\n  return _createServerClient<Database>(supabaseUrl!, supabaseAnonKey!, {\n    cookies: {\n      get(name: string) {\n        const match = cookieHeader.match(new RegExp(`(^|;)\\s*${name}=([^;]+)`));\n        return match?.[2];\n      },\n      set(name: string, value: string, options) {\n        console.warn(\n          `Attempted to set cookie '${name}' in createEdgeClient. This must be handled by the caller via Response headers.`\n        );\n      },\n      remove(name: string, options) {\n        console.warn(\n          `Attempted to remove cookie '${name}' in createEdgeClient. This must be handled by the caller via Response headers.`\n        );\n      },\n    },\n    global: {\n      fetch: ponyfetch,\n      headers: anonymousHeaders,\n    },\n  });\n};\n\n// --- Remove Deprecated Compatibility Exports ---\n\n/**\n * @deprecated Use `useSupabaseBrowser` in Client Components or `createSupabaseServerClient` in Server Components/Actions/Routes.\n */\nexport const getSupabaseClient = getSupabaseBrowserClient;\n\n/**\n * @deprecated Use `createSupabaseServiceClient` for elevated privilege operations.\n */\nexport const createServiceClient = createSupabaseServiceClient;\n\n/**\n * @deprecated Prefer specific client creation (`useSupabaseBrowser`, `createSupabaseServerClient`, `createSupabaseServiceClient`). Avoid direct default export usage.\n */\nexport const supabase = getSupabaseBrowserClient();\n","module.exports = require(\"path\");","module.exports = require(\"tls\");","module.exports = require(\"diagnostics_channel\");","module.exports = require(\"node:http\");","/**\r\n * @deprecated This file is maintained for backward compatibility.\r\n * Please import from '@/ui/atoms/textarea' instead.\r\n */\r\n\r\n\"use client\"\r\n\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface TextareaProps\r\n    extends React.TextareaHTMLAttributes<HTMLTextAreaElement> { }\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n    ({ className, ...props }, ref) => {\r\n        return (\r\n            <textarea\r\n                className={cn(\r\n                    \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n","module.exports = require(\"node:zlib\");","module.exports = require(\"node:tls\");","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","// packages/react/id/src/id.tsx\nimport * as React from \"react\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nvar useReactId = React[\" useId \".trim().toString()] || (() => void 0);\nvar count = 0;\nfunction useId(deterministicId) {\n  const [id, setId] = React.useState(useReactId());\n  useLayoutEffect(() => {\n    if (!deterministicId) setId((reactId) => reactId ?? String(count++));\n  }, [deterministicId]);\n  return deterministicId || (id ? `radix-${id}` : \"\");\n}\nexport {\n  useId\n};\n//# sourceMappingURL=index.mjs.map\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('User', [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n]);\n\nexport default User;\n","module.exports = require(\"node:https\");","module.exports = require(\"node:os\");","import * as origModule from 'next/dist/server/app-render/work-unit-async-storage.external.js';\nimport * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nimport * as Sentry from '@sentry/nextjs';\n\n// @ts-expect-error Because we cannot be sure if the RequestAsyncStorage module exists (it is not part of the Next.js public\n// API) we use a shim if it doesn't exist. The logic for this is in the wrapping loader.\n\nconst asyncStorageModule = { ...origModule } ;\n\nconst requestAsyncStorage =\n  'workUnitAsyncStorage' in asyncStorageModule\n    ? asyncStorageModule.workUnitAsyncStorage\n    : 'requestAsyncStorage' in asyncStorageModule\n      ? asyncStorageModule.requestAsyncStorage\n      : undefined;\n\nconst serverComponent = serverComponentModule.default;\n\nlet wrappedServerComponent;\nif (typeof serverComponent === 'function') {\n  // For some odd Next.js magic reason, `headers()` will not work if used inside `wrapServerComponentsWithSentry`.\n  // Current assumption is that Next.js applies some loader magic to userfiles, but not files in node_modules. This file\n  // is technically a userfile so it gets the loader magic applied.\n  wrappedServerComponent = new Proxy(serverComponent, {\n    apply: (originalFunction, thisArg, args) => {\n      let sentryTraceHeader = undefined;\n      let baggageHeader = undefined;\n      let headers = undefined;\n\n      // We try-catch here just in `requestAsyncStorage` is undefined since it may not be defined\n      try {\n        const requestAsyncStore = requestAsyncStorage?.getStore() ;\n        sentryTraceHeader = requestAsyncStore?.headers.get('sentry-trace') ?? undefined;\n        baggageHeader = requestAsyncStore?.headers.get('baggage') ?? undefined;\n        headers = requestAsyncStore?.headers;\n      } catch (e) {\n        /** empty */\n      }\n\n      return Sentry.wrapServerComponentWithSentry(originalFunction, {\n        componentRoute: '/(authenticated)/profile',\n        componentType: 'Page',\n        sentryTraceHeader,\n        baggageHeader,\n        headers,\n      }).apply(thisArg, args);\n    },\n  });\n} else {\n  wrappedServerComponent = serverComponent;\n}\n\nconst generateMetadata = serverComponentModule.generateMetadata\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateMetadata, {\n      componentRoute: '/(authenticated)/profile',\n      componentType: 'Page',\n      generationFunctionIdentifier: 'generateMetadata',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst generateImageMetadata = serverComponentModule.generateImageMetadata\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateImageMetadata, {\n      componentRoute: '/(authenticated)/profile',\n      componentType: 'Page',\n      generationFunctionIdentifier: 'generateImageMetadata',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst generateViewport = serverComponentModule.generateViewport\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateViewport, {\n      componentRoute: '/(authenticated)/profile',\n      componentType: 'Page',\n      generationFunctionIdentifier: 'generateViewport',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst wrappedServerComponent$1 = wrappedServerComponent;\n\nexport { wrappedServerComponent$1 as default, generateImageMetadata, generateMetadata, generateViewport };\n","module.exports = require(\"node:diagnostics_channel\");","module.exports = require(\"crypto\");","module.exports = require(\"https\");","// src/primitive.tsx\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { createSlot } from \"@radix-ui/react-slot\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NODES = [\n  \"a\",\n  \"button\",\n  \"div\",\n  \"form\",\n  \"h2\",\n  \"h3\",\n  \"img\",\n  \"input\",\n  \"label\",\n  \"li\",\n  \"nav\",\n  \"ol\",\n  \"p\",\n  \"select\",\n  \"span\",\n  \"svg\",\n  \"ul\"\n];\nvar Primitive = NODES.reduce((primitive, node) => {\n  const Slot = createSlot(`Primitive.${node}`);\n  const Node = React.forwardRef((props, forwardedRef) => {\n    const { asChild, ...primitiveProps } = props;\n    const Comp = asChild ? Slot : node;\n    if (typeof window !== \"undefined\") {\n      window[Symbol.for(\"radix-ui\")] = true;\n    }\n    return /* @__PURE__ */ jsx(Comp, { ...primitiveProps, ref: forwardedRef });\n  });\n  Node.displayName = `Primitive.${node}`;\n  return { ...primitive, [node]: Node };\n}, {});\nfunction dispatchDiscreteCustomEvent(target, event) {\n  if (target) ReactDOM.flushSync(() => target.dispatchEvent(event));\n}\nvar Root = Primitive;\nexport {\n  Primitive,\n  Root,\n  dispatchDiscreteCustomEvent\n};\n//# sourceMappingURL=index.mjs.map\n","module.exports = require(\"node:stream\");","module.exports = require(\"node:util\");","import * as React from 'react';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { createCollection } from '@radix-ui/react-collection';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useId } from '@radix-ui/react-id';\nimport { Primitive } from '@radix-ui/react-primitive';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { useDirection } from '@radix-ui/react-direction';\n\nimport type { Scope } from '@radix-ui/react-context';\n\nconst ENTRY_FOCUS = 'rovingFocusGroup.onEntryFocus';\nconst EVENT_OPTIONS = { bubbles: false, cancelable: true };\n\n/* -------------------------------------------------------------------------------------------------\n * RovingFocusGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst GROUP_NAME = 'RovingFocusGroup';\n\ntype ItemData = { id: string; focusable: boolean; active: boolean };\nconst [Collection, useCollection, createCollectionScope] = createCollection<\n  HTMLSpanElement,\n  ItemData\n>(GROUP_NAME);\n\ntype ScopedProps<P> = P & { __scopeRovingFocusGroup?: Scope };\nconst [createRovingFocusGroupContext, createRovingFocusGroupScope] = createContextScope(\n  GROUP_NAME,\n  [createCollectionScope]\n);\n\ntype Orientation = React.AriaAttributes['aria-orientation'];\ntype Direction = 'ltr' | 'rtl';\n\ninterface RovingFocusGroupOptions {\n  /**\n   * The orientation of the group.\n   * Mainly so arrow navigation is done accordingly (left & right vs. up & down)\n   */\n  orientation?: Orientation;\n  /**\n   * The direction of navigation between items.\n   */\n  dir?: Direction;\n  /**\n   * Whether keyboard navigation should loop around\n   * @defaultValue false\n   */\n  loop?: boolean;\n}\n\ntype RovingContextValue = RovingFocusGroupOptions & {\n  currentTabStopId: string | null;\n  onItemFocus(tabStopId: string): void;\n  onItemShiftTab(): void;\n  onFocusableItemAdd(): void;\n  onFocusableItemRemove(): void;\n};\n\nconst [RovingFocusProvider, useRovingFocusContext] =\n  createRovingFocusGroupContext<RovingContextValue>(GROUP_NAME);\n\ntype RovingFocusGroupElement = RovingFocusGroupImplElement;\ninterface RovingFocusGroupProps extends RovingFocusGroupImplProps {}\n\nconst RovingFocusGroup = React.forwardRef<RovingFocusGroupElement, RovingFocusGroupProps>(\n  (props: ScopedProps<RovingFocusGroupProps>, forwardedRef) => {\n    return (\n      <Collection.Provider scope={props.__scopeRovingFocusGroup}>\n        <Collection.Slot scope={props.__scopeRovingFocusGroup}>\n          <RovingFocusGroupImpl {...props} ref={forwardedRef} />\n        </Collection.Slot>\n      </Collection.Provider>\n    );\n  }\n);\n\nRovingFocusGroup.displayName = GROUP_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\ntype RovingFocusGroupImplElement = React.ComponentRef<typeof Primitive.div>;\ntype PrimitiveDivProps = React.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface RovingFocusGroupImplProps\n  extends Omit<PrimitiveDivProps, 'dir'>,\n    RovingFocusGroupOptions {\n  currentTabStopId?: string | null;\n  defaultCurrentTabStopId?: string;\n  onCurrentTabStopIdChange?: (tabStopId: string | null) => void;\n  onEntryFocus?: (event: Event) => void;\n  preventScrollOnEntryFocus?: boolean;\n}\n\nconst RovingFocusGroupImpl = React.forwardRef<\n  RovingFocusGroupImplElement,\n  RovingFocusGroupImplProps\n>((props: ScopedProps<RovingFocusGroupImplProps>, forwardedRef) => {\n  const {\n    __scopeRovingFocusGroup,\n    orientation,\n    loop = false,\n    dir,\n    currentTabStopId: currentTabStopIdProp,\n    defaultCurrentTabStopId,\n    onCurrentTabStopIdChange,\n    onEntryFocus,\n    preventScrollOnEntryFocus = false,\n    ...groupProps\n  } = props;\n  const ref = React.useRef<RovingFocusGroupImplElement>(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const direction = useDirection(dir);\n  const [currentTabStopId, setCurrentTabStopId] = useControllableState({\n    prop: currentTabStopIdProp,\n    defaultProp: defaultCurrentTabStopId ?? null,\n    onChange: onCurrentTabStopIdChange,\n    caller: GROUP_NAME,\n  });\n  const [isTabbingBackOut, setIsTabbingBackOut] = React.useState(false);\n  const handleEntryFocus = useCallbackRef(onEntryFocus);\n  const getItems = useCollection(__scopeRovingFocusGroup);\n  const isClickFocusRef = React.useRef(false);\n  const [focusableItemsCount, setFocusableItemsCount] = React.useState(0);\n\n  React.useEffect(() => {\n    const node = ref.current;\n    if (node) {\n      node.addEventListener(ENTRY_FOCUS, handleEntryFocus);\n      return () => node.removeEventListener(ENTRY_FOCUS, handleEntryFocus);\n    }\n  }, [handleEntryFocus]);\n\n  return (\n    <RovingFocusProvider\n      scope={__scopeRovingFocusGroup}\n      orientation={orientation}\n      dir={direction}\n      loop={loop}\n      currentTabStopId={currentTabStopId}\n      onItemFocus={React.useCallback(\n        (tabStopId) => setCurrentTabStopId(tabStopId),\n        [setCurrentTabStopId]\n      )}\n      onItemShiftTab={React.useCallback(() => setIsTabbingBackOut(true), [])}\n      onFocusableItemAdd={React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount + 1),\n        []\n      )}\n      onFocusableItemRemove={React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount - 1),\n        []\n      )}\n    >\n      <Primitive.div\n        tabIndex={isTabbingBackOut || focusableItemsCount === 0 ? -1 : 0}\n        data-orientation={orientation}\n        {...groupProps}\n        ref={composedRefs}\n        style={{ outline: 'none', ...props.style }}\n        onMouseDown={composeEventHandlers(props.onMouseDown, () => {\n          isClickFocusRef.current = true;\n        })}\n        onFocus={composeEventHandlers(props.onFocus, (event) => {\n          // We normally wouldn't need this check, because we already check\n          // that the focus is on the current target and not bubbling to it.\n          // We do this because Safari doesn't focus buttons when clicked, and\n          // instead, the wrapper will get focused and not through a bubbling event.\n          const isKeyboardFocus = !isClickFocusRef.current;\n\n          if (event.target === event.currentTarget && isKeyboardFocus && !isTabbingBackOut) {\n            const entryFocusEvent = new CustomEvent(ENTRY_FOCUS, EVENT_OPTIONS);\n            event.currentTarget.dispatchEvent(entryFocusEvent);\n\n            if (!entryFocusEvent.defaultPrevented) {\n              const items = getItems().filter((item) => item.focusable);\n              const activeItem = items.find((item) => item.active);\n              const currentItem = items.find((item) => item.id === currentTabStopId);\n              const candidateItems = [activeItem, currentItem, ...items].filter(\n                Boolean\n              ) as typeof items;\n              const candidateNodes = candidateItems.map((item) => item.ref.current!);\n              focusFirst(candidateNodes, preventScrollOnEntryFocus);\n            }\n          }\n\n          isClickFocusRef.current = false;\n        })}\n        onBlur={composeEventHandlers(props.onBlur, () => setIsTabbingBackOut(false))}\n      />\n    </RovingFocusProvider>\n  );\n});\n\n/* -------------------------------------------------------------------------------------------------\n * RovingFocusGroupItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst ITEM_NAME = 'RovingFocusGroupItem';\n\ntype RovingFocusItemElement = React.ComponentRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = React.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface RovingFocusItemProps extends Omit<PrimitiveSpanProps, 'children'> {\n  tabStopId?: string;\n  focusable?: boolean;\n  active?: boolean;\n  children?:\n    | React.ReactNode\n    | ((props: { hasTabStop: boolean; isCurrentTabStop: boolean }) => React.ReactNode);\n}\n\nconst RovingFocusGroupItem = React.forwardRef<RovingFocusItemElement, RovingFocusItemProps>(\n  (props: ScopedProps<RovingFocusItemProps>, forwardedRef) => {\n    const {\n      __scopeRovingFocusGroup,\n      focusable = true,\n      active = false,\n      tabStopId,\n      children,\n      ...itemProps\n    } = props;\n    const autoId = useId();\n    const id = tabStopId || autoId;\n    const context = useRovingFocusContext(ITEM_NAME, __scopeRovingFocusGroup);\n    const isCurrentTabStop = context.currentTabStopId === id;\n    const getItems = useCollection(__scopeRovingFocusGroup);\n\n    const { onFocusableItemAdd, onFocusableItemRemove, currentTabStopId } = context;\n\n    React.useEffect(() => {\n      if (focusable) {\n        onFocusableItemAdd();\n        return () => onFocusableItemRemove();\n      }\n    }, [focusable, onFocusableItemAdd, onFocusableItemRemove]);\n\n    return (\n      <Collection.ItemSlot\n        scope={__scopeRovingFocusGroup}\n        id={id}\n        focusable={focusable}\n        active={active}\n      >\n        <Primitive.span\n          tabIndex={isCurrentTabStop ? 0 : -1}\n          data-orientation={context.orientation}\n          {...itemProps}\n          ref={forwardedRef}\n          onMouseDown={composeEventHandlers(props.onMouseDown, (event) => {\n            // We prevent focusing non-focusable items on `mousedown`.\n            // Even though the item has tabIndex={-1}, that only means take it out of the tab order.\n            if (!focusable) event.preventDefault();\n            // Safari doesn't focus a button when clicked so we run our logic on mousedown also\n            else context.onItemFocus(id);\n          })}\n          onFocus={composeEventHandlers(props.onFocus, () => context.onItemFocus(id))}\n          onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n            if (event.key === 'Tab' && event.shiftKey) {\n              context.onItemShiftTab();\n              return;\n            }\n\n            if (event.target !== event.currentTarget) return;\n\n            const focusIntent = getFocusIntent(event, context.orientation, context.dir);\n\n            if (focusIntent !== undefined) {\n              if (event.metaKey || event.ctrlKey || event.altKey || event.shiftKey) return;\n              event.preventDefault();\n              const items = getItems().filter((item) => item.focusable);\n              let candidateNodes = items.map((item) => item.ref.current!);\n\n              if (focusIntent === 'last') candidateNodes.reverse();\n              else if (focusIntent === 'prev' || focusIntent === 'next') {\n                if (focusIntent === 'prev') candidateNodes.reverse();\n                const currentIndex = candidateNodes.indexOf(event.currentTarget);\n                candidateNodes = context.loop\n                  ? wrapArray(candidateNodes, currentIndex + 1)\n                  : candidateNodes.slice(currentIndex + 1);\n              }\n\n              /**\n               * Imperative focus during keydown is risky so we prevent React's batching updates\n               * to avoid potential bugs. See: https://github.com/facebook/react/issues/20332\n               */\n              setTimeout(() => focusFirst(candidateNodes));\n            }\n          })}\n        >\n          {typeof children === 'function'\n            ? children({ isCurrentTabStop, hasTabStop: currentTabStopId != null })\n            : children}\n        </Primitive.span>\n      </Collection.ItemSlot>\n    );\n  }\n);\n\nRovingFocusGroupItem.displayName = ITEM_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\n// prettier-ignore\nconst MAP_KEY_TO_FOCUS_INTENT: Record<string, FocusIntent> = {\n  ArrowLeft: 'prev', ArrowUp: 'prev',\n  ArrowRight: 'next', ArrowDown: 'next',\n  PageUp: 'first', Home: 'first',\n  PageDown: 'last', End: 'last',\n};\n\nfunction getDirectionAwareKey(key: string, dir?: Direction) {\n  if (dir !== 'rtl') return key;\n  return key === 'ArrowLeft' ? 'ArrowRight' : key === 'ArrowRight' ? 'ArrowLeft' : key;\n}\n\ntype FocusIntent = 'first' | 'last' | 'prev' | 'next';\n\nfunction getFocusIntent(event: React.KeyboardEvent, orientation?: Orientation, dir?: Direction) {\n  const key = getDirectionAwareKey(event.key, dir);\n  if (orientation === 'vertical' && ['ArrowLeft', 'ArrowRight'].includes(key)) return undefined;\n  if (orientation === 'horizontal' && ['ArrowUp', 'ArrowDown'].includes(key)) return undefined;\n  return MAP_KEY_TO_FOCUS_INTENT[key];\n}\n\nfunction focusFirst(candidates: HTMLElement[], preventScroll = false) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    // if focus is already where we want to go, we don't want to keep going through the candidates\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus({ preventScroll });\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\n\n/**\n * Wraps an array around itself at a given start index\n * Example: `wrapArray(['a', 'b', 'c', 'd'], 2) === ['c', 'd', 'a', 'b']`\n */\nfunction wrapArray<T>(array: T[], startIndex: number) {\n  return array.map<T>((_, index) => array[(startIndex + index) % array.length]!);\n}\n\nconst Root = RovingFocusGroup;\nconst Item = RovingFocusGroupItem;\n\nexport {\n  createRovingFocusGroupScope,\n  //\n  RovingFocusGroup,\n  RovingFocusGroupItem,\n  //\n  Root,\n  Item,\n};\nexport type { RovingFocusGroupProps, RovingFocusItemProps };\n","/* (ignored) */","import { AuthError as SupabaseAuthError } from '@supabase/supabase-js';\r\n\r\n/**\r\n * Base class for all authentication errors\r\n */\r\nexport class AuthError extends Error {\r\n  public code: string;\r\n  public status?: number;\r\n  public originalError?: Error;\r\n\r\n  constructor(message: string, code: string, originalError?: Error, status?: number) {\r\n    super(message);\r\n    this.name = 'AuthError';\r\n    this.code = code;\r\n    this.status = status;\r\n    this.originalError = originalError;\r\n  }\r\n\r\n  /**\r\n   * Create a JSON representation of the error\r\n   */\r\n  toJSON() {\r\n    return {\r\n      name: this.name,\r\n      message: this.message,\r\n      code: this.code,\r\n      status: this.status\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Create error response for API routes\r\n   */\r\n  toResponse() {\r\n    return new Response(\r\n      JSON.stringify({\r\n        error: {\r\n          message: this.message,\r\n          code: this.code\r\n        }\r\n      }),\r\n      {\r\n        status: this.status || 500,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      }\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Error thrown when user is not authenticated\r\n */\r\nexport class UnauthorizedError extends AuthError {\r\n  constructor(message = 'Authentication required', originalError?: Error) {\r\n    super(message, 'auth/unauthorized', originalError, 401);\r\n    this.name = 'UnauthorizedError';\r\n  }\r\n}\r\n\r\n/**\r\n * Error thrown when user doesn't have sufficient permissions\r\n */\r\nexport class ForbiddenError extends AuthError {\r\n  constructor(message = 'Insufficient permissions', originalError?: Error) {\r\n    super(message, 'auth/forbidden', originalError, 403);\r\n    this.name = 'ForbiddenError';\r\n  }\r\n}\r\n\r\n/**\r\n * Error thrown when there's an issue with session management\r\n */\r\nexport class SessionError extends AuthError {\r\n  constructor(message = 'Session error', originalError?: Error) {\r\n    super(message, 'auth/session-error', originalError, 400);\r\n    this.name = 'SessionError';\r\n  }\r\n}\r\n\r\n/**\r\n * Error thrown when credentials are invalid\r\n */\r\nexport class InvalidCredentialsError extends AuthError {\r\n  constructor(message = 'Invalid credentials', originalError?: Error) {\r\n    super(message, 'auth/invalid-credentials', originalError, 401);\r\n    this.name = 'InvalidCredentialsError';\r\n  }\r\n}\r\n\r\n/**\r\n * Error thrown for user-related operations failures\r\n */\r\nexport class UserOperationError extends AuthError {\r\n  constructor(message = 'User operation failed', originalError?: Error) {\r\n    super(message, 'auth/user-operation-failed', originalError, 400);\r\n    this.name = 'UserOperationError';\r\n  }\r\n}\r\n\r\n/**\r\n * Error thrown for configuration issues\r\n */\r\nexport class ConfigurationError extends AuthError {\r\n  constructor(message = 'Authentication configuration error', originalError?: Error) {\r\n    super(message, 'auth/configuration-error', originalError, 500);\r\n    this.name = 'ConfigurationError';\r\n  }\r\n}\r\n\r\n// Interface for any error with status code\r\ninterface ErrorWithStatus extends Error {\r\n  status?: number;\r\n  code?: string | number;\r\n}\r\n\r\n/**\r\n * Converts Supabase errors to our custom error types\r\n */\r\nexport function handleSupabaseError(error: Error | SupabaseAuthError | ErrorWithStatus | null | undefined): AuthError {\r\n  if (!error) {\r\n    return new AuthError('Unknown error', 'auth/unknown');\r\n  }\r\n\r\n  // Errors with status property\r\n  const errorWithStatus = error as ErrorWithStatus;\r\n  if (errorWithStatus.status) {\r\n    switch (errorWithStatus.status) {\r\n      case 401:\r\n        return new UnauthorizedError(error.message, error);\r\n      case 403:\r\n        return new ForbiddenError(error.message, error);\r\n      case 400:\r\n        if (error.message.includes('credentials')) {\r\n          return new InvalidCredentialsError(error.message, error);\r\n        }\r\n        if (error.message.includes('session')) {\r\n          return new SessionError(error.message, error);\r\n        }\r\n        return new UserOperationError(error.message, error);\r\n      default:\r\n        return new AuthError(\r\n          error.message, \r\n          `auth/error-${errorWithStatus.status || 'unknown'}`, \r\n          error, \r\n          errorWithStatus.status\r\n        );\r\n    }\r\n  }\r\n\r\n  // Generic errors\r\n  return new AuthError(error.message || 'Unknown error', 'auth/unknown-error', error);\r\n}\r\n\r\n/**\r\n * Helper to safely handle auth operations with consistent error handling\r\n */\r\nexport async function safeAuthOperation<T>(\r\n  operation: () => Promise<T>,\r\n  errorMessage = 'Authentication operation failed'\r\n): Promise<T> {\r\n  try {\r\n    return await operation();\r\n  } catch (error) {\r\n    throw handleSupabaseError(error as Error);\r\n  }\r\n}\r\n\r\n/**\r\n * Middleware for handling auth errors in API routes\r\n */\r\nexport function createAuthErrorHandler() {\r\n  return (error: unknown) => {\r\n    if (error instanceof AuthError) {\r\n      return error.toResponse();\r\n    }\r\n    \r\n    const authError = handleSupabaseError(error as Error);\r\n    return authError.toResponse();\r\n  };\r\n} ","import { ForbiddenError } from \"./errors\";\r\nimport { ExtendedUser } from \"./types\";\r\n\r\n/**\r\n * Permission string type\r\n */\r\nexport type Permission = string;\r\n\r\n/**\r\n * Role definition with permissions and optional inheritance\r\n */\r\nexport interface Role {\r\n  /**\r\n   * Name of the role\r\n   */\r\n  name: string;\r\n\r\n  /**\r\n   * Description of the role\r\n   */\r\n  description?: string;\r\n\r\n  /**\r\n   * Array of permissions assigned to this role\r\n   */\r\n  permissions: Permission[];\r\n\r\n  /**\r\n   * Optional array of parent role names this role inherits from\r\n   */\r\n  inherits?: string[];\r\n}\r\n\r\n/**\r\n * Configuration options for the RBAC manager\r\n */\r\nexport interface RBACOptions {\r\n  /**\r\n   * Default roles and their permissions\r\n   */\r\n  roles?: Record<string, Role>;\r\n\r\n  /**\r\n   * Name of super admin role that has all permissions\r\n   * @default 'admin'\r\n   */\r\n  superAdminRole?: string;\r\n\r\n  /**\r\n   * Enable permission caching for performance\r\n   * @default true\r\n   */\r\n  enableCache?: boolean;\r\n\r\n  /**\r\n   * Custom function to extract roles from a user\r\n   */\r\n  extractRoles?: (user: ExtendedUser) => string[];\r\n}\r\n\r\n/**\r\n * Default RBAC options\r\n */\r\nconst defaultRBACOptions: RBACOptions = {\r\n  roles: {},\r\n  superAdminRole: \"admin\",\r\n  enableCache: true,\r\n};\r\n\r\n/**\r\n * Role-Based Access Control Manager\r\n * TODO: The current superAdminRole check (userRoles.includes(this.superAdminRole))\r\n * relies on user.role from metadata (via extractRoles default). This may not align with the\r\n * authoritative admin status determined by verifyUserIsAdmin(userId) which checks the\r\n * 'admin_users' table. For true unification, this superAdmin check should eventually be\r\n * reconciled with the authoritative server-side verification. This might involve making RBAC\r\n * methods async, passing a verified admin status, or other architectural changes.\r\n * For now, critical admin checks should use the useIsAdmin() hook or verifyUserIsAdmin() action directly.\r\n */\r\nexport class RBACManager {\r\n  private roles: Record<string, Role>;\r\n  private superAdminRole: string;\r\n  private enableCache: boolean;\r\n  private extractRoles: (user: ExtendedUser) => string[];\r\n  private permissionCache: Map<string, Set<Permission>> = new Map();\r\n\r\n  constructor(options: RBACOptions = {}) {\r\n    const config = { ...defaultRBACOptions, ...options };\r\n    this.roles = config.roles || {};\r\n    this.superAdminRole = config.superAdminRole || \"admin\";\r\n    this.enableCache = config.enableCache ?? true;\r\n    this.extractRoles =\r\n      config.extractRoles ||\r\n      ((user: ExtendedUser) => {\r\n        return [user.role || \"user\"];\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Define a new role with permissions\r\n   */\r\n  defineRole(role: Role): void {\r\n    this.roles[role.name] = role;\r\n\r\n    // Clear cache if caching is enabled\r\n    if (this.enableCache) {\r\n      this.permissionCache.clear();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Define multiple roles at once\r\n   */\r\n  defineRoles(roles: Record<string, Role>): void {\r\n    this.roles = { ...this.roles, ...roles };\r\n\r\n    // Clear cache if caching is enabled\r\n    if (this.enableCache) {\r\n      this.permissionCache.clear();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all permissions for a given role\r\n   */\r\n  private getRolePermissions(\r\n    roleName: string,\r\n    visited: Set<string> = new Set()\r\n  ): Set<Permission> {\r\n    // Avoid circular dependencies\r\n    if (visited.has(roleName)) {\r\n      return new Set();\r\n    }\r\n\r\n    // Mark this role as visited\r\n    visited.add(roleName);\r\n\r\n    // Get the role definition\r\n    const role = this.roles[roleName];\r\n    if (!role) {\r\n      return new Set();\r\n    }\r\n\r\n    // Start with this role's permissions\r\n    const permissions = new Set(role.permissions);\r\n\r\n    // Add inherited permissions\r\n    if (role.inherits && role.inherits.length > 0) {\r\n      for (const parentRole of role.inherits) {\r\n        const parentPermissions = this.getRolePermissions(parentRole, visited);\r\n        parentPermissions.forEach((permission) => permissions.add(permission));\r\n      }\r\n    }\r\n\r\n    return permissions;\r\n  }\r\n\r\n  /**\r\n   * Get all permissions for a user based on their roles\r\n   */\r\n  getUserPermissions(user: ExtendedUser | null): Set<Permission> {\r\n    if (!user) {\r\n      return new Set();\r\n    }\r\n\r\n    // Extract roles from user\r\n    const userRoles = this.extractRoles(user);\r\n\r\n    // Check for super admin role\r\n    if (userRoles.includes(this.superAdminRole)) {\r\n      return new Set([\"*\"]); // Special wildcard permission for super admins\r\n    }\r\n\r\n    // Check the cache first if enabled\r\n    if (this.enableCache) {\r\n      const cacheKey = userRoles.sort().join(\",\");\r\n      const cachedPermissions = this.permissionCache.get(cacheKey);\r\n\r\n      if (cachedPermissions) {\r\n        return cachedPermissions;\r\n      }\r\n    }\r\n\r\n    // Collect all permissions from all roles\r\n    const allPermissions = new Set<Permission>();\r\n    for (const roleName of userRoles) {\r\n      const rolePermissions = this.getRolePermissions(roleName);\r\n      rolePermissions.forEach((permission) => allPermissions.add(permission));\r\n    }\r\n\r\n    // Save to cache if enabled\r\n    if (this.enableCache && userRoles.length > 0) {\r\n      const cacheKey = userRoles.sort().join(\",\");\r\n      this.permissionCache.set(cacheKey, allPermissions);\r\n    }\r\n\r\n    return allPermissions;\r\n  }\r\n\r\n  /**\r\n   * Check if the user has a specific role\r\n   */\r\n  hasRole(user: ExtendedUser | null, roleName: string): boolean {\r\n    if (!user) return false;\r\n\r\n    const userRoles = this.extractRoles(user);\r\n    return (\r\n      userRoles.includes(roleName) || userRoles.includes(this.superAdminRole)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Check if the user has a specific permission\r\n   */\r\n  hasPermission(user: ExtendedUser | null, permission: Permission): boolean {\r\n    if (!user) return false;\r\n\r\n    // Get all permissions for the user\r\n    const permissions = this.getUserPermissions(user);\r\n\r\n    // Super admin has all permissions\r\n    if (permissions.has(\"*\")) return true;\r\n\r\n    // Check exact permission\r\n    if (permissions.has(permission)) return true;\r\n\r\n    // Check wildcard permissions\r\n    const parts = permission.split(\":\");\r\n    for (let i = 1; i <= parts.length; i++) {\r\n      const wildcardPermission = [...parts.slice(0, i), \"*\"].join(\":\");\r\n      if (permissions.has(wildcardPermission)) return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check if the user has any of the specified permissions\r\n   */\r\n  hasAnyPermission(\r\n    user: ExtendedUser | null,\r\n    permissions: Permission[]\r\n  ): boolean {\r\n    return permissions.some((permission) =>\r\n      this.hasPermission(user, permission)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Check if the user has all of the specified permissions\r\n   */\r\n  hasAllPermissions(\r\n    user: ExtendedUser | null,\r\n    permissions: Permission[]\r\n  ): boolean {\r\n    return permissions.every((permission) =>\r\n      this.hasPermission(user, permission)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Enforce a permission requirement, throwing an error if not authorized\r\n   */\r\n  enforcePermission(user: ExtendedUser | null, permission: Permission): void {\r\n    if (!this.hasPermission(user, permission)) {\r\n      throw new ForbiddenError(`Missing required permission: ${permission}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enforce that user has any of the specified permissions\r\n   */\r\n  enforceAnyPermission(\r\n    user: ExtendedUser | null,\r\n    permissions: Permission[]\r\n  ): void {\r\n    if (!this.hasAnyPermission(user, permissions)) {\r\n      throw new ForbiddenError(\r\n        `Missing at least one of the required permissions: ${permissions.join(\", \")}`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enforce that user has all of the specified permissions\r\n   */\r\n  enforceAllPermissions(\r\n    user: ExtendedUser | null,\r\n    permissions: Permission[]\r\n  ): void {\r\n    if (!this.hasAllPermissions(user, permissions)) {\r\n      throw new ForbiddenError(\r\n        `Missing some of the required permissions: ${permissions.join(\", \")}`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a permission string from resource and action\r\n   */\r\n  createPermission(resource: string, action: string): Permission {\r\n    return `${resource}:${action}`;\r\n  }\r\n}\r\n\r\n// Singleton RBAC manager instance\r\nlet rbacManager: RBACManager | null = null;\r\n\r\n/**\r\n * Get the RBAC manager instance, creating it if it doesn't exist\r\n */\r\nexport function getRBACManager(options?: RBACOptions): RBACManager {\r\n  if (!rbacManager) {\r\n    rbacManager = new RBACManager(options);\r\n  }\r\n  return rbacManager;\r\n}\r\n\r\n/**\r\n * Create a permission string from resource and action\r\n */\r\nexport function createPermission(resource: string, action: string): Permission {\r\n  return `${resource}:${action}`;\r\n}\r\n\r\n/**\r\n * Check if the user has a specific permission\r\n */\r\nexport function hasPermission(\r\n  user: ExtendedUser | null,\r\n  permission: Permission\r\n): boolean {\r\n  return getRBACManager().hasPermission(user, permission);\r\n}\r\n\r\n/**\r\n * Enforce a permission requirement, throwing an error if not authorized\r\n */\r\nexport function enforcePermission(\r\n  user: ExtendedUser | null,\r\n  permission: Permission\r\n): void {\r\n  return getRBACManager().enforcePermission(user, permission);\r\n}\r\n","module.exports = require(\"next/dist/server/app-render/work-unit-async-storage.external.js\");","const module0 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\layout.tsx\");\nconst module1 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\error.tsx\");\nconst module2 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\global-error.tsx\");\nconst module3 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\not-found.tsx\");\nconst module4 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/forbidden-error\");\nconst module5 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/unauthorized-error\");\nconst module6 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(authenticated)\\\\layout.tsx\");\nconst module7 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/forbidden-error\");\nconst module8 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/unauthorized-error\");\nconst page9 = () => import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(authenticated)\\\\profile\\\\page.tsx\");\nimport { AppPageRouteModule } from \"next/dist/server/route-modules/app-page/module.compiled\" with {\n    'turbopack-transition': 'next-ssr'\n};\nimport { RouteKind } from \"next/dist/server/route-kind\" with {\n    'turbopack-transition': 'next-server-utility'\n};\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        '(authenticated)',\n        {\n        children: [\n        'profile',\n        {\n        children: ['__PAGE__', {}, {\n          page: [page9, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(authenticated)\\\\profile\\\\page.tsx\"],\n          \n        }]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [module6, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(authenticated)\\\\layout.tsx\"],\n'forbidden': [module7, \"next/dist/client/components/forbidden-error\"],\n'unauthorized': [module8, \"next/dist/client/components/unauthorized-error\"],\n        \n      }\n      ]\n      },\n        {\n        'layout': [module0, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\layout.tsx\"],\n'error': [module1, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\error.tsx\"],\n'global-error': [module2, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\global-error.tsx\"],\n'not-found': [module3, \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\not-found.tsx\"],\n'forbidden': [module4, \"next/dist/client/components/forbidden-error\"],\n'unauthorized': [module5, \"next/dist/client/components/unauthorized-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(authenticated)\\\\profile\\\\page.tsx\"];\nexport { tree, pages };\nexport { default as GlobalError } from \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\global-error.tsx\" with {\n    'turbopack-transition': 'next-server-utility'\n};\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nexport const __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\nexport * from \"next/dist/server/app-render/entry-base\" with {\n    'turbopack-transition': 'next-server-utility'\n};\n// Create and export the route module that will be consumed.\nexport const routeModule = new AppPageRouteModule({\n    definition: {\n        kind: RouteKind.APP_PAGE,\n        page: \"/(authenticated)/profile/page\",\n        pathname: \"/profile\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: '',\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map","import { redirect } from 'next/navigation';\r\n\r\nexport default function AuthenticatedLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <>\r\n      {children}\r\n    </>\r\n  );\r\n} ","module.exports = require(\"node:fs\");","module.exports = require(\"worker_threads\");","module.exports = require(\"zlib\");","module.exports = require(\"perf_hooks\");","module.exports = require(\"node:worker_threads\");","module.exports = require(\"node:path\");","\"use client\"\r\n\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn(\"flex flex-col gap-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn(\"flex-1 outline-none\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n","module.exports = require(\"node:net\");","module.exports = require(\"node:crypto\");","import(/* webpackMode: \"eager\" */ \"E:\\\\downloads\\\\Hijraah\\\\apps\\\\web\\\\src\\\\app\\\\(authenticated)\\\\profile\\\\page.tsx\");\n","import * as React from \"react\"\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n","module.exports = require(\"buffer\");","module.exports = require(\"url\");","module.exports = require(\"child_process\");","module.exports = require(\"node:readline\");","module.exports = require(\"http\");","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Key\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSI3LjUiIGN5PSIxNS41IiByPSI1LjUiIC8+CiAgPHBhdGggZD0ibTIxIDItOS42IDkuNiIgLz4KICA8cGF0aCBkPSJtMTUuNSA3LjUgMyAzTDIyIDdsLTMtMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/key\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Key = createLucideIcon('Key', [\n  ['circle', { cx: '7.5', cy: '15.5', r: '5.5', key: 'yqb3hr' }],\n  ['path', { d: 'm21 2-9.6 9.6', key: '1j0ho8' }],\n  ['path', { d: 'm15.5 7.5 3 3L22 7l-3-3', key: '1rn1fs' }],\n]);\n\nexport default Key;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Camera\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNSA0aC01TDcgN0g0YTIgMiAwIDAgMC0yIDJ2OWEyIDIgMCAwIDAgMiAyaDE2YTIgMiAwIDAgMCAyLTJWOWEyIDIgMCAwIDAtMi0yaC0zbC0yLjUtM3oiIC8+CiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMyIgcj0iMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/camera\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Camera = createLucideIcon('Camera', [\n  [\n    'path',\n    {\n      d: 'M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z',\n      key: '1tc9qg',\n    },\n  ],\n  ['circle', { cx: '12', cy: '13', r: '3', key: '1vg3eu' }],\n]);\n\nexport default Camera;\n","\"use client\";\n\nimport { createBrowserClient } from \"@supabase/ssr\";\nimport { Camera, Key, User } from \"lucide-react\";\nimport Image from \"next/image\";\nimport { useState, useEffect } from \"react\";\n\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport { useAuth } from \"@/lib/auth/hooks\";\nimport { uploadAvatar, updateUserAvatar } from \"@/lib/avatar-utils\";\nimport { Button } from \"@/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/ui/card\";\nimport { Input } from \"@/ui/input\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/ui/tabs\";\nimport { UserAvatar } from \"@/ui/user-avatar\";\n\nexport default function ProfilePage() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const supabase = createBrowserClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n  );\n  const [isLoading, setIsLoading] = useState(false);\n  const [avatarUrl, setAvatarUrl] = useState<string | undefined>(\n    user?.user_metadata?.avatar_url\n  );\n  const [formData, setFormData] = useState({\n    name: user?.user_metadata?.name || \"\",\n    email: user?.email || \"\",\n    bio: user?.user_metadata?.bio || \"\",\n    currentPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\",\n  });\n\n  // Fetch the user's avatar URL if not available in metadata\n  useEffect(() => {\n    const fetchAvatar = async () => {\n      if (!user || avatarUrl) return;\n\n      try {\n        // Check if user has a profile with avatar URL\n        const { data, error } = await supabase\n          .from(\"profiles\")\n          .select(\"avatar_url\")\n          .eq(\"id\", user.id)\n          .single();\n\n        if (error) {\n          console.error(\"Error fetching profile:\", error);\n          return;\n        }\n\n        if (data?.avatar_url) {\n          setAvatarUrl(data.avatar_url);\n\n          // Also update user metadata for consistency\n          await supabase.auth.updateUser({\n            data: { avatar_url: data.avatar_url },\n          });\n        }\n      } catch (error) {\n        console.error(\"Error in avatar fetch:\", error);\n      }\n    };\n\n    fetchAvatar();\n  }, [user, avatarUrl, supabase]);\n\n  const handleInputChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    setFormData((prev) => ({\n      ...prev,\n      [e.target.id]: e.target.value,\n    }));\n  };\n\n  const handleProfileUpdate = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      const { error } = await supabase.auth.updateUser({\n        data: {\n          name: formData.name,\n          bio: formData.bio,\n        },\n      });\n\n      if (error) throw error;\n\n      toast({\n        title: \"Success\",\n        description: \"Profile updated successfully\",\n      });\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"Failed to update profile\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handlePasswordUpdate = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    if (formData.newPassword !== formData.confirmPassword) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"New passwords do not match\",\n      });\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      const { error } = await supabase.auth.updateUser({\n        password: formData.newPassword,\n      });\n\n      if (error) throw error;\n\n      toast({\n        title: \"Success\",\n        description: \"Password updated successfully\",\n      });\n\n      // Clear password fields\n      setFormData((prev) => ({\n        ...prev,\n        currentPassword: \"\",\n        newPassword: \"\",\n        confirmPassword: \"\",\n      }));\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"Failed to update password\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleAvatarUpdate = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file || !user) return;\n\n    try {\n      setIsLoading(true);\n\n      // Use our utility function to upload the avatar\n      const publicUrl = await uploadAvatar(supabase, file, user.id);\n\n      // Update the profile in the database\n      await updateUserAvatar(supabase, user.id, publicUrl);\n\n      // Update user metadata\n      const { error: updateError } = await supabase.auth.updateUser({\n        data: { avatar_url: publicUrl },\n      });\n\n      if (updateError) throw updateError;\n\n      // Update local state\n      setAvatarUrl(publicUrl);\n\n      toast({\n        title: \"Success\",\n        description: \"Profile picture updated successfully\",\n      });\n    } catch (error) {\n      console.error(\"Avatar upload error:\", error);\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"Failed to update profile picture\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container max-w-4xl py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">Profile Settings</h1>\n\n      <Tabs defaultValue=\"general\" className=\"w-full\">\n        <TabsList className=\"mb-6\">\n          <TabsTrigger value=\"general\">General</TabsTrigger>\n          <TabsTrigger value=\"security\">Security</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"general\">\n          <Card className=\"p-6\">\n            <form onSubmit={handleProfileUpdate} className=\"grid gap-6\">\n              {/* Profile Picture */}\n              <div className=\"flex items-center gap-4\">\n                <div className=\"relative\">\n                  <UserAvatar\n                    user={{\n                      name: formData.name,\n                      email: formData.email,\n                      avatar: avatarUrl,\n                    }}\n                    size=\"lg\"\n                    shape=\"circle\"\n                    className=\"cursor-pointer hover:opacity-80 transition-opacity\"\n                  />\n                  <label htmlFor=\"avatar-upload\">\n                    <Button\n                      className=\"absolute -bottom-2 -right-2 rounded-full cursor-pointer w-8 h-8 p-0\"\n                      variant=\"outline\"\n                      type=\"button\"\n                    >\n                      <Camera className=\"w-4 h-4\" />\n                    </Button>\n                  </label>\n                  <input\n                    id=\"avatar-upload\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    className=\"hidden\"\n                    onChange={handleAvatarUpdate}\n                    disabled={isLoading}\n                  />\n                </div>\n                <div>\n                  <h3 className=\"font-medium\">Profile Picture</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Click the camera icon to update your photo\n                  </p>\n                </div>\n              </div>\n\n              {/* Personal Information */}\n              <div className=\"grid gap-4\">\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"name\">Full Name</Label>\n                  <Input\n                    id=\"name\"\n                    placeholder=\"Enter your full name\"\n                    value={formData.name}\n                    onChange={handleInputChange}\n                  />\n                </div>\n\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"email\">Email</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    value={formData.email}\n                    disabled\n                  />\n                </div>\n\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"bio\">Bio</Label>\n                  <Textarea\n                    id=\"bio\"\n                    placeholder=\"Tell us a bit about yourself\"\n                    className=\"min-h-[100px]\"\n                    onChange={handleInputChange}\n                  >\n                    {formData.bio}\n                  </Textarea>\n                </div>\n              </div>\n\n              <Button className=\"w-full sm:w-auto\" disabled={isLoading}>\n                {isLoading ? \"Saving...\" : \"Save Changes\"}\n              </Button>\n            </form>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"security\">\n          <Card className=\"p-6\">\n            <form onSubmit={handlePasswordUpdate} className=\"grid gap-6\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n                  <Key className=\"w-5 h-5 text-primary\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"font-medium mb-1\">Password</h3>\n                  <p className=\"text-sm text-muted-foreground mb-4\">\n                    Update your password to keep your account secure\n                  </p>\n                  <div className=\"grid gap-4\">\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"currentPassword\">Current Password</Label>\n                      <Input\n                        id=\"currentPassword\"\n                        type=\"password\"\n                        placeholder=\"Enter current password\"\n                        value={formData.currentPassword}\n                        onChange={handleInputChange}\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"newPassword\">New Password</Label>\n                      <Input\n                        id=\"newPassword\"\n                        type=\"password\"\n                        placeholder=\"Enter new password\"\n                        value={formData.newPassword}\n                        onChange={handleInputChange}\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n                      <Input\n                        id=\"confirmPassword\"\n                        type=\"password\"\n                        placeholder=\"Confirm new password\"\n                        value={formData.confirmPassword}\n                        onChange={handleInputChange}\n                      />\n                    </div>\n                    <Button className=\"w-full sm:w-auto\" disabled={isLoading}>\n                      {isLoading ? \"Updating...\" : \"Update Password\"}\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </form>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","module.exports = require(\"tty\");","module.exports = require(\"async_hooks\");","module.exports = import(\"ai\");;","module.exports = require(\"node:inspector\");","module.exports = require(\"net\");","import { SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nimport type { Database } from \"@/types/database.types\";\r\n\r\n/**\r\n * Custom Error for Avatar Upload failures\r\n */\r\nexport class AvatarUploadError extends Error {\r\n  constructor(\r\n    message: string,\r\n    public originalError?: any\r\n  ) {\r\n    super(message);\r\n    this.name = \"AvatarUploadError\";\r\n    if (originalError && originalError.stack) {\r\n      this.stack = originalError.stack;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Custom Error for Profile Update failures\r\n */\r\nexport class ProfileUpdateError extends Error {\r\n  constructor(\r\n    message: string,\r\n    public originalError?: any\r\n  ) {\r\n    super(message);\r\n    this.name = \"ProfileUpdateError\";\r\n    if (originalError && originalError.stack) {\r\n      this.stack = originalError.stack;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Utility functions for avatar management\r\n */\r\n\r\nconst AVATAR_BUCKET = \"avatars\";\r\nconst DEFAULT_AVATARS = [\r\n  \"/avatars/default-1.png\",\r\n  \"/avatars/default-2.png\",\r\n  \"/avatars/default-3.png\",\r\n  \"/avatars/default-4.png\",\r\n  \"/avatars/default-5.png\",\r\n];\r\n\r\n// Default avatar path\r\nconst defaultAvatarPath = \"/avatars/default.png\";\r\n\r\n// Cache for avatar URLs\r\nconst avatarCache = new Map<string, string>();\r\n\r\n/**\r\n * Get a random default avatar URL\r\n */\r\nexport function getRandomDefaultAvatar(): string {\r\n  const randomIndex = Math.floor(Math.random() * DEFAULT_AVATARS.length);\r\n  return DEFAULT_AVATARS[randomIndex];\r\n}\r\n\r\n/**\r\n * Generate an avatar URL based on user ID\r\n */\r\nexport function generateAvatarUrl(userId: string): string {\r\n  // Hash userId to get a consistent avatar for a user\r\n  let hash = 0;\r\n  for (let i = 0; i < userId.length; i++) {\r\n    hash = (hash << 5) - hash + userId.charCodeAt(i);\r\n    hash = hash & hash; // Convert to 32bit integer\r\n  }\r\n\r\n  // Use the hash to pick an avatar\r\n  const index = Math.abs(hash) % DEFAULT_AVATARS.length;\r\n  return DEFAULT_AVATARS[index];\r\n}\r\n\r\n/**\r\n * Upload an avatar image to Supabase storage\r\n */\r\nexport async function uploadAvatar(\r\n  supabase: SupabaseClient<Database>,\r\n  file: File,\r\n  userId: string\r\n): Promise<string> {\r\n  try {\r\n    const fileExt = file.name.split(\".\").pop();\r\n    const fileName = `${userId}-${Date.now()}.${fileExt}`;\r\n    const filePath = `${userId}/${fileName}`;\r\n\r\n    // Upload image\r\n    const { error: uploadError } = await supabase.storage\r\n      .from(AVATAR_BUCKET)\r\n      .upload(filePath, file, { upsert: true });\r\n\r\n    if (uploadError) {\r\n      throw new AvatarUploadError(\r\n        \"Failed to upload avatar to storage.\",\r\n        uploadError\r\n      );\r\n    }\r\n\r\n    // Get public URL\r\n    const {\r\n      data: { publicUrl },\r\n    } = supabase.storage.from(AVATAR_BUCKET).getPublicUrl(filePath);\r\n\r\n    if (!publicUrl) {\r\n      throw new AvatarUploadError(\r\n        \"Failed to get public URL for avatar after upload.\"\r\n      );\r\n    }\r\n\r\n    return publicUrl;\r\n  } catch (error) {\r\n    if (error instanceof AvatarUploadError) {\r\n      throw error;\r\n    }\r\n    console.error(\"Error uploading avatar:\", error);\r\n    throw new AvatarUploadError(\r\n      \"An unexpected error occurred during avatar upload.\",\r\n      error\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Update a user's avatar_url in the profile\r\n */\r\nexport async function updateUserAvatar(\r\n  supabase: SupabaseClient<Database>,\r\n  userId: string,\r\n  avatarUrl: string\r\n): Promise<void> {\r\n  try {\r\n    // First, check if profile exists\r\n    const { data: profile, error: profileError } = await supabase\r\n      .from(\"profiles\")\r\n      .select(\"id\")\r\n      .eq(\"id\", userId)\r\n      .maybeSingle();\r\n\r\n    if (profileError) {\r\n      throw new ProfileUpdateError(\r\n        \"Error checking for existing profile before avatar update.\",\r\n        profileError\r\n      );\r\n    }\r\n\r\n    if (profile) {\r\n      // Update existing profile\r\n      const { error } = await supabase\r\n        .from(\"profiles\")\r\n        .update({ avatar_url: avatarUrl, updated_at: new Date().toISOString() })\r\n        .eq(\"id\", userId);\r\n\r\n      if (error) {\r\n        throw new ProfileUpdateError(\r\n          \"Failed to update profile with new avatar URL.\",\r\n          error\r\n        );\r\n      }\r\n    } else {\r\n      // Create new profile\r\n      const { error } = await supabase.from(\"profiles\").insert({\r\n        id: userId,\r\n        avatar_url: avatarUrl,\r\n        // first_name and last_name could be fetched or passed if needed here\r\n        // For now, relying on the handle_new_user trigger for defaults on new auth users,\r\n        // but this direct insert might need more fields if it's a common path.\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString(),\r\n      });\r\n\r\n      if (error) {\r\n        throw new ProfileUpdateError(\r\n          \"Failed to create new profile with avatar URL.\",\r\n          error\r\n        );\r\n      }\r\n    }\r\n  } catch (error) {\r\n    if (error instanceof ProfileUpdateError) {\r\n      throw error;\r\n    }\r\n    console.error(\"Error updating user avatar:\", error);\r\n    throw new ProfileUpdateError(\r\n      \"An unexpected error occurred while updating user avatar.\",\r\n      error\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Generates a deterministic Identicon URL based on the user ID.\r\n * @param userId The user's unique ID.\r\n * @returns A URL to the Identicon image.\r\n */\r\nexport const getIdenticonUrl = (userId: string): string => {\r\n  // Simple hashing function (replace with a more robust one if needed)\r\n  let hash = 0;\r\n  for (let i = 0; i < userId.length; i++) {\r\n    hash = userId.charCodeAt(i) + ((hash << 5) - hash);\r\n    hash = hash & hash; // Convert to 32bit integer\r\n  }\r\n  const identiconId = Math.abs(hash % 1000); // Generate a number between 0-999\r\n  return `https://api.dicebear.com/8.x/identicon/svg?seed=${identiconId}`;\r\n};\r\n\r\n/**\r\n * Retrieves the user's avatar URL.\r\n * Fetches from Supabase storage, falls back to Identicon, uses cache.\r\n * @param supabase The Supabase client instance.\r\n * @param userId The user's unique ID.\r\n * @returns A promise that resolves to the avatar URL string.\r\n */\r\nexport async function getUserAvatar(\r\n  supabase: SupabaseClient<Database>, // Accept client as argument\r\n  userId: string\r\n): Promise<string> {\r\n  if (!userId) {\r\n    console.warn(\"getUserAvatar called with no userId, returning default.\");\r\n    return defaultAvatarPath;\r\n  }\r\n\r\n  // Check cache first\r\n  if (avatarCache.has(userId)) {\r\n    return avatarCache.get(userId)!;\r\n  }\r\n\r\n  // Ensure supabase client is provided\r\n  if (!supabase) {\r\n    console.error(\"getUserAvatar requires a valid Supabase client instance.\");\r\n    return getIdenticonUrl(userId); // Fallback to identicon if client missing\r\n  }\r\n\r\n  try {\r\n    // 1. Check 'profiles' table for an 'avatar_url' column\r\n    const { data: profileData, error: profileError } = await supabase\r\n      .from(\"profiles\") // Ensure 'profiles' table exists\r\n      .select(\"avatar_url\") // Ensure 'avatar_url' column exists\r\n      .eq(\"id\", userId)\r\n      .single();\r\n\r\n    if (profileError && profileError.code !== \"PGRST116\") {\r\n      // Ignore 'PGRST116' (No rows found)\r\n      console.error(\r\n        \"Error fetching profile avatar_url (raw):\",\r\n        profileError,\r\n        \"Error fetching profile avatar_url (JSON):\",\r\n        JSON.stringify(profileError, Object.getOwnPropertyNames(profileError))\r\n      );\r\n    }\r\n\r\n    if (profileData?.avatar_url) {\r\n      avatarCache.set(userId, profileData.avatar_url);\r\n      return profileData.avatar_url;\r\n    }\r\n\r\n    // 2. If no avatar_url in profile, check Supabase Storage (e.g., 'avatars' bucket)\r\n    const avatarFilePath = `public/${userId}.png`; // Adjust path convention as needed\r\n    const { data: storageData } = await supabase.storage\r\n      .from(\"avatars\") // Ensure 'avatars' bucket exists\r\n      .getPublicUrl(avatarFilePath);\r\n\r\n    // Check for specific storage errors (like file not found)\r\n    if (storageData?.publicUrl) {\r\n      // Verify the URL is accessible before caching (optional but recommended)\r\n      // Could involve a quick HEAD request, but adds latency.\r\n      // For simplicity, we assume the URL is valid if returned without critical error.\r\n\r\n      // Check if the URL ends with the expected file path to avoid potential default bucket URLs\r\n      if (storageData.publicUrl.endsWith(avatarFilePath)) {\r\n        avatarCache.set(userId, storageData.publicUrl);\r\n        return storageData.publicUrl;\r\n      } else {\r\n        console.warn(\r\n          `Storage URL ${storageData.publicUrl} does not match expected path ${avatarFilePath}. Falling back.`\r\n        );\r\n      }\r\n    }\r\n\r\n    // 3. Fallback to Identicon if no profile URL and no storage URL found/valid\r\n    const identiconUrl = getIdenticonUrl(userId);\r\n    avatarCache.set(userId, identiconUrl);\r\n    return identiconUrl;\r\n  } catch (error) {\r\n    console.error(\r\n      \"Error getting user avatar (raw):\",\r\n      error,\r\n      \"Error getting user avatar (JSON):\",\r\n      JSON.stringify(error, Object.getOwnPropertyNames(error))\r\n    );\r\n    // Final fallback in case of any unexpected error\r\n    const identiconUrl = getIdenticonUrl(userId);\r\n    avatarCache.set(userId, identiconUrl); // Cache fallback\r\n    return identiconUrl;\r\n  }\r\n}\r\n\r\n/**\r\n * Clears the avatar cache for a specific user.\r\n * @param userId The user ID to clear from the cache.\r\n */\r\nexport function clearAvatarCache(userId: string): void {\r\n  avatarCache.delete(userId);\r\n}\r\n\r\n/**\r\n * Clears the entire avatar cache.\r\n */\r\nexport function clearAllAvatarCache(): void {\r\n  avatarCache.clear();\r\n}\r\n","module.exports = require(\"events\");","export default {\n  xmlns: 'http://www.w3.org/2000/svg',\n  width: 24,\n  height: 24,\n  viewBox: '0 0 24 24',\n  fill: 'none',\n  stroke: 'currentColor',\n  strokeWidth: 2,\n  strokeLinecap: 'round',\n  strokeLinejoin: 'round',\n};\n","import {\n  forwardRef,\n  createElement,\n  ReactSVG,\n  SVGProps,\n  ForwardRefExoticComponent,\n  RefAttributes,\n} from 'react';\nimport defaultAttributes from './defaultAttributes';\n\nexport type IconNode = [elementName: keyof ReactSVG, attrs: Record<string, string>][];\n\nexport type SVGAttributes = Partial<SVGProps<SVGSVGElement>>;\ntype ComponentAttributes = RefAttributes<SVGSVGElement> & SVGAttributes;\n\nexport interface LucideProps extends ComponentAttributes {\n  size?: string | number;\n  absoluteStrokeWidth?: boolean;\n}\n\nexport type LucideIcon = ForwardRefExoticComponent<LucideProps>;\n/**\n * Converts string to KebabCase\n * Copied from scripts/helper. If anyone knows how to properly import it here\n * then please fix it.\n *\n * @param {string} string\n * @returns {string} A kebabized string\n */\nexport const toKebabCase = (string: string) =>\n  string\n    .replace(/([a-z0-9])([A-Z])/g, '$1-$2')\n    .toLowerCase()\n    .trim();\n\nconst createLucideIcon = (iconName: string, iconNode: IconNode): LucideIcon => {\n  const Component = forwardRef<SVGSVGElement, LucideProps>(\n    (\n      {\n        color = 'currentColor',\n        size = 24,\n        strokeWidth = 2,\n        absoluteStrokeWidth,\n        className = '',\n        children,\n        ...rest\n      },\n      ref,\n    ) => {\n      return createElement(\n        'svg',\n        {\n          ref,\n          ...defaultAttributes,\n          width: size,\n          height: size,\n          stroke: color,\n          strokeWidth: absoluteStrokeWidth\n            ? (Number(strokeWidth) * 24) / Number(size)\n            : strokeWidth,\n          className: ['lucide', `lucide-${toKebabCase(iconName)}`, className].join(' '),\n          ...rest,\n        },\n        [\n          ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n          ...(Array.isArray(children) ? children : [children]),\n        ],\n      );\n    },\n  );\n\n  Component.displayName = `${iconName}`;\n\n  return Component;\n};\n\nexport default createLucideIcon;\n"],"names":["createExtendedUser","user","role","user_metadata","settings","theme","settings_theme","language","settings_language","emailNotifications","settings_emailNotifications","documentReminders","settings_documentReminders","applicationUpdates","settings_applicationUpdates","twoFactorAuth","settings_twoFactorAuth","fullName","full_name","email","split","avatarUrl","avatar_url","isAdmin","hasTwoFactorAuth","updateSettings","updatedSettings","newSettings","toObject","id","AuthContext","createContext","undefined","AuthProvider","children","setUser","useState","session","setSession","isLoading","setIsLoading","supabase","createClient","refreshSession","useCallback","data","error","sessionError","auth","getSession","userError","getUser","console","signIn","provider","options","password","signInWithPassword","signInWithOAuth","redirectTo","signOut","signUp","emailRedirectTo","window","location","origin","resetPassword","resetPasswordForEmail","updatePassword","updateUser","Provider","value","isAuthenticated","useAuth","context","useContext","Error","useUser","useIsAuthenticated","useHasRole","useHasPermission","permission","hasPermission","useSession","Card","React","className","props","ref","motion","div","cn","whileHover","scale","boxShadow","transition","type","stiffness","damping","displayName","CardHeader","CardTitle","h3","CardDescription","p","CardContent","CardFooter","UserAvatar","fallbackClassName","size","shape","shapeClasses","circle","square","Avatar","sm","md","lg","xl","avatar","AvatarImage","src","alt","name","onError","warn","e","target","style","display","AvatarFallback","getInitials","map","part","slice","join","toUpperCase","User","actionTypes","ADD_TOAST","UPDATE_TOAST","DISMISS_TOAST","REMOVE_TOAST","count","toastTimeouts","Map","reducer","state","action","toasts","toast","TOAST_LIMIT","t","toastId","has","clearTimeout","get","delete","timeout","entries","open","filter","listeners","memoryState","dispatch","forEach","listener","Number","MAX_VALUE","toString","dismiss","onOpenChange","update","useToast","setState","push","index","indexOf","splice","Label","LabelPrimitive","data-slot","avatarVariants","cva","variants","defaultVariants","AvatarPrimitive","Root","browserClientInstance","fetch","ponyfetch","fetchPonyfill","supabaseUrl","process","supabaseAnonKey","serviceRoleKey","env","SUPABASE_SERVICE_ROLE_KEY","anonymousHeaders","apikey","checkPublicEnvVars","g","globalThis","__USING_PONYFETCH__","getSupabaseBrowserClient","_createBrowserClient","global","headers","useSupabaseBrowser","useMemo","getSupabaseClient","Textarea","textarea","serverComponentModule.default","AuthError","constructor","message","code","originalError","status","toJSON","toResponse","Response","JSON","stringify","UnauthorizedError","ForbiddenError","SessionError","InvalidCredentialsError","UserOperationError","defaultRBACOptions","roles","superAdminRole","enableCache","RBACManager","permissionCache","config","extractRoles","defineRole","clear","defineRoles","roleName","visited","Set","add","permissions","inherits","length","parentRole","getRolePermissions","getUserPermissions","userRoles","includes","cacheKey","sort","cachedPermissions","allPermissions","set","hasRole","parts","i","wildcardPermission","hasAnyPermission","some","hasAllPermissions","every","enforcePermission","enforceAnyPermission","enforceAllPermissions","createPermission","resource","rbacManager","getRBACManager","AuthenticatedLayout","_jsx","_Fragment","Tabs","TabsPrimitive","TabsList","TabsTrigger","TabsContent","Input","input","ProfilePage","createBrowserClient","setAvatarUrl","formData","setFormData","bio","currentPassword","newPassword","confirmPassword","handleInputChange","prev","handleProfileUpdate","preventDefault","title","description","variant","handlePasswordUpdate","handleAvatarUpdate","file","files","publicUrl","uploadAvatar","updateUserAvatar","updateError","h1","defaultValue","form","onSubmit","label","htmlFor","Button","Camera","accept","onChange","disabled","placeholder","Key","AvatarUploadError","stack","ProfileUpdateError","AVATAR_BUCKET","avatarCache","userId","fileExt","pop","fileName","Date","now","filePath","uploadError","storage","from","upload","upsert","getPublicUrl","profile","profileError","select","eq","maybeSingle","updated_at","toISOString","insert","created_at","getIdenticonUrl","hash","charCodeAt","Math","abs","identiconId","getUserAvatar","profileData","single","Object","getOwnPropertyNames","avatarFilePath","storageData","endsWith","identiconUrl"],"sourceRoot":""}