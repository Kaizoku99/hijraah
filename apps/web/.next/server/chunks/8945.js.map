{"version":3,"file":"8945.js","mappings":"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","sources":["webpack://@hijraah/web/./src/components/ui/card.tsx","webpack://@hijraah/web/../../../src/icons/grid-3x3.ts","webpack://@hijraah/web/../../../src/icons/share-2.ts","webpack://@hijraah/web/./src/lib/auth.ts","webpack://@hijraah/web/./src/components/ui/artifact.tsx","webpack://@hijraah/web/../../../src/icons/image.ts","webpack://@hijraah/web/./src/components/ui/tabs.tsx","webpack://@hijraah/web/./src/components/ui/toast.tsx","webpack://@hijraah/web/./src/lib/contexts/artifact-context.tsx"],"sourcesContent":["/**\r\n * Card component and related sub-components.\r\n * Provides a container for related content with variants for different use cases.\r\n */\r\n\r\nimport { motion, HTMLMotionProps } from \"motion/react\";\r\nimport * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n// Define a type for CardProps\r\n// Omit 'className' from HTMLMotionProps because we handle it with `cn`\r\n// Omit 'ref' as it's typed by React.forwardRef\r\ninterface CardProps extends Omit<HTMLMotionProps<\"div\">, \"className\" | \"ref\"> {\r\n  className?: string;\r\n}\r\n\r\nconst Card = React.forwardRef<HTMLDivElement, CardProps>(\r\n  ({ className, ...props }, ref) => (\r\n    <motion.div\r\n      ref={ref}\r\n      className={cn(\r\n        \"rounded-lg border bg-card text-card-foreground shadow-sm\",\r\n        className\r\n      )}\r\n      whileHover={{\r\n        scale: 1.03,\r\n        boxShadow:\r\n          \"0px 7px 25px rgba(0,0,0,0.08), 0px 3px 10px rgba(0,0,0,0.04)\",\r\n      }}\r\n      transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\r\n      {...props}\r\n    />\r\n  )\r\n);\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardDescription,\r\n  CardContent,\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Grid3x3\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik0zIDloMTgiIC8+CiAgPHBhdGggZD0iTTMgMTVoMTgiIC8+CiAgPHBhdGggZD0iTTkgM3YxOCIgLz4KICA8cGF0aCBkPSJNMTUgM3YxOCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/grid-3x3\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Grid3x3 = createLucideIcon('Grid3x3', [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', key: 'afitv7' }],\n  ['path', { d: 'M3 9h18', key: '1pudct' }],\n  ['path', { d: 'M3 15h18', key: '5xshup' }],\n  ['path', { d: 'M9 3v18', key: 'fh3hqa' }],\n  ['path', { d: 'M15 3v18', key: '14nvp0' }],\n]);\n\nexport default Grid3x3;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Share2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjUiIHI9IjMiIC8+CiAgPGNpcmNsZSBjeD0iNiIgY3k9IjEyIiByPSIzIiAvPgogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTkiIHI9IjMiIC8+CiAgPGxpbmUgeDE9IjguNTkiIHgyPSIxNS40MiIgeTE9IjEzLjUxIiB5Mj0iMTcuNDkiIC8+CiAgPGxpbmUgeDE9IjE1LjQxIiB4Mj0iOC41OSIgeTE9IjYuNTEiIHkyPSIxMC40OSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/share-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Share2 = createLucideIcon('Share2', [\n  ['circle', { cx: '18', cy: '5', r: '3', key: 'gq8acd' }],\n  ['circle', { cx: '6', cy: '12', r: '3', key: 'w7nqdw' }],\n  ['circle', { cx: '18', cy: '19', r: '3', key: '1xt0gg' }],\n  ['line', { x1: '8.59', x2: '15.42', y1: '13.51', y2: '17.49', key: '47mynk' }],\n  ['line', { x1: '15.41', x2: '8.59', y1: '6.51', y2: '10.49', key: '1n3mei' }],\n]);\n\nexport default Share2;\n","/**\r\n * Auth module facade - redirects to the proper Supabase auth implementation\r\n * This file exists to maintain backward compatibility with any code still using the old path.\r\n */\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nimport {\r\n  getAuthUser,\r\n  getAuthUserOrRedirect,\r\n  createServerClient,\r\n  getUser as getAuthUserFromServer,\r\n} from \"./auth/index\";\r\n\r\nimport {\r\n  getSession,\r\n  getCurrentUser,\r\n  isAuthenticated,\r\n  signOut,\r\n  protect,\r\n  protectRole,\r\n  protectAdmin,\r\n} from \"./auth/actions\";\r\n\r\nimport { AuthError } from \"./auth/errors\";\r\nimport { useAuth, useUser, useIsAuthenticated, useHasRole } from \"./auth/hooks\";\r\nimport { createExtendedUser } from \"@/types/auth\";\r\n\r\n/**\r\n * Get the current authenticated user on the server\r\n * @returns The current user's session or null if not authenticated\r\n */\r\nexport async function auth() {\r\n  const result = await getAuthUser();\r\n  return result.session;\r\n}\r\n\r\n/**\r\n * Get the current user on the server\r\n * @returns The current user or null if not authenticated\r\n */\r\nexport const getUser = async () => {\r\n  return getAuthUserFromServer();\r\n};\r\n\r\n/**\r\n * Check if the current user is authenticated\r\n * @returns True if the user is authenticated, false otherwise\r\n */\r\nexport { isAuthenticated };\r\n\r\n/**\r\n * Securely get the authenticated session by first verifying the user\r\n * This is the recommended approach to avoid security issues with direct session access\r\n * @returns The authenticated session or null if not authenticated\r\n */\r\nexport async function getAuthenticatedSession() {\r\n  const result = await getAuthUser();\r\n  return result.session;\r\n}\r\n\r\n/**\r\n * Get the server user\r\n */\r\nexport async function getServerUser() {\r\n  try {\r\n    const { user } = await getAuthUser();\r\n    return { user, error: null };\r\n  } catch (error) {\r\n    return { user: null, error };\r\n  }\r\n}\r\n\r\n/**\r\n * Get the server session\r\n */\r\nexport async function getServerSession() {\r\n  try {\r\n    const { user } = await getAuthUser();\r\n    return { session: user ? { user } : null, error: null };\r\n  } catch (error) {\r\n    return { session: null, error };\r\n  }\r\n}\r\n\r\n// Export main auth functionality from the designated modules\r\nexport {\r\n  getAuthUser,\r\n  getAuthUserOrRedirect,\r\n  createServerClient,\r\n  protect,\r\n  protectRole,\r\n  protectAdmin,\r\n  signOut,\r\n  useAuth,\r\n  useUser,\r\n  useIsAuthenticated,\r\n  useHasRole,\r\n  AuthError,\r\n  createExtendedUser,\r\n};\r\n","\"use client\";\r\n\r\nimport {\r\n  BadgeCheck,\r\n  Code,\r\n  FileText,\r\n  Grid3X3,\r\n  Image,\r\n  Lock,\r\n  Share2,\r\n  Trash2,\r\n  X,\r\n} from \"lucide-react\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport React, { ReactNode, useEffect, useState } from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { useArtifact } from \"@/lib/contexts/artifact-context\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n  Artifact as ArtifactType,\r\n  ArtifactVisibility,\r\n  DocumentContent,\r\n  CodeContent,\r\n} from \"@/types/artifact\";\r\n\r\n\r\n// Temporarily define a simple markdown viewer component while the actual component is being created\r\ninterface SimpleMarkdownViewerProps {\r\n  content: string;\r\n}\r\n\r\nfunction SimpleMarkdownViewer({ content }: SimpleMarkdownViewerProps) {\r\n  return <div className=\"whitespace-pre-wrap\">{content}</div>;\r\n}\r\n\r\ninterface ArtifactProps {\r\n  id: string;\r\n  viewOnly?: boolean;\r\n  onClose?: () => void;\r\n  className?: string;\r\n}\r\n\r\nexport function Artifact({\r\n  id,\r\n  viewOnly = false,\r\n  onClose,\r\n  className,\r\n}: ArtifactProps) {\r\n  const {\r\n    currentArtifact,\r\n    artifactMessages,\r\n    getArtifact,\r\n    updateArtifact,\r\n    deleteArtifact,\r\n    updateArtifactVisibility,\r\n    isLoading,\r\n  } = useArtifact();\r\n  const [activeTab, setActiveTab] = useState(\"document\");\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editedTitle, setEditedTitle] = useState(\"\");\r\n  const [documentContent, setDocumentContent] = useState<DocumentContent>({\r\n    text: \"\",\r\n  });\r\n  const [codeContent, setCodeContent] = useState<CodeContent>({\r\n    code: \"\",\r\n    language: \"\",\r\n  });\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    getArtifact(id);\r\n  }, [id, getArtifact]);\r\n\r\n  useEffect(() => {\r\n    if (currentArtifact) {\r\n      setEditedTitle(currentArtifact.title);\r\n\r\n      // Initialize content based on artifact type\r\n      if (currentArtifact.type === \"document\" && currentArtifact.content) {\r\n        setDocumentContent(currentArtifact.content);\r\n      } else if (currentArtifact.type === \"code\" && currentArtifact.content) {\r\n        setCodeContent(currentArtifact.content);\r\n      }\r\n    }\r\n  }, [currentArtifact]);\r\n\r\n  const handleDelete = async () => {\r\n    if (window.confirm(\"Are you sure you want to delete this artifact?\")) {\r\n      await deleteArtifact(id);\r\n      if (onClose) {\r\n        onClose();\r\n      } else {\r\n        router.push(\"/artifacts\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUpdateVisibility = async (visibility: ArtifactVisibility) => {\r\n    await updateArtifactVisibility(id, visibility);\r\n  };\r\n\r\n  const handleSaveChanges = async () => {\r\n    if (!currentArtifact) return;\r\n\r\n    const updatedContent =\r\n      currentArtifact.type === \"document\"\r\n        ? documentContent\r\n        : currentArtifact.type === \"code\"\r\n          ? codeContent\r\n          : currentArtifact.content;\r\n\r\n    await updateArtifact(id, {\r\n      title: editedTitle,\r\n      content: updatedContent,\r\n    });\r\n\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    if (currentArtifact) {\r\n      setEditedTitle(currentArtifact.title);\r\n\r\n      if (currentArtifact.type === \"document\" && currentArtifact.content) {\r\n        setDocumentContent(currentArtifact.content);\r\n      } else if (currentArtifact.type === \"code\" && currentArtifact.content) {\r\n        setCodeContent(currentArtifact.content);\r\n      }\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  if (isLoading || !currentArtifact) {\r\n    return (\r\n      <Card\r\n        className={cn(\r\n          \"w-full h-full min-h-[300px] flex items-center justify-center\",\r\n          className\r\n        )}\r\n      >\r\n        <div className=\"animate-pulse text-muted-foreground\">\r\n          Loading artifact...\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const getTypeIcon = (type: string): ReactNode => {\r\n    switch (type) {\r\n      case \"document\":\r\n        return <FileText className=\"h-5 w-5\" />;\r\n      case \"code\":\r\n        return <Code className=\"h-5 w-5\" />;\r\n      case \"spreadsheet\":\r\n        return <Grid3X3 className=\"h-5 w-5\" />;\r\n      case \"image\":\r\n        return <Image className=\"h-5 w-5\" />;\r\n      default:\r\n        return <FileText className=\"h-5 w-5\" />;\r\n    }\r\n  };\r\n\r\n  const getVisibilityIcon = (visibility: ArtifactVisibility): ReactNode => {\r\n    switch (visibility) {\r\n      case \"public\":\r\n        return <Share2 className=\"h-4 w-4\" />;\r\n      case \"team\":\r\n        return <BadgeCheck className=\"h-4 w-4\" />;\r\n      case \"private\":\r\n      default:\r\n        return <Lock className=\"h-4 w-4\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className={cn(\"w-full h-full flex flex-col\", className)}>\r\n      <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          {getTypeIcon(currentArtifact.type)}\r\n\r\n          {isEditing ? (\r\n            <Input\r\n              value={editedTitle}\r\n              onChange={(e) => setEditedTitle(e.target.value)}\r\n              className=\"h-7 text-lg font-semibold\"\r\n            />\r\n          ) : (\r\n            <CardTitle>{currentArtifact.title}</CardTitle>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          {!viewOnly && (\r\n            <>\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n                    {getVisibilityIcon(\r\n                      currentArtifact.visibility as ArtifactVisibility\r\n                    )}\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent align=\"end\">\r\n                  <DropdownMenuItem\r\n                    onClick={() => handleUpdateVisibility(\"private\")}\r\n                  >\r\n                    <Lock className=\"h-4 w-4 mr-2\" />\r\n                    Private\r\n                  </DropdownMenuItem>\r\n                  <DropdownMenuItem\r\n                    onClick={() => handleUpdateVisibility(\"team\")}\r\n                  >\r\n                    <BadgeCheck className=\"h-4 w-4 mr-2\" />\r\n                    Team\r\n                  </DropdownMenuItem>\r\n                  <DropdownMenuItem\r\n                    onClick={() => handleUpdateVisibility(\"public\")}\r\n                  >\r\n                    <Share2 className=\"h-4 w-4 mr-2\" />\r\n                    Public\r\n                  </DropdownMenuItem>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n\r\n              {!isEditing ? (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => setIsEditing(true)}\r\n                >\r\n                  Edit\r\n                </Button>\r\n              ) : (\r\n                <>\r\n                  <Button variant=\"ghost\" size=\"sm\" onClick={handleCancelEdit}>\r\n                    Cancel\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"default\"\r\n                    size=\"sm\"\r\n                    onClick={handleSaveChanges}\r\n                  >\r\n                    Save\r\n                  </Button>\r\n                </>\r\n              )}\r\n\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"h-8 w-8 text-destructive\"\r\n                onClick={handleDelete}\r\n              >\r\n                <Trash2 className=\"h-4 w-4\" />\r\n              </Button>\r\n            </>\r\n          )}\r\n\r\n          {onClose && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"h-8 w-8\"\r\n              onClick={onClose}\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"flex-1 p-0 overflow-hidden\">\r\n        <Tabs\r\n          value={activeTab}\r\n          onValueChange={setActiveTab}\r\n          className=\"h-full flex flex-col\"\r\n        >\r\n          <TabsList className=\"mx-4\">\r\n            <TabsTrigger\r\n              value=\"document\"\r\n              onClick={() => setActiveTab(\"document\")}\r\n            >\r\n              Document\r\n            </TabsTrigger>\r\n            {artifactMessages.length > 0 && (\r\n              <TabsTrigger value=\"chat\" onClick={() => setActiveTab(\"chat\")}>\r\n                Chat ({artifactMessages.length})\r\n              </TabsTrigger>\r\n            )}\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"document\" className=\"flex-1 p-4 overflow-auto\">\r\n            {currentArtifact.type === \"document\" &&\r\n              (isEditing ? (\r\n                <div className=\"min-h-[300px] font-mono\">\r\n                  <textarea\r\n                    value={documentContent?.text || \"\"}\r\n                    onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>\r\n                      setDocumentContent({\r\n                        ...documentContent,\r\n                        text: e.target.value,\r\n                      })\r\n                    }\r\n                    className=\"w-full h-full min-h-[300px] p-2 border rounded-md\"\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"prose dark:prose-invert max-w-none\">\r\n                  <SimpleMarkdownViewer\r\n                    content={currentArtifact.content?.text || \"\"}\r\n                  />\r\n                </div>\r\n              ))}\r\n\r\n            {currentArtifact.type === \"code\" &&\r\n              (isEditing ? (\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex space-x-2\">\r\n                    <Input\r\n                      value={codeContent?.fileName || \"\"}\r\n                      onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                        setCodeContent({\r\n                          ...codeContent,\r\n                          fileName: e.target.value,\r\n                        })\r\n                      }\r\n                      placeholder=\"Filename\"\r\n                      className=\"w-1/3\"\r\n                    />\r\n                    <Input\r\n                      value={codeContent?.language || \"\"}\r\n                      onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                        setCodeContent({\r\n                          ...codeContent,\r\n                          language: e.target.value,\r\n                        })\r\n                      }\r\n                      placeholder=\"Language\"\r\n                      className=\"w-1/3\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"min-h-[300px] font-mono\">\r\n                    <textarea\r\n                      value={codeContent?.code || \"\"}\r\n                      onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>\r\n                        setCodeContent({ ...codeContent, code: e.target.value })\r\n                      }\r\n                      className=\"w-full h-full min-h-[300px] p-2 border rounded-md font-mono\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"prose dark:prose-invert max-w-none\">\r\n                  <h3>{currentArtifact.content?.fileName || \"Code\"}</h3>\r\n                  <pre className=\"bg-gray-100 dark:bg-gray-800 p-4 rounded-md overflow-auto\">\r\n                    <code>{currentArtifact.content?.code || \"\"}</code>\r\n                  </pre>\r\n                </div>\r\n              ))}\r\n\r\n            {/* Other artifact types can be added here */}\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"chat\" className=\"flex-1 p-4 overflow-auto\">\r\n            <div className=\"space-y-4\">\r\n              {artifactMessages.map((message) => (\r\n                <div\r\n                  key={message.id}\r\n                  className={cn(\r\n                    \"p-3 rounded-lg\",\r\n                    message.role === \"user\"\r\n                      ? \"bg-primary text-primary-foreground ml-12\"\r\n                      : \"bg-muted mr-12\"\r\n                  )}\r\n                >\r\n                  <div className=\"text-xs font-medium mb-1\">\r\n                    {message.role === \"user\" ? \"You\" : \"AI Assistant\"}\r\n                  </div>\r\n                  <div>{message.message}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </TabsContent>\r\n        </Tabs>\r\n      </CardContent>\r\n\r\n      <CardFooter className=\"text-xs text-muted-foreground pt-2 pb-2\">\r\n        <div className=\"flex items-center space-x-1\">\r\n          <span>\r\n            Created: {new Date(currentArtifact.created_at).toLocaleString()}\r\n          </span>\r\n          <span>•</span>\r\n          <span>\r\n            Updated: {new Date(currentArtifact.updated_at).toLocaleString()}\r\n          </span>\r\n        </div>\r\n      </CardFooter>\r\n    </Card>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Image\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiByeT0iMiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iOSIgcj0iMiIgLz4KICA8cGF0aCBkPSJtMjEgMTUtMy4wODYtMy4wODZhMiAyIDAgMCAwLTIuODI4IDBMNiAyMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/image\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Image = createLucideIcon('Image', [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', ry: '2', key: '1m3agn' }],\n  ['circle', { cx: '9', cy: '9', r: '2', key: 'af1f0g' }],\n  ['path', { d: 'm21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21', key: '1xmnt7' }],\n]);\n\nexport default Image;\n","\"use client\"\r\n\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn(\"flex flex-col gap-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn(\"flex-1 outline-none\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n","\"use client\";\r\n\r\nimport * as ToastPrimitives from \"@radix-ui/react-toast\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { AlertCircle, CheckCircle, Info, X } from \"lucide-react\";\r\nimport React, {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useRef,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n// Toast types for our custom implementation\r\nexport type CustomToastVariant = \"default\" | \"destructive\" | \"success\" | \"info\";\r\n\r\nexport interface CustomToastProps {\r\n  title: string;\r\n  description?: string;\r\n  variant?: CustomToastVariant;\r\n  duration?: number;\r\n}\r\n\r\ninterface ToastContextValue {\r\n  toast: (props: CustomToastProps) => void;\r\n  toasts: (CustomToastProps & { id: string })[];\r\n  removeToast: (id: string) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextValue | undefined>(undefined);\r\n\r\n// Standard shadcn toast components\r\nconst ToastProvider = ToastPrimitives.Provider;\r\n\r\nconst ToastViewport = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Viewport\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nToastViewport.displayName = ToastPrimitives.Viewport.displayName;\r\n\r\nconst toastVariants = cva(\r\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border bg-background text-foreground\",\r\n        destructive:\r\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nconst Toast = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\r\n    VariantProps<typeof toastVariants>\r\n>(({ className, variant, ...props }, ref) => {\r\n  return (\r\n    <ToastPrimitives.Root\r\n      ref={ref}\r\n      className={cn(toastVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nToast.displayName = ToastPrimitives.Root.displayName;\r\n\r\nconst ToastAction = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Action>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Action\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nToastAction.displayName = ToastPrimitives.Action.displayName;\r\n\r\nconst ToastClose = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Close>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Close\r\n    ref={ref}\r\n    className={cn(\r\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\r\n      className\r\n    )}\r\n    toast-close=\"\"\r\n    {...props}\r\n  >\r\n    <X className=\"h-4 w-4\" />\r\n  </ToastPrimitives.Close>\r\n));\r\nToastClose.displayName = ToastPrimitives.Close.displayName;\r\n\r\nconst ToastTitle = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Title>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Title\r\n    ref={ref}\r\n    className={cn(\"text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n));\r\nToastTitle.displayName = ToastPrimitives.Title.displayName;\r\n\r\nconst ToastDescription = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Description>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm opacity-90\", className)}\r\n    {...props}\r\n  />\r\n));\r\nToastDescription.displayName = ToastPrimitives.Description.displayName;\r\n\r\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;\r\n\r\ntype ToastActionElement = React.ReactElement<typeof ToastAction>;\r\n\r\n// Rename our custom toast function to avoid conflicts\r\nfunction CustomToast({\r\n  title,\r\n  description,\r\n  variant = \"default\",\r\n  onClose,\r\n}: CustomToastProps & { onClose: () => void }) {\r\n  // Determine styles based on variant\r\n  const variantStyles: Record<CustomToastVariant, string> = {\r\n    default: \"bg-white border-gray-200\",\r\n    destructive: \"bg-red-50 border-red-200 text-red-700\",\r\n    success: \"bg-green-50 border-green-200 text-green-700\",\r\n    info: \"bg-blue-50 border-blue-200 text-blue-700\",\r\n  };\r\n\r\n  // Icon based on variant\r\n  const IconComponent = {\r\n    default: null,\r\n    destructive: AlertCircle,\r\n    success: CheckCircle,\r\n    info: Info,\r\n  }[variant];\r\n\r\n  return (\r\n    <div\r\n      className={`max-w-md rounded-lg border shadow-lg p-4 flex items-start gap-3 animate-slide-up-fade ${variantStyles[variant]}`}\r\n      role=\"alert\"\r\n    >\r\n      {IconComponent && <IconComponent className=\"h-5 w-5 flex-shrink-0\" />}\r\n\r\n      <div className=\"flex-1\">\r\n        <h3 className=\"font-medium\">{title}</h3>\r\n        {description && (\r\n          <p className=\"text-sm mt-1 opacity-90\">{description}</p>\r\n        )}\r\n      </div>\r\n\r\n      <button\r\n        onClick={onClose}\r\n        className=\"flex-shrink-0 rounded-full p-1 hover:bg-gray-100\"\r\n        aria-label=\"Close\"\r\n      >\r\n        <X className=\"h-4 w-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Rename our custom provider to avoid conflicts\r\nexport function CustomToastProvider({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const [toasts, setToasts] = useState<(CustomToastProps & { id: string })[]>(\r\n    []\r\n  );\r\n  const toastIdCounter = useRef(0);\r\n\r\n  // Memoize removeToast\r\n  const removeToast = useCallback((id: string) => {\r\n    // setToasts is guaranteed to be stable by React\r\n    setToasts((prevToasts) => prevToasts.filter((toast) => toast.id !== id));\r\n  }, []); // Empty dependency array is correct here\r\n\r\n  // Memoize toast\r\n  const toast = useCallback(\r\n    (props: CustomToastProps) => {\r\n      const id = `toast-${toastIdCounter.current++}`;\r\n      const newToast = { ...props, id };\r\n\r\n      // setToasts is guaranteed to be stable by React\r\n      setToasts((prevToasts) => [...prevToasts, newToast]);\r\n\r\n      // Auto-remove toast after duration\r\n      // Note: referencing removeToast here is fine because it's memoized\r\n      setTimeout(() => {\r\n        removeToast(id);\r\n      }, props.duration || 5000);\r\n    },\r\n    [removeToast]\r\n  ); // Dependency: removeToast\r\n\r\n  // Memoize the context value object\r\n  const contextValue = useMemo(\r\n    () => ({\r\n      toast,\r\n      toasts,\r\n      removeToast,\r\n    }),\r\n    [toast, toasts, removeToast]\r\n  );\r\n\r\n  return (\r\n    // Pass the memoized context value\r\n    <ToastContext.Provider value={contextValue}>\r\n      {children}\r\n      <CustomToastContainer />\r\n    </ToastContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useToast() {\r\n  const context = useContext(ToastContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useToast must be used within a CustomToastProvider\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\nfunction CustomToastContainer() {\r\n  const { toasts, removeToast } = useToast();\r\n\r\n  return (\r\n    <div className=\"fixed bottom-0 right-0 p-4 space-y-2 z-50\">\r\n      {toasts.map((toast) => (\r\n        <CustomToast\r\n          key={toast.id}\r\n          {...toast}\r\n          onClose={() => removeToast(toast.id)}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport {\r\n  type ToastProps,\r\n  type ToastActionElement,\r\n  ToastProvider,\r\n  ToastViewport,\r\n  Toast,\r\n  ToastTitle,\r\n  ToastDescription,\r\n  ToastClose,\r\n  ToastAction,\r\n};\r\n","\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\nimport { useToast } from \"@/components/ui/toast\";\r\nimport { getSupabaseClient } from \"@/lib/supabase/client\";\r\nimport {\r\n  Artifact,\r\n  ArtifactMessage,\r\n  ArtifactType,\r\n  ArtifactVisibility,\r\n} from \"@/types/artifact\";\r\n\r\ninterface ArtifactContextType {\r\n  artifacts: Artifact[];\r\n  currentArtifact: Artifact | null;\r\n  artifactMessages: ArtifactMessage[];\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  createArtifact: (\r\n    title: string,\r\n    type: ArtifactType,\r\n    content: any,\r\n    chatId?: string\r\n  ) => Promise<Artifact>;\r\n  updateArtifact: (id: string, updates: Partial<Artifact>) => Promise<void>;\r\n  deleteArtifact: (id: string) => Promise<void>;\r\n  getArtifact: (id: string) => Promise<void>;\r\n  addArtifactMessage: (\r\n    artifactId: string,\r\n    message: string,\r\n    role: \"user\" | \"assistant\" | \"system\"\r\n  ) => Promise<void>;\r\n  updateArtifactVisibility: (\r\n    id: string,\r\n    visibility: ArtifactVisibility\r\n  ) => Promise<void>;\r\n}\r\n\r\nconst ArtifactContext = createContext<ArtifactContextType | undefined>(\r\n  undefined\r\n);\r\n\r\nexport function ArtifactProvider({ children }: { children: React.ReactNode }) {\r\n  const [artifacts, setArtifacts] = useState<Artifact[]>([]);\r\n  const [currentArtifact, setCurrentArtifact] = useState<Artifact | null>(null);\r\n  const [artifactMessages, setArtifactMessages] = useState<ArtifactMessage[]>(\r\n    []\r\n  );\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const router = useRouter();\r\n  const { toast } = useToast();\r\n  const supabase = getSupabaseClient();\r\n\r\n  // Fetch all artifacts for current user\r\n  useEffect(() => {\r\n    const fetchArtifacts = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const { data, error } = await supabase\r\n          .from(\"artifacts\")\r\n          .select(\"*\")\r\n          .order(\"updated_at\", { ascending: false });\r\n\r\n        if (error) throw error;\r\n        setArtifacts(data || []);\r\n      } catch (error) {\r\n        setError(\"Failed to fetch artifacts\");\r\n        console.error(error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchArtifacts();\r\n\r\n    // Set up subscription for real-time updates\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    const subscription = supabase\r\n      .channel(\"artifacts\")\r\n      .on(\r\n        \"postgres_changes\",\r\n        {\r\n          event: \"*\",\r\n          schema: \"public\",\r\n          table: \"artifacts\",\r\n        },\r\n        (payload) => {\r\n          if (payload.eventType === \"INSERT\") {\r\n            setArtifacts((prev) => [payload.new as Artifact, ...prev]);\r\n          } else if (payload.eventType === \"UPDATE\") {\r\n            setArtifacts((prev) =>\r\n              prev.map((artifact) =>\r\n                artifact.id === payload.new.id\r\n                  ? (payload.new as Artifact)\r\n                  : artifact\r\n              )\r\n            );\r\n            if (currentArtifact?.id === payload.new.id) {\r\n              setCurrentArtifact(payload.new as Artifact);\r\n            }\r\n          } else if (payload.eventType === \"DELETE\") {\r\n            setArtifacts((prev) =>\r\n              prev.filter((artifact) => artifact.id !== payload.old.id)\r\n            );\r\n            if (currentArtifact?.id === payload.old.id) {\r\n              setCurrentArtifact(null);\r\n            }\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  const getArtifact = async (id: string) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      // Fetch artifact\r\n      const { data: artifact, error: artifactError } = await supabase\r\n        .from(\"artifacts\")\r\n        .select(\"*\")\r\n        .eq(\"id\", id)\r\n        .single();\r\n\r\n      if (artifactError) throw artifactError;\r\n      setCurrentArtifact(artifact);\r\n\r\n      // Fetch artifact messages\r\n      const { data: messages, error: messagesError } = await supabase\r\n        .from(\"artifact_messages\")\r\n        .select(\"*\")\r\n        .eq(\"artifact_id\", id)\r\n        .order(\"created_at\", { ascending: true });\r\n\r\n      if (messagesError) throw messagesError;\r\n      setArtifactMessages(messages || []);\r\n    } catch (error) {\r\n      console.error(\"Error fetching artifact:\", error);\r\n      setError(\"Failed to fetch artifact\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const createArtifact = async (\r\n    title: string,\r\n    type: ArtifactType,\r\n    content: any,\r\n    chatId?: string\r\n  ): Promise<Artifact> => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const { data: userData } = await supabase.auth.getUser();\r\n\r\n      if (!userData?.user) {\r\n        throw new Error(\"User not authenticated\");\r\n      }\r\n\r\n      const newArtifact = {\r\n        title,\r\n        type,\r\n        content,\r\n        user_id: userData.user.id,\r\n        chat_id: chatId,\r\n        visibility: \"private\" as ArtifactVisibility,\r\n      };\r\n\r\n      const { data, error } = await supabase\r\n        .from(\"artifacts\")\r\n        .insert(newArtifact)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Artifact created\",\r\n        description: `${title} has been created successfully`,\r\n        variant: \"success\",\r\n      });\r\n\r\n      return data;\r\n    } catch (error) {\r\n      const errorMessage = \"Failed to create artifact\";\r\n      setError(errorMessage);\r\n      console.error(error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: errorMessage,\r\n        variant: \"destructive\",\r\n      });\r\n      throw error;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateArtifact = async (id: string, updates: Partial<Artifact>) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const { error } = await supabase\r\n        .from(\"artifacts\")\r\n        .update({\r\n          ...updates,\r\n          updated_at: new Date().toISOString(),\r\n        })\r\n        .eq(\"id\", id);\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Artifact updated\",\r\n        description: \"Your changes have been saved\",\r\n        variant: \"success\",\r\n      });\r\n    } catch (error) {\r\n      const errorMessage = \"Failed to update artifact\";\r\n      setError(errorMessage);\r\n      console.error(error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: errorMessage,\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteArtifact = async (id: string) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const { error } = await supabase.from(\"artifacts\").delete().eq(\"id\", id);\r\n\r\n      if (error) throw error;\r\n\r\n      if (currentArtifact?.id === id) {\r\n        setCurrentArtifact(null);\r\n        router.push(\"/artifacts\");\r\n      }\r\n\r\n      toast({\r\n        title: \"Artifact deleted\",\r\n        description: \"The artifact has been removed\",\r\n        variant: \"success\",\r\n      });\r\n    } catch (error) {\r\n      const errorMessage = \"Failed to delete artifact\";\r\n      setError(errorMessage);\r\n      console.error(error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: errorMessage,\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addArtifactMessage = async (\r\n    artifactId: string,\r\n    message: string,\r\n    role: \"user\" | \"assistant\" | \"system\"\r\n  ) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const newMessage = {\r\n        artifact_id: artifactId,\r\n        content: message,\r\n        role,\r\n      };\r\n\r\n      const { error } = await supabase\r\n        .from(\"artifact_messages\")\r\n        .insert(newMessage);\r\n\r\n      if (error) throw error;\r\n\r\n      // Refresh messages\r\n      await getArtifact(artifactId);\r\n    } catch (error) {\r\n      setError(\"Failed to add message\");\r\n      console.error(error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateArtifactVisibility = async (\r\n    id: string,\r\n    visibility: ArtifactVisibility\r\n  ) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const { error } = await supabase\r\n        .from(\"artifacts\")\r\n        .update({ visibility })\r\n        .eq(\"id\", id);\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Visibility updated\",\r\n        description: `Artifact is now ${visibility}`,\r\n        variant: \"success\",\r\n      });\r\n    } catch (error) {\r\n      const errorMessage = \"Failed to update visibility\";\r\n      setError(errorMessage);\r\n      console.error(error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: errorMessage,\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    artifacts,\r\n    currentArtifact,\r\n    artifactMessages,\r\n    isLoading,\r\n    error,\r\n    createArtifact,\r\n    updateArtifact,\r\n    deleteArtifact,\r\n    getArtifact,\r\n    addArtifactMessage,\r\n    updateArtifactVisibility,\r\n  };\r\n\r\n  return (\r\n    <ArtifactContext.Provider value={value}>\r\n      {children}\r\n    </ArtifactContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useArtifact = () => {\r\n  const context = useContext(ArtifactContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useArtifact must be used within an ArtifactProvider\");\r\n  }\r\n  return context;\r\n};\r\n"],"names":["Card","React","className","props","ref","motion","div","cn","whileHover","scale","boxShadow","transition","type","stiffness","damping","displayName","CardHeader","CardTitle","h3","CardDescription","p","CardContent","CardFooter","auth","getAuthUser","session","SimpleMarkdownViewer","content","Artifact","id","viewOnly","onClose","currentArtifact","artifactMessages","getArtifact","updateArtifact","deleteArtifact","updateArtifactVisibility","isLoading","useArtifact","activeTab","setActiveTab","useState","isEditing","setIsEditing","editedTitle","setEditedTitle","documentContent","setDocumentContent","text","codeContent","setCodeContent","code","language","router","useRouter","usePathname","handleDelete","window","confirm","push","handleUpdateVisibility","visibility","handleSaveChanges","updatedContent","title","getTypeIcon","FileText","Code","Grid3X3","Image","Input","value","onChange","e","target","DropdownMenu","DropdownMenuTrigger","asChild","Button","variant","size","getVisibilityIcon","Share2","BadgeCheck","Lock","DropdownMenuContent","align","DropdownMenuItem","onClick","handleCancelEdit","Trash2","X","Tabs","onValueChange","TabsList","TabsTrigger","length","TabsContent","textarea","fileName","placeholder","pre","map","message","role","span","Date","created_at","toLocaleString","updated_at","TabsPrimitive","data-slot","ToastContext","createContext","undefined","ToastPrimitives","toastVariants","cva","variants","default","destructive","defaultVariants","CustomToast","description","IconComponent","AlertCircle","success","CheckCircle","info","Info","variantStyles","button","aria-label","CustomToastProvider","children","toasts","setToasts","toastIdCounter","useRef","removeToast","useCallback","prevToasts","filter","toast","current","newToast","setTimeout","duration","contextValue","useMemo","Provider","CustomToastContainer","useToast","context","useContext","ToastAction","ToastClose","toast-close","ToastTitle","ArtifactContext","ArtifactProvider","artifacts","setArtifacts","setCurrentArtifact","setArtifactMessages","setIsLoading","error","setError","supabase","getSupabaseClient","data","artifact","artifactError","from","select","eq","single","messages","messagesError","order","ascending","console","createArtifact","chatId","userData","getUser","user","newArtifact","user_id","chat_id","insert","errorMessage","updates","update","toISOString","delete","addArtifactMessage","artifactId","newMessage","artifact_id"],"sourceRoot":""}